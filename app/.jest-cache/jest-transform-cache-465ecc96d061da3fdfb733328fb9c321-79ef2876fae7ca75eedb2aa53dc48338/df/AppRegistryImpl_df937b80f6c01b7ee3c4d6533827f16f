1bc871f6e8171f5043ebf9333f84412e
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.cancelHeadlessTask = cancelHeadlessTask;
exports.getAppKeys = getAppKeys;
exports.getRegistry = getRegistry;
exports.getRunnable = getRunnable;
exports.getSectionKeys = getSectionKeys;
exports.getSections = getSections;
exports.registerCancellableHeadlessTask = registerCancellableHeadlessTask;
exports.registerComponent = registerComponent;
exports.registerConfig = registerConfig;
exports.registerHeadlessTask = registerHeadlessTask;
exports.registerRunnable = registerRunnable;
exports.registerSection = registerSection;
exports.runApplication = runApplication;
exports.setComponentProviderInstrumentationHook = setComponentProviderInstrumentationHook;
exports.setRootViewStyleProvider = setRootViewStyleProvider;
exports.setSurfaceProps = setSurfaceProps;
exports.setWrapperComponentProvider = setWrapperComponentProvider;
exports.startHeadlessTask = startHeadlessTask;
exports.unmountApplicationComponentAtRootTag = unmountApplicationComponentAtRootTag;
var _createPerformanceLogger = _interopRequireDefault(require("../Utilities/createPerformanceLogger"));
var _SceneTracker = _interopRequireDefault(require("../Utilities/SceneTracker"));
var _DisplayMode = require("./DisplayMode");
var _HeadlessJsTaskError = _interopRequireDefault(require("./HeadlessJsTaskError"));
var _NativeHeadlessJsTaskSupport = _interopRequireDefault(require("./NativeHeadlessJsTaskSupport"));
var _renderApplication = _interopRequireDefault(require("./renderApplication"));
var _RendererProxy = require("./RendererProxy");
var _invariant = _interopRequireDefault(require("invariant"));
var runnables = {};
var sections = {};
var taskProviders = new Map();
var taskCancelProviders = new Map();
var componentProviderInstrumentationHook = function componentProviderInstrumentationHook(component) {
  return component();
};
var wrapperComponentProvider;
var rootViewStyleProvider;
function setWrapperComponentProvider(provider) {
  wrapperComponentProvider = provider;
}
function setRootViewStyleProvider(provider) {
  rootViewStyleProvider = provider;
}
function registerConfig(config) {
  config.forEach(function (appConfig) {
    if (appConfig.run) {
      registerRunnable(appConfig.appKey, appConfig.run);
    } else {
      (0, _invariant.default)(appConfig.component != null, 'AppRegistry.registerConfig(...): Every config is expected to set ' + 'either `run` or `component`, but `%s` has neither.', appConfig.appKey);
      registerComponent(appConfig.appKey, appConfig.component, appConfig.section);
    }
  });
}
function registerComponent(appKey, componentProvider, section) {
  var scopedPerformanceLogger = (0, _createPerformanceLogger.default)();
  runnables[appKey] = function (appParameters, displayMode) {
    (0, _renderApplication.default)(componentProviderInstrumentationHook(componentProvider, scopedPerformanceLogger), appParameters.initialProps, appParameters.rootTag, wrapperComponentProvider && wrapperComponentProvider(appParameters), rootViewStyleProvider && rootViewStyleProvider(appParameters), appParameters.fabric, scopedPerformanceLogger, appKey === 'LogBox', appKey, displayMode);
  };
  if (section) {
    sections[appKey] = runnables[appKey];
  }
  return appKey;
}
function registerRunnable(appKey, run) {
  runnables[appKey] = run;
  return appKey;
}
function registerSection(appKey, component) {
  registerComponent(appKey, component, true);
}
function getAppKeys() {
  return Object.keys(runnables);
}
function getSectionKeys() {
  return Object.keys(sections);
}
function getSections() {
  return Object.assign({}, sections);
}
function getRunnable(appKey) {
  return runnables[appKey];
}
function getRegistry() {
  return {
    sections: getSectionKeys(),
    runnables: Object.assign({}, runnables)
  };
}
function setComponentProviderInstrumentationHook(hook) {
  componentProviderInstrumentationHook = hook;
}
function runApplication(appKey, appParameters, displayMode) {
  if (appKey !== 'LogBox') {
    var logParams = __DEV__ ? ` with ${JSON.stringify(appParameters)}` : '';
    var msg = `Running "${appKey}"${logParams}`;
    console.log(msg);
  }
  (0, _invariant.default)(runnables[appKey], `"${appKey}" has not been registered. This can happen if:\n` + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
  _SceneTracker.default.setActiveScene({
    name: appKey
  });
  runnables[appKey](appParameters, (0, _DisplayMode.coerceDisplayMode)(displayMode));
}
function setSurfaceProps(appKey, appParameters, displayMode) {
  if (appKey !== 'LogBox') {
    var msg = 'Updating props for Surface "' + appKey + '" with ' + JSON.stringify(appParameters);
    console.log(msg);
  }
  (0, _invariant.default)(runnables[appKey], `"${appKey}" has not been registered. This can happen if:\n` + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
  runnables[appKey](appParameters, (0, _DisplayMode.coerceDisplayMode)(displayMode));
}
function unmountApplicationComponentAtRootTag(rootTag) {
  (0, _RendererProxy.unmountComponentAtNodeAndRemoveContainer)(rootTag);
}
function registerHeadlessTask(taskKey, taskProvider) {
  registerCancellableHeadlessTask(taskKey, taskProvider, function () {
    return function () {};
  });
}
function registerCancellableHeadlessTask(taskKey, taskProvider, taskCancelProvider) {
  if (taskProviders.has(taskKey)) {
    console.warn(`registerHeadlessTask or registerCancellableHeadlessTask called multiple times for same key '${taskKey}'`);
  }
  taskProviders.set(taskKey, taskProvider);
  taskCancelProviders.set(taskKey, taskCancelProvider);
}
function startHeadlessTask(taskId, taskKey, data) {
  var taskProvider = taskProviders.get(taskKey);
  if (!taskProvider) {
    console.warn(`No task registered for key ${taskKey}`);
    if (_NativeHeadlessJsTaskSupport.default) {
      _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
    }
    return;
  }
  taskProvider()(data).then(function () {
    if (_NativeHeadlessJsTaskSupport.default) {
      _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
    }
  }).catch(function (reason) {
    console.error(reason);
    if (_NativeHeadlessJsTaskSupport.default && reason instanceof _HeadlessJsTaskError.default) {
      _NativeHeadlessJsTaskSupport.default.notifyTaskRetry(taskId).then(function (retryPosted) {
        if (!retryPosted) {
          _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
        }
      });
    }
  });
}
function cancelHeadlessTask(taskId, taskKey) {
  var taskCancelProvider = taskCancelProviders.get(taskKey);
  if (!taskCancelProvider) {
    throw new Error(`No task canceller registered for key '${taskKey}'`);
  }
  taskCancelProvider()();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9TY2VuZVRyYWNrZXIiLCJfRGlzcGxheU1vZGUiLCJfSGVhZGxlc3NKc1Rhc2tFcnJvciIsIl9OYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQiLCJfcmVuZGVyQXBwbGljYXRpb24iLCJfUmVuZGVyZXJQcm94eSIsIl9pbnZhcmlhbnQiLCJydW5uYWJsZXMiLCJzZWN0aW9ucyIsInRhc2tQcm92aWRlcnMiLCJNYXAiLCJ0YXNrQ2FuY2VsUHJvdmlkZXJzIiwiY29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rIiwiY29tcG9uZW50Iiwid3JhcHBlckNvbXBvbmVudFByb3ZpZGVyIiwicm9vdFZpZXdTdHlsZVByb3ZpZGVyIiwic2V0V3JhcHBlckNvbXBvbmVudFByb3ZpZGVyIiwicHJvdmlkZXIiLCJzZXRSb290Vmlld1N0eWxlUHJvdmlkZXIiLCJyZWdpc3RlckNvbmZpZyIsImNvbmZpZyIsImZvckVhY2giLCJhcHBDb25maWciLCJydW4iLCJyZWdpc3RlclJ1bm5hYmxlIiwiYXBwS2V5IiwiaW52YXJpYW50IiwicmVnaXN0ZXJDb21wb25lbnQiLCJzZWN0aW9uIiwiY29tcG9uZW50UHJvdmlkZXIiLCJzY29wZWRQZXJmb3JtYW5jZUxvZ2dlciIsImNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyIiwiYXBwUGFyYW1ldGVycyIsImRpc3BsYXlNb2RlIiwicmVuZGVyQXBwbGljYXRpb24iLCJpbml0aWFsUHJvcHMiLCJyb290VGFnIiwiZmFicmljIiwicmVnaXN0ZXJTZWN0aW9uIiwiZ2V0QXBwS2V5cyIsIk9iamVjdCIsImtleXMiLCJnZXRTZWN0aW9uS2V5cyIsImdldFNlY3Rpb25zIiwiYXNzaWduIiwiZ2V0UnVubmFibGUiLCJnZXRSZWdpc3RyeSIsInNldENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayIsImhvb2siLCJydW5BcHBsaWNhdGlvbiIsImxvZ1BhcmFtcyIsIl9fREVWX18iLCJKU09OIiwic3RyaW5naWZ5IiwibXNnIiwiY29uc29sZSIsImxvZyIsIlNjZW5lVHJhY2tlciIsInNldEFjdGl2ZVNjZW5lIiwibmFtZSIsImNvZXJjZURpc3BsYXlNb2RlIiwic2V0U3VyZmFjZVByb3BzIiwidW5tb3VudEFwcGxpY2F0aW9uQ29tcG9uZW50QXRSb290VGFnIiwidW5tb3VudENvbXBvbmVudEF0Tm9kZUFuZFJlbW92ZUNvbnRhaW5lciIsInJlZ2lzdGVySGVhZGxlc3NUYXNrIiwidGFza0tleSIsInRhc2tQcm92aWRlciIsInJlZ2lzdGVyQ2FuY2VsbGFibGVIZWFkbGVzc1Rhc2siLCJ0YXNrQ2FuY2VsUHJvdmlkZXIiLCJoYXMiLCJ3YXJuIiwic2V0Iiwic3RhcnRIZWFkbGVzc1Rhc2siLCJ0YXNrSWQiLCJkYXRhIiwiZ2V0IiwiTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Iiwibm90aWZ5VGFza0ZpbmlzaGVkIiwidGhlbiIsImNhdGNoIiwicmVhc29uIiwiZXJyb3IiLCJIZWFkbGVzc0pzVGFza0Vycm9yIiwibm90aWZ5VGFza1JldHJ5IiwicmV0cnlQb3N0ZWQiLCJjYW5jZWxIZWFkbGVzc1Rhc2siLCJFcnJvciJdLCJzb3VyY2VzIjpbIkFwcFJlZ2lzdHJ5SW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZSB7Um9vdFRhZ30gZnJvbSAnLi4vVHlwZXMvUm9vdFRhZ1R5cGVzJztcbmltcG9ydCB0eXBlIHtcbiAgQXBwQ29uZmlnLFxuICBBcHBQYXJhbWV0ZXJzLFxuICBDb21wb25lbnRQcm92aWRlcixcbiAgQ29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rLFxuICBSZWdpc3RyeSxcbiAgUm9vdFZpZXdTdHlsZVByb3ZpZGVyLFxuICBSdW5uYWJsZSxcbiAgUnVubmFibGVzLFxuICBUYXNrUHJvdmlkZXIsXG4gIFdyYXBwZXJDb21wb25lbnRQcm92aWRlcixcbn0gZnJvbSAnLi9BcHBSZWdpc3RyeS5mbG93JztcblxuaW1wb3J0IGNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyIGZyb20gJy4uL1V0aWxpdGllcy9jcmVhdGVQZXJmb3JtYW5jZUxvZ2dlcic7XG5pbXBvcnQgU2NlbmVUcmFja2VyIGZyb20gJy4uL1V0aWxpdGllcy9TY2VuZVRyYWNrZXInO1xuaW1wb3J0IHtjb2VyY2VEaXNwbGF5TW9kZX0gZnJvbSAnLi9EaXNwbGF5TW9kZSc7XG5pbXBvcnQgSGVhZGxlc3NKc1Rhc2tFcnJvciBmcm9tICcuL0hlYWRsZXNzSnNUYXNrRXJyb3InO1xuaW1wb3J0IE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCBmcm9tICcuL05hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCc7XG5pbXBvcnQgcmVuZGVyQXBwbGljYXRpb24gZnJvbSAnLi9yZW5kZXJBcHBsaWNhdGlvbic7XG5pbXBvcnQge3VubW91bnRDb21wb25lbnRBdE5vZGVBbmRSZW1vdmVDb250YWluZXJ9IGZyb20gJy4vUmVuZGVyZXJQcm94eSc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbnR5cGUgVGFza0NhbmNlbGxlciA9ICgpID0+IHZvaWQ7XG50eXBlIFRhc2tDYW5jZWxQcm92aWRlciA9ICgpID0+IFRhc2tDYW5jZWxsZXI7XG5cbmNvbnN0IHJ1bm5hYmxlczogUnVubmFibGVzID0ge307XG5jb25zdCBzZWN0aW9uczogUnVubmFibGVzID0ge307XG5jb25zdCB0YXNrUHJvdmlkZXJzOiBNYXA8c3RyaW5nLCBUYXNrUHJvdmlkZXI+ID0gbmV3IE1hcCgpO1xuY29uc3QgdGFza0NhbmNlbFByb3ZpZGVyczogTWFwPHN0cmluZywgVGFza0NhbmNlbFByb3ZpZGVyPiA9IG5ldyBNYXAoKTtcbmxldCBjb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2s6IENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayA9XG4gIChjb21wb25lbnQ6IENvbXBvbmVudFByb3ZpZGVyKSA9PiBjb21wb25lbnQoKTtcblxubGV0IHdyYXBwZXJDb21wb25lbnRQcm92aWRlcjogP1dyYXBwZXJDb21wb25lbnRQcm92aWRlcjtcbmxldCByb290Vmlld1N0eWxlUHJvdmlkZXI6ID9Sb290Vmlld1N0eWxlUHJvdmlkZXI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRXcmFwcGVyQ29tcG9uZW50UHJvdmlkZXIoXG4gIHByb3ZpZGVyOiBXcmFwcGVyQ29tcG9uZW50UHJvdmlkZXIsXG4pIHtcbiAgd3JhcHBlckNvbXBvbmVudFByb3ZpZGVyID0gcHJvdmlkZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRSb290Vmlld1N0eWxlUHJvdmlkZXIocHJvdmlkZXI6IFJvb3RWaWV3U3R5bGVQcm92aWRlcikge1xuICByb290Vmlld1N0eWxlUHJvdmlkZXIgPSBwcm92aWRlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29uZmlnKGNvbmZpZzogQXJyYXk8QXBwQ29uZmlnPik6IHZvaWQge1xuICBjb25maWcuZm9yRWFjaChhcHBDb25maWcgPT4ge1xuICAgIGlmIChhcHBDb25maWcucnVuKSB7XG4gICAgICByZWdpc3RlclJ1bm5hYmxlKGFwcENvbmZpZy5hcHBLZXksIGFwcENvbmZpZy5ydW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIGFwcENvbmZpZy5jb21wb25lbnQgIT0gbnVsbCxcbiAgICAgICAgJ0FwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29uZmlnKC4uLik6IEV2ZXJ5IGNvbmZpZyBpcyBleHBlY3RlZCB0byBzZXQgJyArXG4gICAgICAgICAgJ2VpdGhlciBgcnVuYCBvciBgY29tcG9uZW50YCwgYnV0IGAlc2AgaGFzIG5laXRoZXIuJyxcbiAgICAgICAgYXBwQ29uZmlnLmFwcEtleSxcbiAgICAgICk7XG4gICAgICByZWdpc3RlckNvbXBvbmVudChcbiAgICAgICAgYXBwQ29uZmlnLmFwcEtleSxcbiAgICAgICAgYXBwQ29uZmlnLmNvbXBvbmVudCxcbiAgICAgICAgYXBwQ29uZmlnLnNlY3Rpb24sXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGFuIGFwcCdzIHJvb3QgY29tcG9uZW50LlxuICpcbiAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5I3JlZ2lzdGVyY29tcG9uZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudChcbiAgYXBwS2V5OiBzdHJpbmcsXG4gIGNvbXBvbmVudFByb3ZpZGVyOiBDb21wb25lbnRQcm92aWRlcixcbiAgc2VjdGlvbj86IGJvb2xlYW4sXG4pOiBzdHJpbmcge1xuICBjb25zdCBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlciA9IGNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyKCk7XG4gIHJ1bm5hYmxlc1thcHBLZXldID0gKGFwcFBhcmFtZXRlcnMsIGRpc3BsYXlNb2RlKSA9PiB7XG4gICAgcmVuZGVyQXBwbGljYXRpb24oXG4gICAgICBjb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2soXG4gICAgICAgIGNvbXBvbmVudFByb3ZpZGVyLFxuICAgICAgICBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlcixcbiAgICAgICksXG4gICAgICBhcHBQYXJhbWV0ZXJzLmluaXRpYWxQcm9wcyxcbiAgICAgIGFwcFBhcmFtZXRlcnMucm9vdFRhZyxcbiAgICAgIHdyYXBwZXJDb21wb25lbnRQcm92aWRlciAmJiB3cmFwcGVyQ29tcG9uZW50UHJvdmlkZXIoYXBwUGFyYW1ldGVycyksXG4gICAgICByb290Vmlld1N0eWxlUHJvdmlkZXIgJiYgcm9vdFZpZXdTdHlsZVByb3ZpZGVyKGFwcFBhcmFtZXRlcnMpLFxuICAgICAgYXBwUGFyYW1ldGVycy5mYWJyaWMsXG4gICAgICBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlcixcbiAgICAgIGFwcEtleSA9PT0gJ0xvZ0JveCcsIC8vIGlzIGxvZ2JveFxuICAgICAgYXBwS2V5LFxuICAgICAgZGlzcGxheU1vZGUsXG4gICAgKTtcbiAgfTtcbiAgaWYgKHNlY3Rpb24pIHtcbiAgICBzZWN0aW9uc1thcHBLZXldID0gcnVubmFibGVzW2FwcEtleV07XG4gIH1cbiAgcmV0dXJuIGFwcEtleTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUnVubmFibGUoYXBwS2V5OiBzdHJpbmcsIHJ1bjogUnVubmFibGUpOiBzdHJpbmcge1xuICBydW5uYWJsZXNbYXBwS2V5XSA9IHJ1bjtcbiAgcmV0dXJuIGFwcEtleTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2VjdGlvbihcbiAgYXBwS2V5OiBzdHJpbmcsXG4gIGNvbXBvbmVudDogQ29tcG9uZW50UHJvdmlkZXIsXG4pOiB2b2lkIHtcbiAgcmVnaXN0ZXJDb21wb25lbnQoYXBwS2V5LCBjb21wb25lbnQsIHRydWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwS2V5cygpOiAkUmVhZE9ubHlBcnJheTxzdHJpbmc+IHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHJ1bm5hYmxlcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWN0aW9uS2V5cygpOiAkUmVhZE9ubHlBcnJheTxzdHJpbmc+IHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHNlY3Rpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlY3Rpb25zKCk6IFJ1bm5hYmxlcyB7XG4gIHJldHVybiB7XG4gICAgLi4uc2VjdGlvbnMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSdW5uYWJsZShhcHBLZXk6IHN0cmluZyk6ID9SdW5uYWJsZSB7XG4gIHJldHVybiBydW5uYWJsZXNbYXBwS2V5XTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZ2lzdHJ5KCk6IFJlZ2lzdHJ5IHtcbiAgcmV0dXJuIHtcbiAgICBzZWN0aW9uczogZ2V0U2VjdGlvbktleXMoKSxcbiAgICBydW5uYWJsZXM6IHsuLi5ydW5uYWJsZXN9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rKFxuICBob29rOiBDb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2ssXG4pIHtcbiAgY29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rID0gaG9vaztcbn1cblxuLyoqXG4gKiBMb2FkcyB0aGUgSmF2YVNjcmlwdCBidW5kbGUgYW5kIHJ1bnMgdGhlIGFwcC5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNydW5hcHBsaWNhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gcnVuQXBwbGljYXRpb24oXG4gIGFwcEtleTogc3RyaW5nLFxuICBhcHBQYXJhbWV0ZXJzOiBBcHBQYXJhbWV0ZXJzLFxuICBkaXNwbGF5TW9kZT86IG51bWJlcixcbik6IHZvaWQge1xuICBpZiAoYXBwS2V5ICE9PSAnTG9nQm94Jykge1xuICAgIGNvbnN0IGxvZ1BhcmFtcyA9IF9fREVWX18gPyBgIHdpdGggJHtKU09OLnN0cmluZ2lmeShhcHBQYXJhbWV0ZXJzKX1gIDogJyc7XG4gICAgY29uc3QgbXNnID0gYFJ1bm5pbmcgXCIke2FwcEtleX1cIiR7bG9nUGFyYW1zfWA7XG4gICAgY29uc29sZS5sb2cobXNnKTtcbiAgfVxuICBpbnZhcmlhbnQoXG4gICAgcnVubmFibGVzW2FwcEtleV0sXG4gICAgYFwiJHthcHBLZXl9XCIgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuIFRoaXMgY2FuIGhhcHBlbiBpZjpcXG5gICtcbiAgICAgICcqIE1ldHJvICh0aGUgbG9jYWwgZGV2IHNlcnZlcikgaXMgcnVuIGZyb20gdGhlIHdyb25nIGZvbGRlci4gJyArXG4gICAgICAnQ2hlY2sgaWYgTWV0cm8gaXMgcnVubmluZywgc3RvcCBpdCBhbmQgcmVzdGFydCBpdCBpbiB0aGUgY3VycmVudCBwcm9qZWN0LlxcbicgK1xuICAgICAgXCIqIEEgbW9kdWxlIGZhaWxlZCB0byBsb2FkIGR1ZSB0byBhbiBlcnJvciBhbmQgYEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50YCB3YXNuJ3QgY2FsbGVkLlwiLFxuICApO1xuXG4gIFNjZW5lVHJhY2tlci5zZXRBY3RpdmVTY2VuZSh7bmFtZTogYXBwS2V5fSk7XG4gIHJ1bm5hYmxlc1thcHBLZXldKGFwcFBhcmFtZXRlcnMsIGNvZXJjZURpc3BsYXlNb2RlKGRpc3BsYXlNb2RlKSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGluaXRpYWwgcHJvcHMgZm9yIGEgc3VyZmFjZSB0aGF0J3MgYWxyZWFkeSByZW5kZXJlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U3VyZmFjZVByb3BzKFxuICBhcHBLZXk6IHN0cmluZyxcbiAgYXBwUGFyYW1ldGVyczogT2JqZWN0LFxuICBkaXNwbGF5TW9kZT86IG51bWJlcixcbik6IHZvaWQge1xuICBpZiAoYXBwS2V5ICE9PSAnTG9nQm94Jykge1xuICAgIGNvbnN0IG1zZyA9XG4gICAgICAnVXBkYXRpbmcgcHJvcHMgZm9yIFN1cmZhY2UgXCInICtcbiAgICAgIGFwcEtleSArXG4gICAgICAnXCIgd2l0aCAnICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KGFwcFBhcmFtZXRlcnMpO1xuICAgIGNvbnNvbGUubG9nKG1zZyk7XG4gIH1cbiAgaW52YXJpYW50KFxuICAgIHJ1bm5hYmxlc1thcHBLZXldLFxuICAgIGBcIiR7YXBwS2V5fVwiIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLiBUaGlzIGNhbiBoYXBwZW4gaWY6XFxuYCArXG4gICAgICAnKiBNZXRybyAodGhlIGxvY2FsIGRldiBzZXJ2ZXIpIGlzIHJ1biBmcm9tIHRoZSB3cm9uZyBmb2xkZXIuICcgK1xuICAgICAgJ0NoZWNrIGlmIE1ldHJvIGlzIHJ1bm5pbmcsIHN0b3AgaXQgYW5kIHJlc3RhcnQgaXQgaW4gdGhlIGN1cnJlbnQgcHJvamVjdC5cXG4nICtcbiAgICAgIFwiKiBBIG1vZHVsZSBmYWlsZWQgdG8gbG9hZCBkdWUgdG8gYW4gZXJyb3IgYW5kIGBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudGAgd2Fzbid0IGNhbGxlZC5cIixcbiAgKTtcblxuICBydW5uYWJsZXNbYXBwS2V5XShhcHBQYXJhbWV0ZXJzLCBjb2VyY2VEaXNwbGF5TW9kZShkaXNwbGF5TW9kZSkpO1xufVxuXG4vKipcbiAqIFN0b3BzIGFuIGFwcGxpY2F0aW9uIHdoZW4gYSB2aWV3IHNob3VsZCBiZSBkZXN0cm95ZWQuXG4gKlxuICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjdW5tb3VudGFwcGxpY2F0aW9uY29tcG9uZW50YXRyb290dGFnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bm1vdW50QXBwbGljYXRpb25Db21wb25lbnRBdFJvb3RUYWcocm9vdFRhZzogUm9vdFRhZyk6IHZvaWQge1xuICB1bm1vdW50Q29tcG9uZW50QXROb2RlQW5kUmVtb3ZlQ29udGFpbmVyKHJvb3RUYWcpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVyIGEgaGVhZGxlc3MgdGFzay4gQSBoZWFkbGVzcyB0YXNrIGlzIGEgYml0IG9mIGNvZGUgdGhhdCBydW5zIHdpdGhvdXQgYSBVSS5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNyZWdpc3RlcmhlYWRsZXNzdGFza1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJIZWFkbGVzc1Rhc2soXG4gIHRhc2tLZXk6IHN0cmluZyxcbiAgdGFza1Byb3ZpZGVyOiBUYXNrUHJvdmlkZXIsXG4pOiB2b2lkIHtcbiAgLy8gJEZsb3dGaXhNZVtvYmplY3QtdGhpcy1yZWZlcmVuY2VdXG4gIHJlZ2lzdGVyQ2FuY2VsbGFibGVIZWFkbGVzc1Rhc2sodGFza0tleSwgdGFza1Byb3ZpZGVyLCAoKSA9PiAoKSA9PiB7XG4gICAgLyogQ2FuY2VsIGlzIG5vLW9wICovXG4gIH0pO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVyIGEgY2FuY2VsbGFibGUgaGVhZGxlc3MgdGFzay4gQSBoZWFkbGVzcyB0YXNrIGlzIGEgYml0IG9mIGNvZGUgdGhhdCBydW5zIHdpdGhvdXQgYSBVSS5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNyZWdpc3RlcmNhbmNlbGxhYmxlaGVhZGxlc3N0YXNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNhbmNlbGxhYmxlSGVhZGxlc3NUYXNrKFxuICB0YXNrS2V5OiBzdHJpbmcsXG4gIHRhc2tQcm92aWRlcjogVGFza1Byb3ZpZGVyLFxuICB0YXNrQ2FuY2VsUHJvdmlkZXI6IFRhc2tDYW5jZWxQcm92aWRlcixcbik6IHZvaWQge1xuICBpZiAodGFza1Byb3ZpZGVycy5oYXModGFza0tleSkpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgcmVnaXN0ZXJIZWFkbGVzc1Rhc2sgb3IgcmVnaXN0ZXJDYW5jZWxsYWJsZUhlYWRsZXNzVGFzayBjYWxsZWQgbXVsdGlwbGUgdGltZXMgZm9yIHNhbWUga2V5ICcke3Rhc2tLZXl9J2AsXG4gICAgKTtcbiAgfVxuICB0YXNrUHJvdmlkZXJzLnNldCh0YXNrS2V5LCB0YXNrUHJvdmlkZXIpO1xuICB0YXNrQ2FuY2VsUHJvdmlkZXJzLnNldCh0YXNrS2V5LCB0YXNrQ2FuY2VsUHJvdmlkZXIpO1xufVxuXG4vKipcbiAqIE9ubHkgY2FsbGVkIGZyb20gbmF0aXZlIGNvZGUuIFN0YXJ0cyBhIGhlYWRsZXNzIHRhc2suXG4gKlxuICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjc3RhcnRoZWFkbGVzc3Rhc2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0SGVhZGxlc3NUYXNrKFxuICB0YXNrSWQ6IG51bWJlcixcbiAgdGFza0tleTogc3RyaW5nLFxuICBkYXRhOiBhbnksXG4pOiB2b2lkIHtcbiAgY29uc3QgdGFza1Byb3ZpZGVyID0gdGFza1Byb3ZpZGVycy5nZXQodGFza0tleSk7XG4gIGlmICghdGFza1Byb3ZpZGVyKSB7XG4gICAgY29uc29sZS53YXJuKGBObyB0YXNrIHJlZ2lzdGVyZWQgZm9yIGtleSAke3Rhc2tLZXl9YCk7XG4gICAgaWYgKE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCkge1xuICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tGaW5pc2hlZCh0YXNrSWQpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgdGFza1Byb3ZpZGVyKCkoZGF0YSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBpZiAoTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0KSB7XG4gICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydC5ub3RpZnlUYXNrRmluaXNoZWQodGFza0lkKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pO1xuXG4gICAgICBpZiAoXG4gICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCAmJlxuICAgICAgICByZWFzb24gaW5zdGFuY2VvZiBIZWFkbGVzc0pzVGFza0Vycm9yXG4gICAgICApIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVt1bnVzZWQtcHJvbWlzZV1cbiAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tSZXRyeSh0YXNrSWQpLnRoZW4oXG4gICAgICAgICAgcmV0cnlQb3N0ZWQgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXRyeVBvc3RlZCkge1xuICAgICAgICAgICAgICBOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQubm90aWZ5VGFza0ZpbmlzaGVkKHRhc2tJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBPbmx5IGNhbGxlZCBmcm9tIG5hdGl2ZSBjb2RlLiBDYW5jZWxzIGEgaGVhZGxlc3MgdGFzay5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNjYW5jZWxoZWFkbGVzc3Rhc2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbmNlbEhlYWRsZXNzVGFzayh0YXNrSWQ6IG51bWJlciwgdGFza0tleTogc3RyaW5nKTogdm9pZCB7XG4gIGNvbnN0IHRhc2tDYW5jZWxQcm92aWRlciA9IHRhc2tDYW5jZWxQcm92aWRlcnMuZ2V0KHRhc2tLZXkpO1xuICBpZiAoIXRhc2tDYW5jZWxQcm92aWRlcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgTm8gdGFzayBjYW5jZWxsZXIgcmVnaXN0ZXJlZCBmb3Iga2V5ICcke3Rhc2tLZXl9J2ApO1xuICB9XG4gIHRhc2tDYW5jZWxQcm92aWRlcigpKCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0JBLElBQUFBLHdCQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxvQkFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksNEJBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLGtCQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTSxjQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxV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