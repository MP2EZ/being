{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_colors","_jsxRuntime","FocusContext","createContext","undefined","useFocusManager","exports","context","useContext","Error","FocusProvider","_ref","children","_ref$trapFocus","trapFocus","_ref$restoreFocus","restoreFocus","_ref$announceChanges","announceChanges","_useState","useState","Map","_useState2","_slicedToArray2","default","focusableElements","_useState3","_useState4","focusOrder","setFocusOrder","_useState5","_useState6","currentFocusIndex","setCurrentFocusIndex","_useState7","_useState8","isTrapped","setIsTrapped","_useState9","_useState0","previousFocus","setPreviousFocus","trapContainerRef","useRef","registerFocusable","useCallback","id","ref","priority","arguments","length","set","sortedIds","Array","from","entries","sort","_ref2","_ref3","_ref4","a","_ref5","b","map","_ref6","_ref7","unregisterFocusable","delete","prev","filter","focusId","focusNext","nextIndex","nextId","element","get","focus","AccessibilityInfo","announceForAccessibility","focusPrevious","prevIndex","prevId","focusFirst","firstId","focusLast","lastIndex","lastId","setFocus","index","indexOf","trapFocusInContainer","containerRef","currentFocusId","current","setTimeout","releaseFocus","useEffect","contextValue","jsx","Provider","value","Focusable","_ref8","_ref8$priority","_ref8$disabled","disabled","onFocus","onBlur","_ref8$skipLink","skipLink","skipLinkText","style","testID","elementRef","_useState1","_useState10","isFocused","setIsFocused","_useFocusManager","currentlyFocused","handleFocus","handleBlur","View","styles","focusIndicator","accessible","accessibilityLabel","SkipLink","_ref9","targetId","text","_ref9$position","position","_useFocusManager2","_useState11","_useState12","isVisible","setIsVisible","handleSkip","positionStyles","top","spacing","sm","left","transform","translateX","right","skipLinkContainer","skipLinkVisible","skipLinkButton","accessibilityRole","onTouchEnd","StyleSheet","create","borderWidth","borderColor","colorSystem","accessibility","primary","borderRadius","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","scale","zIndex","opacity","translateY","backgroundColor","color","base","white","padding","minHeight","minWidth","justifyContent","alignItems","_default"],"sources":["FocusManager.tsx"],"sourcesContent":["/**\n * FocusManager Component - WCAG AA Compliant Focus Management\n * \n * ACCESSIBILITY SPECIFICATIONS:\n * - Logical tab order and focus flow management\n * - Visible focus indicators with 4.5:1 contrast ratio minimum\n * - Focus restoration and persistence\n * - Skip links for complex navigation\n * - Screen reader announcements for focus changes\n * - Keyboard trap management for modals/overlays\n */\n\nimport React, { useCallback, useEffect, useRef, useState, createContext, useContext } from 'react';\nimport {\n  View,\n  StyleSheet,\n  AccessibilityInfo,\n  Platform,\n  Dimensions,\n} from 'react-native';\nimport { colorSystem, spacing } from '../../constants/colors';\n\n// Focus management context\ninterface FocusContextValue {\n  focusOrder: string[];\n  currentFocusIndex: number;\n  registerFocusable: (id: string, ref: any, priority?: number) => void;\n  unregisterFocusable: (id: string) => void;\n  focusNext: () => void;\n  focusPrevious: () => void;\n  focusFirst: () => void;\n  focusLast: () => void;\n  setFocus: (id: string) => void;\n  isTrapped: boolean;\n  trapFocus: (containerRef: any) => void;\n  releaseFocus: () => void;\n}\n\nconst FocusContext = createContext<FocusContextValue | undefined>(undefined);\n\n// Hook to use focus context\nexport const useFocusManager = () => {\n  const context = useContext(FocusContext);\n  if (!context) {\n    throw new Error('useFocusManager must be used within a FocusProvider');\n  }\n  return context;\n};\n\n// Focus provider component\ninterface FocusProviderProps {\n  children: React.ReactNode;\n  trapFocus?: boolean;\n  restoreFocus?: boolean;\n  announceChanges?: boolean;\n}\n\nexport const FocusProvider: React.FC<FocusProviderProps> = ({\n  children,\n  trapFocus = false,\n  restoreFocus = true,\n  announceChanges = true,\n}) => {\n  const [focusableElements] = useState(new Map<string, { ref: any; priority: number }>());\n  const [focusOrder, setFocusOrder] = useState<string[]>([]);\n  const [currentFocusIndex, setCurrentFocusIndex] = useState(-1);\n  const [isTrapped, setIsTrapped] = useState(false);\n  const [previousFocus, setPreviousFocus] = useState<string | null>(null);\n  const trapContainerRef = useRef<any>(null);\n\n  // Register a focusable element\n  const registerFocusable = useCallback((id: string, ref: any, priority: number = 0) => {\n    focusableElements.set(id, { ref, priority });\n    \n    // Update focus order based on priority\n    const sortedIds = Array.from(focusableElements.entries())\n      .sort(([, a], [, b]) => a.priority - b.priority)\n      .map(([id]) => id);\n    \n    setFocusOrder(sortedIds);\n  }, [focusableElements]);\n\n  // Unregister a focusable element\n  const unregisterFocusable = useCallback((id: string) => {\n    focusableElements.delete(id);\n    setFocusOrder(prev => prev.filter(focusId => focusId !== id));\n  }, [focusableElements]);\n\n  // Focus navigation methods\n  const focusNext = useCallback(() => {\n    if (focusOrder.length === 0) return;\n    \n    const nextIndex = (currentFocusIndex + 1) % focusOrder.length;\n    const nextId = focusOrder[nextIndex];\n    const element = focusableElements.get(nextId);\n    \n    if (element?.ref) {\n      setCurrentFocusIndex(nextIndex);\n      element.ref.focus?.();\n      \n      if (announceChanges) {\n        AccessibilityInfo.announceForAccessibility(`Focused ${nextId}`);\n      }\n    }\n  }, [focusOrder, currentFocusIndex, focusableElements, announceChanges]);\n\n  const focusPrevious = useCallback(() => {\n    if (focusOrder.length === 0) return;\n    \n    const prevIndex = currentFocusIndex === 0 ? focusOrder.length - 1 : currentFocusIndex - 1;\n    const prevId = focusOrder[prevIndex];\n    const element = focusableElements.get(prevId);\n    \n    if (element?.ref) {\n      setCurrentFocusIndex(prevIndex);\n      element.ref.focus?.();\n      \n      if (announceChanges) {\n        AccessibilityInfo.announceForAccessibility(`Focused ${prevId}`);\n      }\n    }\n  }, [focusOrder, currentFocusIndex, focusableElements, announceChanges]);\n\n  const focusFirst = useCallback(() => {\n    if (focusOrder.length === 0) return;\n    \n    const firstId = focusOrder[0];\n    const element = focusableElements.get(firstId);\n    \n    if (element?.ref) {\n      setCurrentFocusIndex(0);\n      element.ref.focus?.();\n      \n      if (announceChanges) {\n        AccessibilityInfo.announceForAccessibility(`Focused first element: ${firstId}`);\n      }\n    }\n  }, [focusOrder, focusableElements, announceChanges]);\n\n  const focusLast = useCallback(() => {\n    if (focusOrder.length === 0) return;\n    \n    const lastIndex = focusOrder.length - 1;\n    const lastId = focusOrder[lastIndex];\n    const element = focusableElements.get(lastId);\n    \n    if (element?.ref) {\n      setCurrentFocusIndex(lastIndex);\n      element.ref.focus?.();\n      \n      if (announceChanges) {\n        AccessibilityInfo.announceForAccessibility(`Focused last element: ${lastId}`);\n      }\n    }\n  }, [focusOrder, focusableElements, announceChanges]);\n\n  const setFocus = useCallback((id: string) => {\n    const index = focusOrder.indexOf(id);\n    const element = focusableElements.get(id);\n    \n    if (index !== -1 && element?.ref) {\n      setCurrentFocusIndex(index);\n      element.ref.focus?.();\n      \n      if (announceChanges) {\n        AccessibilityInfo.announceForAccessibility(`Focused ${id}`);\n      }\n    }\n  }, [focusOrder, focusableElements, announceChanges]);\n\n  // Focus trapping for modals/overlays\n  const trapFocusInContainer = useCallback((containerRef: any) => {\n    if (restoreFocus && !previousFocus) {\n      const currentFocusId = focusOrder[currentFocusIndex];\n      setPreviousFocus(currentFocusId);\n    }\n    \n    trapContainerRef.current = containerRef;\n    setIsTrapped(true);\n    \n    // Focus first element in trap\n    setTimeout(() => focusFirst(), 100);\n  }, [restoreFocus, previousFocus, focusOrder, currentFocusIndex, focusFirst]);\n\n  const releaseFocus = useCallback(() => {\n    setIsTrapped(false);\n    trapContainerRef.current = null;\n    \n    // Restore previous focus if enabled\n    if (restoreFocus && previousFocus) {\n      setTimeout(() => setFocus(previousFocus), 100);\n      setPreviousFocus(null);\n    }\n  }, [restoreFocus, previousFocus, setFocus]);\n\n  // Auto-trap focus if enabled\n  useEffect(() => {\n    if (trapFocus && focusOrder.length > 0) {\n      setIsTrapped(true);\n      setTimeout(() => focusFirst(), 100);\n    }\n  }, [trapFocus, focusOrder.length, focusFirst]);\n\n  const contextValue: FocusContextValue = {\n    focusOrder,\n    currentFocusIndex,\n    registerFocusable,\n    unregisterFocusable,\n    focusNext,\n    focusPrevious,\n    focusFirst,\n    focusLast,\n    setFocus,\n    isTrapped,\n    trapFocus: trapFocusInContainer,\n    releaseFocus,\n  };\n\n  return (\n    <FocusContext.Provider value={contextValue}>\n      {children}\n    </FocusContext.Provider>\n  );\n};\n\n// Focusable wrapper component with visible focus indicators\ninterface FocusableProps {\n  children: React.ReactNode;\n  id: string;\n  priority?: number;\n  disabled?: boolean;\n  onFocus?: () => void;\n  onBlur?: () => void;\n  skipLink?: boolean;\n  skipLinkText?: string;\n  style?: any;\n  testID?: string;\n}\n\nexport const Focusable: React.FC<FocusableProps> = ({\n  children,\n  id,\n  priority = 0,\n  disabled = false,\n  onFocus,\n  onBlur,\n  skipLink = false,\n  skipLinkText,\n  style,\n  testID,\n}) => {\n  const elementRef = useRef<View>(null);\n  const [isFocused, setIsFocused] = useState(false);\n  const { registerFocusable, unregisterFocusable, currentFocusIndex, focusOrder } = useFocusManager();\n\n  // Register/unregister with focus manager\n  useEffect(() => {\n    if (!disabled) {\n      registerFocusable(id, elementRef.current, priority);\n    }\n    \n    return () => unregisterFocusable(id);\n  }, [id, priority, disabled, registerFocusable, unregisterFocusable]);\n\n  // Track focus state\n  const currentlyFocused = focusOrder[currentFocusIndex] === id;\n\n  const handleFocus = useCallback(() => {\n    setIsFocused(true);\n    onFocus?.();\n  }, [onFocus]);\n\n  const handleBlur = useCallback(() => {\n    setIsFocused(false);\n    onBlur?.();\n  }, [onBlur]);\n\n  if (disabled) {\n    return <View style={style}>{children}</View>;\n  }\n\n  return (\n    <View\n      ref={elementRef}\n      style={[\n        style,\n        (isFocused || currentlyFocused) && styles.focusIndicator,\n        skipLink && styles.skipLink,\n      ]}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      accessible={true}\n      accessibilityLabel={skipLink ? skipLinkText || `Skip to ${id}` : undefined}\n      testID={testID || `focusable-${id}`}\n    >\n      {children}\n    </View>\n  );\n};\n\n// Skip link component for navigation\ninterface SkipLinkProps {\n  targetId: string;\n  text: string;\n  position?: 'top-left' | 'top-center' | 'top-right';\n}\n\nexport const SkipLink: React.FC<SkipLinkProps> = ({\n  targetId,\n  text,\n  position = 'top-left',\n}) => {\n  const { setFocus } = useFocusManager();\n  const [isVisible, setIsVisible] = useState(false);\n\n  const handleSkip = useCallback(() => {\n    setFocus(targetId);\n    setIsVisible(false);\n  }, [setFocus, targetId]);\n\n  const positionStyles = {\n    'top-left': { top: spacing.sm, left: spacing.sm },\n    'top-center': { top: spacing.sm, left: '50%', transform: [{ translateX: -50 }] },\n    'top-right': { top: spacing.sm, right: spacing.sm },\n  };\n\n  return (\n    <Focusable\n      id={`skip-link-${targetId}`}\n      priority={-100} // High priority for skip links\n      onFocus={() => setIsVisible(true)}\n      onBlur={() => setIsVisible(false)}\n      style={[\n        styles.skipLinkContainer,\n        positionStyles[position],\n        isVisible && styles.skipLinkVisible,\n      ]}\n      testID={`skip-link-${targetId}`}\n    >\n      <View\n        style={styles.skipLinkButton}\n        accessibilityRole=\"button\"\n        accessibilityLabel={text}\n        onTouchEnd={handleSkip}\n      >\n        {/* Skip link content would be rendered here */}\n      </View>\n    </Focusable>\n  );\n};\n\nconst styles = StyleSheet.create({\n  // Focus indicator with WCAG compliant contrast\n  focusIndicator: {\n    borderWidth: 3,\n    borderColor: colorSystem.accessibility.focus.primary,\n    borderRadius: 4,\n    shadowColor: colorSystem.accessibility.focus.primary,\n    shadowOffset: { width: 0, height: 0 },\n    shadowOpacity: 0.3,\n    shadowRadius: 6,\n    elevation: 8,\n    // Additional visual emphasis\n    transform: [{ scale: 1.02 }],\n  },\n  \n  // Skip link styling\n  skipLink: {\n    position: 'absolute',\n    zIndex: 9999,\n  },\n  skipLinkContainer: {\n    position: 'absolute',\n    zIndex: 9999,\n    opacity: 0,\n    transform: [{ translateY: -50 }],\n    // Hidden by default, shown on focus\n  },\n  skipLinkVisible: {\n    opacity: 1,\n    transform: [{ translateY: 0 }],\n  },\n  skipLinkButton: {\n    backgroundColor: colorSystem.accessibility.focus.primary,\n    color: colorSystem.base.white,\n    padding: spacing.sm,\n    borderRadius: 4,\n    minHeight: 44, // WCAG touch target\n    minWidth: 44,\n    justifyContent: 'center',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 4,\n    elevation: 6,\n  },\n});\n\nexport default FocusProvider;"],"mappings":"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","ignoreList":[]}