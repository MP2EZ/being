aaaca5949b657f317da340847c3e593c
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useScrollToTop = useScrollToTop;
var _core = require("@react-navigation/core");
var React = _interopRequireWildcard(require("react"));
function getScrollableNode(ref) {
  if (ref.current == null) {
    return null;
  }
  if ('scrollToTop' in ref.current || 'scrollTo' in ref.current || 'scrollToOffset' in ref.current || 'scrollResponderScrollTo' in ref.current) {
    return ref.current;
  } else if ('getScrollResponder' in ref.current) {
    return ref.current.getScrollResponder();
  } else if ('getNode' in ref.current) {
    return ref.current.getNode();
  } else {
    return ref.current;
  }
}
function useScrollToTop(ref) {
  var navigation = React.useContext(_core.NavigationContext);
  var route = (0, _core.useRoute)();
  if (navigation === undefined) {
    throw new Error("Couldn't find a navigation object. Is your component inside NavigationContainer?");
  }
  React.useEffect(function () {
    var tabNavigations = [];
    var currentNavigation = navigation;
    while (currentNavigation) {
      if (currentNavigation.getState().type === 'tab') {
        tabNavigations.push(currentNavigation);
      }
      currentNavigation = currentNavigation.getParent();
    }
    if (tabNavigations.length === 0) {
      return;
    }
    var unsubscribers = tabNavigations.map(function (tab) {
      return tab.addListener('tabPress', function (e) {
        var isFocused = navigation.isFocused();
        var isFirst = tabNavigations.includes(navigation) || navigation.getState().routes[0].key === route.key;
        requestAnimationFrame(function () {
          var scrollable = getScrollableNode(ref);
          if (isFocused && isFirst && scrollable && !e.defaultPrevented) {
            if ('scrollToTop' in scrollable) {
              scrollable.scrollToTop();
            } else if ('scrollTo' in scrollable) {
              scrollable.scrollTo({
                y: 0,
                animated: true
              });
            } else if ('scrollToOffset' in scrollable) {
              scrollable.scrollToOffset({
                offset: 0,
                animated: true
              });
            } else if ('scrollResponderScrollTo' in scrollable) {
              scrollable.scrollResponderScrollTo({
                y: 0,
                animated: true
              });
            }
          }
        });
      });
    });
    return function () {
      unsubscribers.forEach(function (unsubscribe) {
        return unsubscribe();
      });
    };
  }, [navigation, ref, route.key]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29yZSIsInJlcXVpcmUiLCJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiZ2V0U2Nyb2xsYWJsZU5vZGUiLCJyZWYiLCJjdXJyZW50IiwiZ2V0U2Nyb2xsUmVzcG9uZGVyIiwiZ2V0Tm9kZSIsInVzZVNjcm9sbFRvVG9wIiwibmF2aWdhdGlvbiIsInVzZUNvbnRleHQiLCJOYXZpZ2F0aW9uQ29udGV4dCIsInJvdXRlIiwidXNlUm91dGUiLCJ1bmRlZmluZWQiLCJFcnJvciIsInVzZUVmZmVjdCIsInRhYk5hdmlnYXRpb25zIiwiY3VycmVudE5hdmlnYXRpb24iLCJnZXRTdGF0ZSIsInR5cGUiLCJwdXNoIiwiZ2V0UGFyZW50IiwibGVuZ3RoIiwidW5zdWJzY3JpYmVycyIsIm1hcCIsInRhYiIsImFkZExpc3RlbmVyIiwiZSIsImlzRm9jdXNlZCIsImlzRmlyc3QiLCJpbmNsdWRlcyIsInJvdXRlcyIsImtleSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNjcm9sbGFibGUiLCJkZWZhdWx0UHJldmVudGVkIiwic2Nyb2xsVG9Ub3AiLCJzY3JvbGxUbyIsInkiLCJhbmltYXRlZCIsInNjcm9sbFRvT2Zmc2V0Iiwib2Zmc2V0Iiwic2Nyb2xsUmVzcG9uZGVyU2Nyb2xsVG8iLCJmb3JFYWNoIiwidW5zdWJzY3JpYmUiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdXNlU2Nyb2xsVG9Ub3AudHN4Il0sInNvdXJjZXNDb250ZW50IjpbbnVsbF0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsS0FBQSxHQUFBQyxPQUFBO0FBT0EsSUFBQUMsS0FBQSxHQUFBQyx1QkFBQSxDQUFBRixPQUFBO0FBaUJBLFNBQVNHLGlCQUFpQkEsQ0FBQ0MsR0FBdUMsRUFBRTtFQUNsRSxJQUFJQSxHQUFHLENBQUNDLE9BQU8sSUFBSSxJQUFJLEVBQUU7SUFDdkIsT0FBTyxJQUFJO0VBQ2I7RUFFQSxJQUNFLGFBQWEsSUFBSUQsR0FBRyxDQUFDQyxPQUFPLElBQzVC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