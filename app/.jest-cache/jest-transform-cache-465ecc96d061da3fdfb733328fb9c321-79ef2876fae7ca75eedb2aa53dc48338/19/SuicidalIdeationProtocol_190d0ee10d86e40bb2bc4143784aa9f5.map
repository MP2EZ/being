{"version":3,"names":["_reactNative","require","_asyncStorage","_interopRequireDefault","SecureStore","_interopRequireWildcard","SUICIDAL_IDEATION_CONFIG","exports","QUESTION_ID","TRIGGER_THRESHOLD","MAX_DETECTION_TIME_MS","MAX_INTERVENTION_TIME_MS","MIN_INTERVENTION_DURATION_MS","MANDATORY_FOLLOWUP_DURATION_MS","SUICIDAL_IDEATION_RESPONSES","SuicidalIdeationProtocol","_classCallCheck2","default","activeInterventions","Map","detectionMetrics","_createClass2","key","value","_detectSuicidalIdeation","_asyncToGenerator2","questionId","response","userId","assessmentId","totalScore","detectionStartTime","performance","now","detection","createSuicidalIdeationDetection","validateDetectionTiming","triggerImmediateIntervention","logSuicidalIdeationDetection","recordDetectionMetrics","error","console","emergencyFailsafeIntervention","detectSuicidalIdeation","_x","_x2","_x3","_x4","_x5","apply","arguments","_triggerImmediateIntervention","interventionStartTime","intervention","createSuicidalIdeationIntervention","set","id","displayEmergencySuicidalIdeationAlert","logSuicidalIdeationIntervention","scheduleMandatoryFollowUp","_x6","_requireSafetyAcknowledgment","interventionId","_this","get","currentTime","Date","interventionDuration","startTimestamp","Alert","alert","Math","ceil","text","style","Promise","resolve","onPress","recordSafetyAction","Linking","openURL","completeSafetyAcknowledgment","cancelable","requireSafetyAcknowledgment","_x7","_displayEmergencySuicidalIdeationAlert","_this2","severityText","getSeverityText","severity","urgencyMessage","getUrgencyMessage","_x8","startTime","determineSeverity","riskLevel","determineRiskLevel","random","toString","substr","detectionTimestamp","detectionResponseTimeMs","context","timeOfDay","getTimeOfDay","dayOfWeek","getDay","questionText","responseText","responseTimeMs","status","actionsTaken","safetyCommitment","dismissible","dismissalAvailableAt","followUp","required","urgency","scheduledWithin","contactAttempts","completed","Error","action","push","type","timestamp","successful","_completeSafetyAcknowledgment","commitment","followUpAgreed","logSafetyAcknowledgment","_x9","warn","maxTime","_emergencyFailsafeIntervention","AsyncStorage","setItem","JSON","stringify","reason","_x0","_x1","_scheduleMandatoryFollowUp","followUpSchedule","scheduledAt","attempts","maxAttempts","setItemAsync","_x10","_logSuicidalIdeationDetection","auditEntry","clinicalNote","immediateAction","source","_x11","_logSuicidalIdeationIntervention","mandatoryFollowUp","_x12","_logSafetyAcknowledgment","_x13","hour","getHours","getActiveInterventions","Array","from","values","getDetectionMetrics","Object","fromEntries","_clearCompletedInterventions","_ref","entries","_ref2","_slicedToArray2","delete","clearCompletedInterventions","getInstance","instance","_default"],"sources":["SuicidalIdeationProtocol.ts"],"sourcesContent":["/**\n * SUICIDAL IDEATION DETECTION PROTOCOL - DRD-FLOW-005\n *\n * CRITICAL SAFETY REQUIREMENTS:\n * - PHQ-9 Question 9 ANY response >0 = IMMEDIATE INTERVENTION\n * - Real-time detection during assessment (<50ms)\n * - Immediate crisis alert display (<200ms)\n * - Direct 988 access within 3 taps\n * - Cannot be dismissed without safety acknowledgment\n * - Mandatory clinical follow-up tracking\n *\n * REGULATORY COMPLIANCE:\n * - Follows 988 Suicide & Crisis Lifeline protocols\n * - Meets clinical standard of care requirements\n * - Encrypted audit trail for legal/clinical review\n * - Performance monitoring for quality assurance\n *\n * PHQ-9 Question 9: \"Thoughts that you would be better off dead,\n * or of hurting yourself in some way\"\n * - 0: Not at all\n * - 1: Several days  â†’ CRISIS\n * - 2: More than half the days â†’ CRISIS\n * - 3: Nearly every day â†’ CRISIS\n */\n\nimport { Alert, Linking } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport * as SecureStore from 'expo-secure-store';\nimport type {\n  CrisisDetection,\n  CrisisIntervention,\n  AssessmentAnswer\n} from '../flows/assessment/types';\n\n/**\n * SUICIDAL IDEATION CONSTANTS\n */\nexport const SUICIDAL_IDEATION_CONFIG = {\n  /** PHQ-9 Question 9 ID */\n  QUESTION_ID: 'phq9_9',\n  /** Any response above this triggers crisis */\n  TRIGGER_THRESHOLD: 0,\n  /** Maximum detection time (ms) */\n  MAX_DETECTION_TIME_MS: 50,\n  /** Maximum intervention display time (ms) */\n  MAX_INTERVENTION_TIME_MS: 200,\n  /** Minimum intervention duration before any dismissal option */\n  MIN_INTERVENTION_DURATION_MS: 60000, // 60 seconds\n  /** Follow-up requirement duration (24 hours) */\n  MANDATORY_FOLLOWUP_DURATION_MS: 24 * 60 * 60 * 1000,\n} as const;\n\n/**\n * SUICIDAL IDEATION SEVERITY LEVELS\n * Based on PHQ-9 Q9 response frequency\n */\nexport type SuicidalIdeationSeverity =\n  | 'several_days'        // Response = 1\n  | 'more_than_half'      // Response = 2\n  | 'nearly_every_day';   // Response = 3\n\n/**\n * SUICIDAL IDEATION RESPONSE LABELS\n * Exact PHQ-9 clinical language\n */\nexport const SUICIDAL_IDEATION_RESPONSES = {\n  0: \"Not at all\",\n  1: \"Several days\",\n  2: \"More than half the days\",\n  3: \"Nearly every day\"\n} as const;\n\n/**\n * SUICIDAL IDEATION DETECTION PROTOCOL\n * Real-time monitoring and immediate intervention\n */\nexport class SuicidalIdeationProtocol {\n  private static instance: SuicidalIdeationProtocol;\n  private activeInterventions: Map<string, SuicidalIdeationIntervention> = new Map();\n  private detectionMetrics: Map<string, number> = new Map();\n\n  private constructor() {}\n\n  public static getInstance(): SuicidalIdeationProtocol {\n    if (!SuicidalIdeationProtocol.instance) {\n      SuicidalIdeationProtocol.instance = new SuicidalIdeationProtocol();\n    }\n    return SuicidalIdeationProtocol.instance;\n  }\n\n  /**\n   * REAL-TIME SUICIDAL IDEATION DETECTION\n   * Monitors PHQ-9 Question 9 responses in real-time\n   * PERFORMANCE: <50ms detection, <200ms intervention display\n   */\n  public async detectSuicidalIdeation(\n    questionId: string,\n    response: number,\n    userId: string,\n    assessmentId: string,\n    totalScore?: number\n  ): Promise<SuicidalIdeationDetection | null> {\n    const detectionStartTime = performance.now();\n\n    try {\n      // Only process PHQ-9 Question 9\n      if (questionId !== SUICIDAL_IDEATION_CONFIG.QUESTION_ID) {\n        return null;\n      }\n\n      // Check if response indicates suicidal ideation\n      if (response <= SUICIDAL_IDEATION_CONFIG.TRIGGER_THRESHOLD) {\n        return null;\n      }\n\n      // Create suicidal ideation detection\n      const detection = this.createSuicidalIdeationDetection(\n        response,\n        userId,\n        assessmentId,\n        totalScore,\n        detectionStartTime\n      );\n\n      // Validate detection timing\n      this.validateDetectionTiming(detection);\n\n      // Trigger immediate intervention\n      await this.triggerImmediateIntervention(detection);\n\n      // Log for clinical audit\n      await this.logSuicidalIdeationDetection(detection);\n\n      // Record performance metrics\n      this.recordDetectionMetrics(detection);\n\n      return detection;\n\n    } catch (error) {\n      console.error('ðŸš¨ SUICIDAL IDEATION DETECTION ERROR:', error);\n\n      // FAIL-SAFE: Emergency intervention\n      await this.emergencyFailsafeIntervention(questionId, response);\n\n      throw error;\n    }\n  }\n\n  /**\n   * IMMEDIATE CRISIS INTERVENTION\n   * Cannot be dismissed - requires safety acknowledgment\n   */\n  public async triggerImmediateIntervention(\n    detection: SuicidalIdeationDetection\n  ): Promise<SuicidalIdeationIntervention> {\n    const interventionStartTime = performance.now();\n\n    try {\n      // Create intervention session\n      const intervention = this.createSuicidalIdeationIntervention(\n        detection,\n        interventionStartTime\n      );\n\n      // Store active intervention\n      this.activeInterventions.set(detection.id, intervention);\n\n      // Display emergency crisis alert\n      await this.displayEmergencySuicidalIdeationAlert(intervention);\n\n      // Log intervention start\n      await this.logSuicidalIdeationIntervention(intervention);\n\n      // Schedule mandatory follow-up\n      await this.scheduleMandatoryFollowUp(intervention);\n\n      return intervention;\n\n    } catch (error) {\n      console.error('ðŸš¨ SUICIDAL IDEATION INTERVENTION ERROR:', error);\n\n      // FAIL-SAFE: Direct emergency call\n      await this.emergencyFailsafeIntervention(\n        detection.questionId,\n        detection.response\n      );\n\n      throw error;\n    }\n  }\n\n  /**\n   * SAFETY ACKNOWLEDGMENT PROCESS\n   * Required before any dismissal option\n   */\n  public async requireSafetyAcknowledgment(\n    interventionId: string\n  ): Promise<boolean> {\n    const intervention = this.activeInterventions.get(interventionId);\n    if (!intervention) {\n      return false;\n    }\n\n    try {\n      // Check minimum intervention duration\n      const currentTime = Date.now();\n      const interventionDuration = currentTime - intervention.startTimestamp;\n\n      if (interventionDuration < SUICIDAL_IDEATION_CONFIG.MIN_INTERVENTION_DURATION_MS) {\n        Alert.alert(\n          'Safety First',\n          `Please take ${Math.ceil((SUICIDAL_IDEATION_CONFIG.MIN_INTERVENTION_DURATION_MS - interventionDuration) / 1000)} more seconds to review the crisis resources.`,\n          [{ text: 'Continue', style: 'default' }]\n        );\n        return false;\n      }\n\n      // Display safety commitment dialog\n      return new Promise((resolve) => {\n        Alert.alert(\n          'ðŸš¨ Safety Commitment Required',\n          'Before continuing, please confirm your commitment to safety. If you are having thoughts of self-harm, please contact crisis support immediately.',\n          [\n            {\n              text: 'Call 988 Now',\n              onPress: () => {\n                this.recordSafetyAction(interventionId, 'contacted_988');\n                Linking.openURL('tel:988');\n                resolve(false); // Keep intervention active\n              },\n              style: 'default'\n            },\n            {\n              text: 'I am safe and will seek help if needed',\n              onPress: () => {\n                this.recordSafetyAction(interventionId, 'safety_commitment');\n                this.completeSafetyAcknowledgment(interventionId);\n                resolve(true);\n              },\n              style: 'default'\n            }\n          ],\n          { cancelable: false }\n        );\n      });\n\n    } catch (error) {\n      console.error('ðŸš¨ SAFETY ACKNOWLEDGMENT ERROR:', error);\n      return false;\n    }\n  }\n\n  /**\n   * CRISIS INTERVENTION UI DISPLAY\n   * Non-dismissible emergency alert\n   */\n  private async displayEmergencySuicidalIdeationAlert(\n    intervention: SuicidalIdeationIntervention\n  ): Promise<void> {\n    const { detection } = intervention;\n\n    const severityText = this.getSeverityText(detection.severity);\n    const urgencyMessage = this.getUrgencyMessage(detection.severity);\n\n    Alert.alert(\n      'ðŸš¨ IMMEDIATE CRISIS SUPPORT NEEDED',\n      `Your response indicates ${severityText}. ${urgencyMessage}\\n\\nYou are not alone. Crisis support is available 24/7.`,\n      [\n        {\n          text: 'Call 988 Crisis Lifeline',\n          onPress: () => {\n            this.recordSafetyAction(intervention.interventionId, 'contacted_988');\n            Linking.openURL('tel:988');\n          },\n          style: 'default'\n        },\n        {\n          text: 'Text Crisis Support (741741)',\n          onPress: () => {\n            this.recordSafetyAction(intervention.interventionId, 'contacted_crisis_text');\n            Linking.openURL('sms:741741');\n          },\n          style: 'default'\n        },\n        {\n          text: 'Emergency Services (911)',\n          onPress: () => {\n            this.recordSafetyAction(intervention.interventionId, 'contacted_emergency');\n            Linking.openURL('tel:911');\n          },\n          style: 'destructive'\n        }\n      ],\n      { cancelable: false }\n    );\n  }\n\n  /**\n   * DETECTION DATA STRUCTURES\n   */\n  private createSuicidalIdeationDetection(\n    response: number,\n    userId: string,\n    assessmentId: string,\n    totalScore: number | undefined,\n    startTime: number\n  ): SuicidalIdeationDetection {\n    const severity = this.determineSeverity(response);\n    const riskLevel = this.determineRiskLevel(response, totalScore);\n\n    return {\n      id: `suicidal_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      questionId: SUICIDAL_IDEATION_CONFIG.QUESTION_ID,\n      response,\n      severity,\n      riskLevel,\n      userId,\n      assessmentId,\n      detectionTimestamp: Date.now(),\n      detectionResponseTimeMs: performance.now() - startTime,\n      context: {\n        totalScore,\n        timeOfDay: this.getTimeOfDay(),\n        dayOfWeek: new Date().getDay(),\n        questionText: \"Thoughts that you would be better off dead, or of hurting yourself in some way\",\n        responseText: SUICIDAL_IDEATION_RESPONSES[response as keyof typeof SUICIDAL_IDEATION_RESPONSES]\n      }\n    };\n  }\n\n  private createSuicidalIdeationIntervention(\n    detection: SuicidalIdeationDetection,\n    startTime: number\n  ): SuicidalIdeationIntervention {\n    return {\n      interventionId: `si_intervention_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      detection,\n      startTimestamp: Date.now(),\n      responseTimeMs: performance.now() - startTime,\n      status: 'active',\n      actionsTaken: [],\n      safetyCommitment: null,\n      dismissible: false,\n      dismissalAvailableAt: Date.now() + SUICIDAL_IDEATION_CONFIG.MIN_INTERVENTION_DURATION_MS,\n      followUp: {\n        required: true,\n        urgency: 'immediate',\n        scheduledWithin: SUICIDAL_IDEATION_CONFIG.MANDATORY_FOLLOWUP_DURATION_MS,\n        contactAttempts: [],\n        completed: false\n      }\n    };\n  }\n\n  /**\n   * SEVERITY AND RISK ASSESSMENT\n   */\n  private determineSeverity(response: number): SuicidalIdeationSeverity {\n    switch (response) {\n      case 1:\n        return 'several_days';\n      case 2:\n        return 'more_than_half';\n      case 3:\n        return 'nearly_every_day';\n      default:\n        throw new Error(`Invalid suicidal ideation response: ${response}`);\n    }\n  }\n\n  private determineRiskLevel(\n    response: number,\n    totalScore?: number\n  ): 'moderate' | 'high' | 'critical' | 'emergency' {\n    // Base risk from suicidal ideation response\n    if (response === 3) {\n      return totalScore && totalScore >= 20 ? 'emergency' : 'critical';\n    }\n\n    if (response === 2) {\n      return totalScore && totalScore >= 20 ? 'critical' : 'high';\n    }\n\n    if (response === 1) {\n      return totalScore && totalScore >= 20 ? 'high' : 'moderate';\n    }\n\n    return 'moderate';\n  }\n\n  private getSeverityText(severity: SuicidalIdeationSeverity): string {\n    switch (severity) {\n      case 'several_days':\n        return 'thoughts of self-harm on several days';\n      case 'more_than_half':\n        return 'thoughts of self-harm on more than half of days';\n      case 'nearly_every_day':\n        return 'thoughts of self-harm nearly every day';\n    }\n  }\n\n  private getUrgencyMessage(severity: SuicidalIdeationSeverity): string {\n    switch (severity) {\n      case 'nearly_every_day':\n        return 'This indicates a very serious situation requiring immediate professional help.';\n      case 'more_than_half':\n        return 'This indicates a serious situation requiring prompt professional support.';\n      case 'several_days':\n        return 'This indicates concerning thoughts that warrant immediate attention.';\n    }\n  }\n\n  /**\n   * SAFETY ACTIONS AND LOGGING\n   */\n  private recordSafetyAction(\n    interventionId: string,\n    action: SuicidalIdeationActionType\n  ): void {\n    const intervention = this.activeInterventions.get(interventionId);\n    if (intervention) {\n      intervention.actionsTaken.push({\n        type: action,\n        timestamp: Date.now(),\n        successful: true\n      });\n\n      // Update intervention status based on action\n      if (action === 'contacted_988' || action === 'contacted_emergency') {\n        intervention.status = 'professional_support_contacted';\n      }\n    }\n  }\n\n  private async completeSafetyAcknowledgment(interventionId: string): Promise<void> {\n    const intervention = this.activeInterventions.get(interventionId);\n    if (intervention) {\n      intervention.safetyCommitment = {\n        timestamp: Date.now(),\n        commitment: 'I am safe and will seek help if I have thoughts of self-harm',\n        followUpAgreed: true\n      };\n      intervention.status = 'safety_acknowledged';\n      intervention.dismissible = true;\n\n      // Log completion\n      await this.logSafetyAcknowledgment(intervention);\n    }\n  }\n\n  /**\n   * PERFORMANCE AND VALIDATION\n   */\n  private validateDetectionTiming(detection: SuicidalIdeationDetection): void {\n    if (detection.detectionResponseTimeMs > SUICIDAL_IDEATION_CONFIG.MAX_DETECTION_TIME_MS) {\n      console.warn(\n        `ðŸš¨ SUICIDAL IDEATION DETECTION TIME VIOLATION: ${detection.detectionResponseTimeMs}ms (max: ${SUICIDAL_IDEATION_CONFIG.MAX_DETECTION_TIME_MS}ms)`\n      );\n    }\n  }\n\n  private recordDetectionMetrics(detection: SuicidalIdeationDetection): void {\n    const timestamp = Date.now();\n    this.detectionMetrics.set('last_detection_time', detection.detectionResponseTimeMs);\n    this.detectionMetrics.set('total_detections', (this.detectionMetrics.get('total_detections') || 0) + 1);\n    this.detectionMetrics.set('last_detection_timestamp', timestamp);\n\n    const maxTime = this.detectionMetrics.get('max_detection_time') || 0;\n    if (detection.detectionResponseTimeMs > maxTime) {\n      this.detectionMetrics.set('max_detection_time', detection.detectionResponseTimeMs);\n    }\n  }\n\n  /**\n   * EMERGENCY FAIL-SAFES\n   */\n  private async emergencyFailsafeIntervention(\n    questionId: string,\n    response: number\n  ): Promise<void> {\n    console.error('ðŸš¨ EMERGENCY FAILSAFE ACTIVATED - SUICIDAL IDEATION');\n\n    Alert.alert(\n      'ðŸš¨ EMERGENCY CRISIS SUPPORT',\n      'Crisis support is available immediately. You are not alone.',\n      [\n        {\n          text: 'Call 988 Crisis Lifeline',\n          onPress: () => Linking.openURL('tel:988'),\n          style: 'default'\n        },\n        {\n          text: 'Emergency 911',\n          onPress: () => Linking.openURL('tel:911'),\n          style: 'destructive'\n        }\n      ],\n      { cancelable: false }\n    );\n\n    // Log emergency failsafe activation\n    try {\n      await AsyncStorage.setItem(\n        `emergency_failsafe_${Date.now()}`,\n        JSON.stringify({\n          type: 'suicidal_ideation_failsafe',\n          questionId,\n          response,\n          timestamp: Date.now(),\n          reason: 'System error during suicidal ideation detection'\n        })\n      );\n    } catch (error) {\n      console.error('Failed to log emergency failsafe:', error);\n    }\n  }\n\n  /**\n   * FOLLOW-UP AND SCHEDULING\n   */\n  private async scheduleMandatoryFollowUp(\n    intervention: SuicidalIdeationIntervention\n  ): Promise<void> {\n    try {\n      const followUpSchedule = {\n        interventionId: intervention.interventionId,\n        userId: intervention.detection.userId,\n        scheduledAt: Date.now() + SUICIDAL_IDEATION_CONFIG.MANDATORY_FOLLOWUP_DURATION_MS,\n        type: 'suicidal_ideation_followup',\n        urgency: 'mandatory',\n        attempts: 0,\n        maxAttempts: 3\n      };\n\n      await SecureStore.setItemAsync(\n        `followup_${intervention.interventionId}`,\n        JSON.stringify(followUpSchedule)\n      );\n    } catch (error) {\n      console.error('Failed to schedule mandatory follow-up:', error);\n    }\n  }\n\n  /**\n   * AUDIT AND LOGGING\n   */\n  private async logSuicidalIdeationDetection(\n    detection: SuicidalIdeationDetection\n  ): Promise<void> {\n    try {\n      const auditEntry = {\n        type: 'suicidal_ideation_detection',\n        detection,\n        timestamp: Date.now(),\n        clinicalNote: `PHQ-9 Q9 response: ${detection.response} (${detection.context.responseText})`,\n        riskLevel: detection.riskLevel,\n        immediateAction: 'Crisis intervention triggered',\n        source: 'SuicidalIdeationProtocol'\n      };\n\n      await SecureStore.setItemAsync(\n        `suicidal_detection_${detection.id}`,\n        JSON.stringify(auditEntry)\n      );\n    } catch (error) {\n      console.error('Suicidal ideation detection logging failed:', error);\n    }\n  }\n\n  private async logSuicidalIdeationIntervention(\n    intervention: SuicidalIdeationIntervention\n  ): Promise<void> {\n    try {\n      const auditEntry = {\n        type: 'suicidal_ideation_intervention',\n        intervention,\n        timestamp: Date.now(),\n        clinicalNote: 'Emergency crisis intervention initiated for suicidal ideation',\n        mandatoryFollowUp: true,\n        source: 'SuicidalIdeationProtocol'\n      };\n\n      await SecureStore.setItemAsync(\n        `suicidal_intervention_${intervention.interventionId}`,\n        JSON.stringify(auditEntry)\n      );\n    } catch (error) {\n      console.error('Suicidal ideation intervention logging failed:', error);\n    }\n  }\n\n  private async logSafetyAcknowledgment(\n    intervention: SuicidalIdeationIntervention\n  ): Promise<void> {\n    try {\n      const auditEntry = {\n        type: 'safety_acknowledgment',\n        interventionId: intervention.interventionId,\n        userId: intervention.detection.userId,\n        safetyCommitment: intervention.safetyCommitment,\n        actionsTaken: intervention.actionsTaken,\n        timestamp: Date.now(),\n        source: 'SuicidalIdeationProtocol'\n      };\n\n      await SecureStore.setItemAsync(\n        `safety_ack_${intervention.interventionId}`,\n        JSON.stringify(auditEntry)\n      );\n    } catch (error) {\n      console.error('Safety acknowledgment logging failed:', error);\n    }\n  }\n\n  /**\n   * UTILITY METHODS\n   */\n  private getTimeOfDay(): 'morning' | 'afternoon' | 'evening' | 'night' {\n    const hour = new Date().getHours();\n    if (hour >= 6 && hour < 12) return 'morning';\n    if (hour >= 12 && hour < 17) return 'afternoon';\n    if (hour >= 17 && hour < 21) return 'evening';\n    return 'night';\n  }\n\n  /**\n   * PUBLIC API METHODS\n   */\n  public getActiveInterventions(): SuicidalIdeationIntervention[] {\n    return Array.from(this.activeInterventions.values());\n  }\n\n  public getDetectionMetrics(): Record<string, number> {\n    return Object.fromEntries(this.detectionMetrics);\n  }\n\n  public async clearCompletedInterventions(): Promise<void> {\n    for (const [id, intervention] of this.activeInterventions.entries()) {\n      if (intervention.status === 'completed' || intervention.status === 'safety_acknowledged') {\n        this.activeInterventions.delete(id);\n      }\n    }\n  }\n}\n\n/**\n * TYPE DEFINITIONS\n */\nexport interface SuicidalIdeationDetection {\n  id: string;\n  questionId: string;\n  response: number;\n  severity: SuicidalIdeationSeverity;\n  riskLevel: 'moderate' | 'high' | 'critical' | 'emergency';\n  userId: string;\n  assessmentId: string;\n  detectionTimestamp: number;\n  detectionResponseTimeMs: number;\n  context: {\n    totalScore?: number;\n    timeOfDay: 'morning' | 'afternoon' | 'evening' | 'night';\n    dayOfWeek: number;\n    questionText: string;\n    responseText: string;\n  };\n}\n\nexport interface SuicidalIdeationIntervention {\n  interventionId: string;\n  detection: SuicidalIdeationDetection;\n  startTimestamp: number;\n  responseTimeMs: number;\n  status: SuicidalIdeationInterventionStatus;\n  actionsTaken: SuicidalIdeationAction[];\n  safetyCommitment: SuicidalIdeationSafetyCommitment | null;\n  dismissible: boolean;\n  dismissalAvailableAt: number;\n  followUp: SuicidalIdeationFollowUp;\n}\n\nexport type SuicidalIdeationInterventionStatus =\n  | 'active'\n  | 'professional_support_contacted'\n  | 'safety_acknowledged'\n  | 'completed';\n\nexport interface SuicidalIdeationAction {\n  type: SuicidalIdeationActionType;\n  timestamp: number;\n  successful: boolean;\n}\n\nexport type SuicidalIdeationActionType =\n  | 'contacted_988'\n  | 'contacted_emergency'\n  | 'contacted_crisis_text'\n  | 'viewed_resources'\n  | 'safety_commitment'\n  | 'professional_referral';\n\nexport interface SuicidalIdeationSafetyCommitment {\n  timestamp: number;\n  commitment: string;\n  followUpAgreed: boolean;\n}\n\nexport interface SuicidalIdeationFollowUp {\n  required: boolean;\n  urgency: 'immediate' | 'within_24h';\n  scheduledWithin: number;\n  contactAttempts: Array<{\n    timestamp: number;\n    method: string;\n    successful: boolean;\n  }>;\n  completed: boolean;\n}\n\n// Export singleton instance\nexport default SuicidalIdeationProtocol.getInstance();"],"mappings":"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","ignoreList":[]}