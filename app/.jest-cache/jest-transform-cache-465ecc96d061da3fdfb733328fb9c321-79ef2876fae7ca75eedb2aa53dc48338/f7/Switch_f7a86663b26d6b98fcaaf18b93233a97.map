{"version":3,"names":["_StyleSheet","_interopRequireDefault","require","_Platform","_useMergeRefs","_AndroidSwitchNativeComponent","_interopRequireWildcard","_SwitchNativeComponent","_react","React","_jsxRuntime","_excluded","_excluded2","_excluded3","returnsFalse","returnsTrue","Switch","_ref","forwardedRef","ref","props","_objectWithoutProperties2","default","disabled","ios_backgroundColor","onChange","onValueChange","style","thumbColor","trackColor","value","restProps","trackColorForFalse","false","trackColorForTrue","true","nativeSwitchRef","useRef","useMergeRefs","_useState","useState","_useState2","_slicedToArray2","native","setNative","handleChange","event","nativeEvent","useLayoutEffect","_nativeSwitchRef$curr","jsValue","shouldUpdateNativeSwitch","current","setNativeProps","Platform","OS","AndroidSwitchCommands","setNativeValue","SwitchCommands","setValue","_props$accessibilityR","onTintColor","tintColor","androidProps","accessibilityState","_disabled","_accessibilityState","Object","assign","platformProps","enabled","on","thumbTintColor","trackTintColor","jsx","accessibilityRole","onResponderTerminationRequest","onStartShouldSetResponder","_props$accessibilityR2","StyleSheet","compose","alignSelf","backgroundColor","borderRadius","_default","exports"],"sources":["Switch.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport type {ColorValue} from '../../StyleSheet/StyleSheet';\nimport type {NativeSyntheticEvent} from '../../Types/CoreEventTypes';\nimport type {AccessibilityState} from '../View/ViewAccessibility';\nimport type {ViewProps} from '../View/ViewPropTypes';\n\nimport StyleSheet from '../../StyleSheet/StyleSheet';\nimport Platform from '../../Utilities/Platform';\nimport useMergeRefs from '../../Utilities/useMergeRefs';\nimport AndroidSwitchNativeComponent, {\n  Commands as AndroidSwitchCommands,\n} from './AndroidSwitchNativeComponent';\nimport SwitchNativeComponent, {\n  Commands as SwitchCommands,\n} from './SwitchNativeComponent';\nimport * as React from 'react';\nimport {useLayoutEffect, useRef, useState} from 'react';\n\nexport type SwitchPropsIOS = {\n  /**\n   * Background color when the switch is turned on.\n   *\n   * @deprecated use trackColor instead\n   */\n  onTintColor?: ?ColorValue,\n\n  /**\n   * Color of the foreground switch grip.\n   *\n   * @deprecated use thumbColor instead\n   */\n  thumbTintColor?: ?ColorValue,\n\n  /**\n   * Background color when the switch is turned off.\n   *\n   * @deprecated use trackColor instead\n   */\n  tintColor?: ?ColorValue,\n};\n\ntype SwitchChangeEventData = $ReadOnly<{\n  target: number,\n  value: boolean,\n}>;\n\nexport type SwitchChangeEvent = NativeSyntheticEvent<SwitchChangeEventData>;\n\ntype SwitchPropsBase = {\n  /**\n    If true the user won't be able to toggle the switch.\n\n    @default false\n   */\n  disabled?: ?boolean,\n\n  /**\n      The value of the switch. If true the switch will be turned on.\n\n      @default false\n     */\n  value?: ?boolean,\n\n  /**\n      Color of the foreground switch grip. If this is set on iOS, the switch grip will lose its drop shadow.\n     */\n  thumbColor?: ?ColorValue,\n\n  /**\n      Custom colors for the switch track.\n\n      _iOS_: When the switch value is false, the track shrinks into the border. If you want to change the\n      color of the background exposed by the shrunken track, use\n       [`ios_backgroundColor`](https://reactnative.dev/docs/switch#ios_backgroundColor).\n     */\n  trackColor?: ?$ReadOnly<{\n    false?: ?ColorValue,\n    true?: ?ColorValue,\n  }>,\n\n  /**\n      On iOS, custom color for the background. This background color can be\n      seen either when the switch value is false or when the switch is\n      disabled (and the switch is translucent).\n     */\n  ios_backgroundColor?: ?ColorValue,\n\n  /**\n      Invoked when the user tries to change the value of the switch. Receives\n      the change event as an argument. If you want to only receive the new\n      value, use `onValueChange` instead.\n     */\n  onChange?: ?(event: SwitchChangeEvent) => Promise<void> | void,\n\n  /**\n      Invoked when the user tries to change the value of the switch. Receives\n      the new value as an argument. If you want to instead receive an event,\n      use `onChange`.\n     */\n  onValueChange?: ?(value: boolean) => Promise<void> | void,\n};\n\nexport type SwitchProps = $ReadOnly<{\n  ...ViewProps,\n  ...SwitchPropsIOS,\n  ...SwitchPropsBase,\n}>;\n\nconst returnsFalse = () => false;\nconst returnsTrue = () => true;\n\ntype SwitchRef = React.ElementRef<\n  typeof SwitchNativeComponent | typeof AndroidSwitchNativeComponent,\n>;\n\n/**\n  Renders a boolean input.\n\n  This is a controlled component that requires an `onValueChange`\n  callback that updates the `value` prop in order for the component to\n  reflect user actions. If the `value` prop is not updated, the\n  component will continue to render the supplied `value` prop instead of\n  the expected result of any user actions.\n\n  ```SnackPlayer name=Switch\n  import React, { useState } from \"react\";\n  import { View, Switch, StyleSheet } from \"react-native\";\n\n  const App = () => {\n    const [isEnabled, setIsEnabled] = useState(false);\n    const toggleSwitch = () => setIsEnabled(previousState => !previousState);\n\n    return (\n      <View style={styles.container}>\n        <Switch\n          trackColor={{ false: \"#767577\", true: \"#81b0ff\" }}\n          thumbColor={isEnabled ? \"#f5dd4b\" : \"#f4f3f4\"}\n          ios_backgroundColor=\"#3e3e3e\"\n          onValueChange={toggleSwitch}\n          value={isEnabled}\n        />\n      </View>\n    );\n  }\n\n  const styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    }\n  });\n\n  export default App;\n  ```\n */\nconst Switch: component(\n  ref?: React.RefSetter<SwitchRef>,\n  ...props: SwitchProps\n) = function Switch({\n  ref: forwardedRef,\n  ...props\n}: {\n  ref?: React.RefSetter<SwitchRef>,\n  ...SwitchProps,\n}): React.Node {\n  const {\n    disabled,\n    ios_backgroundColor,\n    onChange,\n    onValueChange,\n    style,\n    thumbColor,\n    trackColor,\n    value,\n    ...restProps\n  } = props;\n  const trackColorForFalse = trackColor?.false;\n  const trackColorForTrue = trackColor?.true;\n\n  const nativeSwitchRef = useRef<React.ElementRef<\n    typeof SwitchNativeComponent | typeof AndroidSwitchNativeComponent,\n  > | null>(null);\n\n  const ref = useMergeRefs(nativeSwitchRef, forwardedRef);\n\n  // We wrap the native state in an object to force the layout-effect\n  // below to re-run whenever we get an update from native, even if it's\n  // not different from the previous native state.\n  const [native, setNative] = useState({value: (null: ?boolean)});\n\n  const handleChange = (event: SwitchChangeEvent) => {\n    // $FlowFixMe[unused-promise]\n    onChange?.(event);\n    // $FlowFixMe[unused-promise]\n    onValueChange?.(event.nativeEvent.value);\n    setNative({value: event.nativeEvent.value});\n  };\n\n  useLayoutEffect(() => {\n    // This is necessary in case native updates the switch and JS decides\n    // that the update should be ignored and we should stick with the value\n    // that we have in JS.\n    const jsValue = value === true;\n    const shouldUpdateNativeSwitch =\n      native.value != null && native.value !== jsValue;\n    if (\n      shouldUpdateNativeSwitch &&\n      // $FlowIssue[method-unbinding]\n      nativeSwitchRef.current?.setNativeProps != null\n    ) {\n      if (Platform.OS === 'android') {\n        AndroidSwitchCommands.setNativeValue(nativeSwitchRef.current, jsValue);\n      } else {\n        SwitchCommands.setValue(nativeSwitchRef.current, jsValue);\n      }\n    }\n  }, [value, native]);\n\n  if (Platform.OS === 'android') {\n    const {onTintColor, tintColor, ...androidProps} = restProps;\n    const {accessibilityState} = androidProps;\n    const _disabled =\n      disabled != null ? disabled : accessibilityState?.disabled;\n\n    const _accessibilityState: ?AccessibilityState =\n      _disabled !== accessibilityState?.disabled\n        ? {...accessibilityState, disabled: _disabled}\n        : accessibilityState;\n\n    const platformProps = {\n      accessibilityState: _accessibilityState,\n      enabled: _disabled !== true,\n      on: value === true,\n      style,\n      thumbTintColor: thumbColor,\n      trackColorForFalse: trackColorForFalse,\n      trackColorForTrue: trackColorForTrue,\n      trackTintColor: value === true ? trackColorForTrue : trackColorForFalse,\n    };\n\n    return (\n      <AndroidSwitchNativeComponent\n        {...androidProps}\n        {...platformProps}\n        accessibilityRole={props.accessibilityRole ?? 'switch'}\n        onChange={handleChange}\n        onResponderTerminationRequest={returnsFalse}\n        onStartShouldSetResponder={returnsTrue}\n        ref={ref}\n      />\n    );\n  } else {\n    const platformProps = {\n      disabled,\n      onTintColor: trackColorForTrue,\n      style: StyleSheet.compose(\n        {alignSelf: 'flex-start' as const},\n        StyleSheet.compose(\n          style,\n          ios_backgroundColor == null\n            ? null\n            : {\n                backgroundColor: ios_backgroundColor,\n                borderRadius: 16,\n              },\n        ),\n      ),\n      thumbTintColor: thumbColor,\n      tintColor: trackColorForFalse,\n      value: value === true,\n    };\n\n    return (\n      <SwitchNativeComponent\n        {...restProps}\n        {...platformProps}\n        accessibilityRole={props.accessibilityRole ?? 'switch'}\n        onChange={handleChange}\n        onResponderTerminationRequest={returnsFalse}\n        onStartShouldSetResponder={returnsTrue}\n        ref={ref}\n      />\n    );\n  }\n};\n\nexport default Switch;\n"],"mappings":"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","ignoreList":[]}