5f1f50a9fd18d1d7db2a7b4573d488b4
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var InteractionManager = require('./InteractionManager').default;
var TouchHistoryMath = require('./TouchHistoryMath').default;
var currentCentroidXOfTouchesChangedAfter = TouchHistoryMath.currentCentroidXOfTouchesChangedAfter;
var currentCentroidYOfTouchesChangedAfter = TouchHistoryMath.currentCentroidYOfTouchesChangedAfter;
var previousCentroidXOfTouchesChangedAfter = TouchHistoryMath.previousCentroidXOfTouchesChangedAfter;
var previousCentroidYOfTouchesChangedAfter = TouchHistoryMath.previousCentroidYOfTouchesChangedAfter;
var currentCentroidX = TouchHistoryMath.currentCentroidX;
var currentCentroidY = TouchHistoryMath.currentCentroidY;
var PanResponder = {
  _initializeGestureState: function _initializeGestureState(gestureState) {
    gestureState.moveX = 0;
    gestureState.moveY = 0;
    gestureState.x0 = 0;
    gestureState.y0 = 0;
    gestureState.dx = 0;
    gestureState.dy = 0;
    gestureState.vx = 0;
    gestureState.vy = 0;
    gestureState.numberActiveTouches = 0;
    gestureState._accountsForMovesUpTo = 0;
  },
  _updateGestureStateOnMove: function _updateGestureStateOnMove(gestureState, touchHistory) {
    gestureState.numberActiveTouches = touchHistory.numberActiveTouches;
    gestureState.moveX = currentCentroidXOfTouchesChangedAfter(touchHistory, gestureState._accountsForMovesUpTo);
    gestureState.moveY = currentCentroidYOfTouchesChangedAfter(touchHistory, gestureState._accountsForMovesUpTo);
    var movedAfter = gestureState._accountsForMovesUpTo;
    var prevX = previousCentroidXOfTouchesChangedAfter(touchHistory, movedAfter);
    var x = currentCentroidXOfTouchesChangedAfter(touchHistory, movedAfter);
    var prevY = previousCentroidYOfTouchesChangedAfter(touchHistory, movedAfter);
    var y = currentCentroidYOfTouchesChangedAfter(touchHistory, movedAfter);
    var nextDX = gestureState.dx + (x - prevX);
    var nextDY = gestureState.dy + (y - prevY);
    var dt = touchHistory.mostRecentTimeStamp - gestureState._accountsForMovesUpTo;
    gestureState.vx = (nextDX - gestureState.dx) / dt;
    gestureState.vy = (nextDY - gestureState.dy) / dt;
    gestureState.dx = nextDX;
    gestureState.dy = nextDY;
    gestureState._accountsForMovesUpTo = touchHistory.mostRecentTimeStamp;
  },
  create: function create(config) {
    var interactionState = {
      handle: null
    };
    var gestureState = {
      stateID: Math.random(),
      moveX: 0,
      moveY: 0,
      x0: 0,
      y0: 0,
      dx: 0,
      dy: 0,
      vx: 0,
      vy: 0,
      numberActiveTouches: 0,
      _accountsForMovesUpTo: 0
    };
    var panHandlers = {
      onStartShouldSetResponder: function onStartShouldSetResponder(event) {
        return config.onStartShouldSetPanResponder == null ? false : config.onStartShouldSetPanResponder(event, gestureState);
      },
      onMoveShouldSetResponder: function onMoveShouldSetResponder(event) {
        return config.onMoveShouldSetPanResponder == null ? false : config.onMoveShouldSetPanResponder(event, gestureState);
      },
      onStartShouldSetResponderCapture: function onStartShouldSetResponderCapture(event) {
        if (event.nativeEvent.touches.length === 1) {
          PanResponder._initializeGestureState(gestureState);
        }
        gestureState.numberActiveTouches = event.touchHistory.numberActiveTouches;
        return config.onStartShouldSetPanResponderCapture != null ? config.onStartShouldSetPanResponderCapture(event, gestureState) : false;
      },
      onMoveShouldSetResponderCapture: function onMoveShouldSetResponderCapture(event) {
        var touchHistory = event.touchHistory;
        if (gestureState._accountsForMovesUpTo === touchHistory.mostRecentTimeStamp) {
          return false;
        }
        PanResponder._updateGestureStateOnMove(gestureState, touchHistory);
        return config.onMoveShouldSetPanResponderCapture ? config.onMoveShouldSetPanResponderCapture(event, gestureState) : false;
      },
      onResponderGrant: function onResponderGrant(event) {
        if (!interactionState.handle) {
          interactionState.handle = InteractionManager.createInteractionHandle();
        }
        gestureState.x0 = currentCentroidX(event.touchHistory);
        gestureState.y0 = currentCentroidY(event.touchHistory);
        gestureState.dx = 0;
        gestureState.dy = 0;
        if (config.onPanResponderGrant) {
          config.onPanResponderGrant(event, gestureState);
        }
        return config.onShouldBlockNativeResponder == null ? true : config.onShouldBlockNativeResponder(event, gestureState);
      },
      onResponderReject: function onResponderReject(event) {
        clearInteractionHandle(interactionState, config.onPanResponderReject, event, gestureState);
      },
      onResponderRelease: function onResponderRelease(event) {
        clearInteractionHandle(interactionState, config.onPanResponderRelease, event, gestureState);
        PanResponder._initializeGestureState(gestureState);
      },
      onResponderStart: function onResponderStart(event) {
        var touchHistory = event.touchHistory;
        gestureState.numberActiveTouches = touchHistory.numberActiveTouches;
        if (config.onPanResponderStart) {
          config.onPanResponderStart(event, gestureState);
        }
      },
      onResponderMove: function onResponderMove(event) {
        var touchHistory = event.touchHistory;
        if (gestureState._accountsForMovesUpTo === touchHistory.mostRecentTimeStamp) {
          return;
        }
        PanResponder._updateGestureStateOnMove(gestureState, touchHistory);
        if (config.onPanResponderMove) {
          config.onPanResponderMove(event, gestureState);
        }
      },
      onResponderEnd: function onResponderEnd(event) {
        var touchHistory = event.touchHistory;
        gestureState.numberActiveTouches = touchHistory.numberActiveTouches;
        clearInteractionHandle(interactionState, config.onPanResponderEnd, event, gestureState);
      },
      onResponderTerminate: function onResponderTerminate(event) {
        clearInteractionHandle(interactionState, config.onPanResponderTerminate, event, gestureState);
        PanResponder._initializeGestureState(gestureState);
      },
      onResponderTerminationRequest: function onResponderTerminationRequest(event) {
        return config.onPanResponderTerminationRequest == null ? true : config.onPanResponderTerminationRequest(event, gestureState);
      }
    };
    return {
      panHandlers: panHandlers,
      getInteractionHandle: function getInteractionHandle() {
        return interactionState.handle;
      }
    };
  }
};
function clearInteractionHandle(interactionState, callback, event, gestureState) {
  if (interactionState.handle) {
    InteractionManager.clearInteractionHandle(interactionState.handle);
    interactionState.handle = null;
  }
  if (callback) {
    callback(event, gestureState);
  }
}
var _default = exports.default = PanResponder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJJbnRlcmFjdGlvbk1hbmFnZXIiLCJyZXF1aXJlIiwiVG91Y2hIaXN0b3J5TWF0aCIsImN1cnJlbnRDZW50cm9pZFhPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIiLCJjdXJyZW50Q2VudHJvaWRZT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyIiwicHJldmlvdXNDZW50cm9pZFhPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIiLCJwcmV2aW91c0NlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlciIsImN1cnJlbnRDZW50cm9pZFgiLCJjdXJyZW50Q2VudHJvaWRZIiwiUGFuUmVzcG9uZGVyIiwiX2luaXRpYWxpemVHZXN0dXJlU3RhdGUiLCJnZXN0dXJlU3RhdGUiLCJtb3ZlWCIsIm1vdmVZIiwieDAiLCJ5MCIsImR4IiwiZHkiLCJ2eCIsInZ5IiwibnVtYmVyQWN0aXZlVG91Y2hlcyIsIl9hY2NvdW50c0Zvck1vdmVzVXBUbyIsIl91cGRhdGVHZXN0dXJlU3RhdGVPbk1vdmUiLCJ0b3VjaEhpc3RvcnkiLCJtb3ZlZEFmdGVyIiwicHJldlgiLCJ4IiwicHJldlkiLCJ5IiwibmV4dERYIiwibmV4dERZIiwiZHQiLCJtb3N0UmVjZW50VGltZVN0YW1wIiwiY3JlYXRlIiwiY29uZmlnIiwiaW50ZXJhY3Rpb25TdGF0ZSIsImhhbmRsZSIsInN0YXRlSUQiLCJNYXRoIiwicmFuZG9tIiwicGFuSGFuZGxlcnMiLCJvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwiZXZlbnQiLCJvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyIiwib25Nb3ZlU2hvdWxkU2V0UmVzcG9uZGVyIiwib25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlckNhcHR1cmUiLCJuYXRpdmVFdmVudCIsInRvdWNoZXMiLCJsZW5ndGgiLCJvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZSIsIm9uTW92ZVNob3VsZFNldFJlc3BvbmRlckNhcHR1cmUiLCJvbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXJDYXB0dXJlIiwib25SZXNwb25kZXJHcmFudCIsImNyZWF0ZUludGVyYWN0aW9uSGFuZGxlIiwib25QYW5SZXNwb25kZXJHcmFudCIsIm9uU2hvdWxkQmxvY2tOYXRpdmVSZXNwb25kZXIiLCJvblJlc3BvbmRlclJlamVjdCIsImNsZWFySW50ZXJhY3Rpb25IYW5kbGUiLCJvblBhblJlc3BvbmRlclJlamVjdCIsIm9uUmVzcG9uZGVyUmVsZWFzZSIsIm9uUGFuUmVzcG9uZGVyUmVsZWFzZSIsIm9uUmVzcG9uZGVyU3RhcnQiLCJvblBhblJlc3BvbmRlclN0YXJ0Iiwib25SZXNwb25kZXJNb3ZlIiwib25QYW5SZXNwb25kZXJNb3ZlIiwib25SZXNwb25kZXJFbmQiLCJvblBhblJlc3BvbmRlckVuZCIsIm9uUmVzcG9uZGVyVGVybWluYXRlIiwib25QYW5SZXNwb25kZXJUZXJtaW5hdGUiLCJvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCIsIm9uUGFuUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0IiwiZ2V0SW50ZXJhY3Rpb25IYW5kbGUiLCJjYWxsYmFjayIsIl9kZWZhdWx0Il0sInNvdXJjZXMiOlsiUGFuUmVzcG9uZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0dlc3R1cmVSZXNwb25kZXJFdmVudH0gZnJvbSAnLi4vVHlwZXMvQ29yZUV2ZW50VHlwZXMnO1xuXG5jb25zdCBJbnRlcmFjdGlvbk1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyYWN0aW9uTWFuYWdlcicpLmRlZmF1bHQ7XG5jb25zdCBUb3VjaEhpc3RvcnlNYXRoID0gcmVxdWlyZSgnLi9Ub3VjaEhpc3RvcnlNYXRoJykuZGVmYXVsdDtcblxuY29uc3QgY3VycmVudENlbnRyb2lkWE9mVG91Y2hlc0NoYW5nZWRBZnRlciA9XG4gIFRvdWNoSGlzdG9yeU1hdGguY3VycmVudENlbnRyb2lkWE9mVG91Y2hlc0NoYW5nZWRBZnRlcjtcbmNvbnN0IGN1cnJlbnRDZW50cm9pZFlPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIgPVxuICBUb3VjaEhpc3RvcnlNYXRoLmN1cnJlbnRDZW50cm9pZFlPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXI7XG5jb25zdCBwcmV2aW91c0NlbnRyb2lkWE9mVG91Y2hlc0NoYW5nZWRBZnRlciA9XG4gIFRvdWNoSGlzdG9yeU1hdGgucHJldmlvdXNDZW50cm9pZFhPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXI7XG5jb25zdCBwcmV2aW91c0NlbnRyb2lkWU9mVG91Y2hlc0NoYW5nZWRBZnRlciA9XG4gIFRvdWNoSGlzdG9yeU1hdGgucHJldmlvdXNDZW50cm9pZFlPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXI7XG5jb25zdCBjdXJyZW50Q2VudHJvaWRYID0gVG91Y2hIaXN0b3J5TWF0aC5jdXJyZW50Q2VudHJvaWRYO1xuY29uc3QgY3VycmVudENlbnRyb2lkWSA9IFRvdWNoSGlzdG9yeU1hdGguY3VycmVudENlbnRyb2lkWTtcblxuLyoqXG4gKiBgUGFuUmVzcG9uZGVyYCByZWNvbmNpbGVzIHNldmVyYWwgdG91Y2hlcyBpbnRvIGEgc2luZ2xlIGdlc3R1cmUuIEl0IG1ha2VzXG4gKiBzaW5nbGUtdG91Y2ggZ2VzdHVyZXMgcmVzaWxpZW50IHRvIGV4dHJhIHRvdWNoZXMsIGFuZCBjYW4gYmUgdXNlZCB0b1xuICogcmVjb2duaXplIHNpbXBsZSBtdWx0aS10b3VjaCBnZXN0dXJlcy5cbiAqXG4gKiBCeSBkZWZhdWx0LCBgUGFuUmVzcG9uZGVyYCBob2xkcyBhbiBgSW50ZXJhY3Rpb25NYW5hZ2VyYCBoYW5kbGUgdG8gYmxvY2tcbiAqIGxvbmctcnVubmluZyBKUyBldmVudHMgZnJvbSBpbnRlcnJ1cHRpbmcgYWN0aXZlIGdlc3R1cmVzLlxuICpcbiAqIEl0IHByb3ZpZGVzIGEgcHJlZGljdGFibGUgd3JhcHBlciBvZiB0aGUgcmVzcG9uZGVyIGhhbmRsZXJzIHByb3ZpZGVkIGJ5IHRoZVxuICogW2dlc3R1cmUgcmVzcG9uZGVyIHN5c3RlbV0oZG9jcy9nZXN0dXJlLXJlc3BvbmRlci1zeXN0ZW0uaHRtbCkuXG4gKiBGb3IgZWFjaCBoYW5kbGVyLCBpdCBwcm92aWRlcyBhIG5ldyBgZ2VzdHVyZVN0YXRlYCBvYmplY3QgYWxvbmdzaWRlIHRoZVxuICogbmF0aXZlIGV2ZW50IG9iamVjdDpcbiAqXG4gKiBgYGBcbiAqIG9uUGFuUmVzcG9uZGVyTW92ZTogKGV2ZW50LCBnZXN0dXJlU3RhdGUpID0+IHt9XG4gKiBgYGBcbiAqXG4gKiBBIG5hdGl2ZSBldmVudCBpcyBhIHN5bnRoZXRpYyB0b3VjaCBldmVudCB3aXRoIHRoZSBmb2xsb3dpbmcgZm9ybTpcbiAqXG4gKiAgLSBgbmF0aXZlRXZlbnRgXG4gKiAgICAgICsgYGNoYW5nZWRUb3VjaGVzYCAtIEFycmF5IG9mIGFsbCB0b3VjaCBldmVudHMgdGhhdCBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgZXZlbnRcbiAqICAgICAgKyBgaWRlbnRpZmllcmAgLSBUaGUgSUQgb2YgdGhlIHRvdWNoXG4gKiAgICAgICsgYGxvY2F0aW9uWGAgLSBUaGUgWCBwb3NpdGlvbiBvZiB0aGUgdG91Y2gsIHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50XG4gKiAgICAgICsgYGxvY2F0aW9uWWAgLSBUaGUgWSBwb3NpdGlvbiBvZiB0aGUgdG91Y2gsIHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50XG4gKiAgICAgICsgYHBhZ2VYYCAtIFRoZSBYIHBvc2l0aW9uIG9mIHRoZSB0b3VjaCwgcmVsYXRpdmUgdG8gdGhlIHJvb3QgZWxlbWVudFxuICogICAgICArIGBwYWdlWWAgLSBUaGUgWSBwb3NpdGlvbiBvZiB0aGUgdG91Y2gsIHJlbGF0aXZlIHRvIHRoZSByb290IGVsZW1lbnRcbiAqICAgICAgKyBgdGFyZ2V0YCAtIFRoZSBub2RlIGlkIG9mIHRoZSBlbGVtZW50IHJlY2VpdmluZyB0aGUgdG91Y2ggZXZlbnRcbiAqICAgICAgKyBgdGltZXN0YW1wYCAtIEEgdGltZSBpZGVudGlmaWVyIGZvciB0aGUgdG91Y2gsIHVzZWZ1bCBmb3IgdmVsb2NpdHkgY2FsY3VsYXRpb25cbiAqICAgICAgKyBgdG91Y2hlc2AgLSBBcnJheSBvZiBhbGwgY3VycmVudCB0b3VjaGVzIG9uIHRoZSBzY3JlZW5cbiAqXG4gKiBBIGBnZXN0dXJlU3RhdGVgIG9iamVjdCBoYXMgdGhlIGZvbGxvd2luZzpcbiAqXG4gKiAgLSBgc3RhdGVJRGAgLSBJRCBvZiB0aGUgZ2VzdHVyZVN0YXRlLSBwZXJzaXN0ZWQgYXMgbG9uZyBhcyB0aGVyZSBhdCBsZWFzdFxuICogICAgIG9uZSB0b3VjaCBvbiBzY3JlZW5cbiAqICAtIGBtb3ZlWGAgLSB0aGUgbGF0ZXN0IHNjcmVlbiBjb29yZGluYXRlcyBvZiB0aGUgcmVjZW50bHktbW92ZWQgdG91Y2hcbiAqICAtIGBtb3ZlWWAgLSB0aGUgbGF0ZXN0IHNjcmVlbiBjb29yZGluYXRlcyBvZiB0aGUgcmVjZW50bHktbW92ZWQgdG91Y2hcbiAqICAtIGB4MGAgLSB0aGUgc2NyZWVuIGNvb3JkaW5hdGVzIG9mIHRoZSByZXNwb25kZXIgZ3JhbnRcbiAqICAtIGB5MGAgLSB0aGUgc2NyZWVuIGNvb3JkaW5hdGVzIG9mIHRoZSByZXNwb25kZXIgZ3JhbnRcbiAqICAtIGBkeGAgLSBhY2N1bXVsYXRlZCBkaXN0YW5jZSBvZiB0aGUgZ2VzdHVyZSBzaW5jZSB0aGUgdG91Y2ggc3RhcnRlZFxuICogIC0gYGR5YCAtIGFjY3VtdWxhdGVkIGRpc3RhbmNlIG9mIHRoZSBnZXN0dXJlIHNpbmNlIHRoZSB0b3VjaCBzdGFydGVkXG4gKiAgLSBgdnhgIC0gY3VycmVudCB2ZWxvY2l0eSBvZiB0aGUgZ2VzdHVyZVxuICogIC0gYHZ5YCAtIGN1cnJlbnQgdmVsb2NpdHkgb2YgdGhlIGdlc3R1cmVcbiAqICAtIGBudW1iZXJBY3RpdmVUb3VjaGVzYCAtIE51bWJlciBvZiB0b3VjaGVzIGN1cnJlbnRseSBvbiBzY3JlZW5cbiAqXG4gKiAjIyMgQmFzaWMgVXNhZ2VcbiAqXG4gKiBgYGBcbiAqICAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbigpIHtcbiAqICAgICB0aGlzLl9wYW5SZXNwb25kZXIgPSBQYW5SZXNwb25kZXIuY3JlYXRlKHtcbiAqICAgICAgIC8vIEFzayB0byBiZSB0aGUgcmVzcG9uZGVyOlxuICogICAgICAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcjogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB0cnVlLFxuICogICAgICAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmU6IChldnQsIGdlc3R1cmVTdGF0ZSkgPT4gdHJ1ZSxcbiAqICAgICAgIG9uTW92ZVNob3VsZFNldFBhblJlc3BvbmRlcjogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB0cnVlLFxuICogICAgICAgb25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZTogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB0cnVlLFxuICpcbiAqICAgICAgIG9uUGFuUmVzcG9uZGVyR3JhbnQ6IChldnQsIGdlc3R1cmVTdGF0ZSkgPT4ge1xuICogICAgICAgICAvLyBUaGUgZ2VzdHVyZSBoYXMgc3RhcnRlZC4gU2hvdyB2aXN1YWwgZmVlZGJhY2sgc28gdGhlIHVzZXIga25vd3NcbiAqICAgICAgICAgLy8gd2hhdCBpcyBoYXBwZW5pbmchXG4gKlxuICogICAgICAgICAvLyBnZXN0dXJlU3RhdGUuZHt4LHl9IHdpbGwgYmUgc2V0IHRvIHplcm8gbm93XG4gKiAgICAgICB9LFxuICogICAgICAgb25QYW5SZXNwb25kZXJNb3ZlOiAoZXZ0LCBnZXN0dXJlU3RhdGUpID0+IHtcbiAqICAgICAgICAgLy8gVGhlIG1vc3QgcmVjZW50IG1vdmUgZGlzdGFuY2UgaXMgZ2VzdHVyZVN0YXRlLm1vdmV7WCxZfVxuICpcbiAqICAgICAgICAgLy8gVGhlIGFjY3VtdWxhdGVkIGdlc3R1cmUgZGlzdGFuY2Ugc2luY2UgYmVjb21pbmcgcmVzcG9uZGVyIGlzXG4gKiAgICAgICAgIC8vIGdlc3R1cmVTdGF0ZS5ke3gseX1cbiAqICAgICAgIH0sXG4gKiAgICAgICBvblBhblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdDogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB0cnVlLFxuICogICAgICAgb25QYW5SZXNwb25kZXJSZWxlYXNlOiAoZXZ0LCBnZXN0dXJlU3RhdGUpID0+IHtcbiAqICAgICAgICAgLy8gVGhlIHVzZXIgaGFzIHJlbGVhc2VkIGFsbCB0b3VjaGVzIHdoaWxlIHRoaXMgdmlldyBpcyB0aGVcbiAqICAgICAgICAgLy8gcmVzcG9uZGVyLiBUaGlzIHR5cGljYWxseSBtZWFucyBhIGdlc3R1cmUgaGFzIHN1Y2NlZWRlZFxuICogICAgICAgfSxcbiAqICAgICAgIG9uUGFuUmVzcG9uZGVyVGVybWluYXRlOiAoZXZ0LCBnZXN0dXJlU3RhdGUpID0+IHtcbiAqICAgICAgICAgLy8gQW5vdGhlciBjb21wb25lbnQgaGFzIGJlY29tZSB0aGUgcmVzcG9uZGVyLCBzbyB0aGlzIGdlc3R1cmVcbiAqICAgICAgICAgLy8gc2hvdWxkIGJlIGNhbmNlbGxlZFxuICogICAgICAgfSxcbiAqICAgICAgIG9uU2hvdWxkQmxvY2tOYXRpdmVSZXNwb25kZXI6IChldnQsIGdlc3R1cmVTdGF0ZSkgPT4ge1xuICogICAgICAgICAvLyBSZXR1cm5zIHdoZXRoZXIgdGhpcyBjb21wb25lbnQgc2hvdWxkIGJsb2NrIG5hdGl2ZSBjb21wb25lbnRzIGZyb20gYmVjb21pbmcgdGhlIEpTXG4gKiAgICAgICAgIC8vIHJlc3BvbmRlci4gUmV0dXJucyB0cnVlIGJ5IGRlZmF1bHQuIElzIGN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBvbiBhbmRyb2lkLlxuICogICAgICAgICByZXR1cm4gdHJ1ZTtcbiAqICAgICAgIH0sXG4gKiAgICAgfSk7XG4gKiAgIH0sXG4gKlxuICogICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiAoXG4gKiAgICAgICA8VmlldyB7Li4udGhpcy5fcGFuUmVzcG9uZGVyLnBhbkhhbmRsZXJzfSAvPlxuICogICAgICk7XG4gKiAgIH0sXG4gKlxuICogYGBgXG4gKlxuICogIyMjIFdvcmtpbmcgRXhhbXBsZVxuICpcbiAqIFRvIHNlZSBpdCBpbiBhY3Rpb24sIHRyeSB0aGVcbiAqIFtQYW5SZXNwb25kZXIgZXhhbXBsZSBpbiBSTlRlc3Rlcl0oaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9ibG9iL0hFQUQvcGFja2FnZXMvcm4tdGVzdGVyL2pzL2V4YW1wbGVzL1BhblJlc3BvbmRlci9QYW5SZXNwb25kZXJFeGFtcGxlLmpzKVxuICovXG5cbmV4cG9ydCB0eXBlIFBhblJlc3BvbmRlckdlc3R1cmVTdGF0ZSA9IHtcbiAgLyoqXG4gICAqIElEIG9mIHRoZSBnZXN0dXJlU3RhdGUgLSBwZXJzaXN0ZWQgYXMgbG9uZyBhcyB0aGVyZSBhdCBsZWFzdCBvbmUgdG91Y2ggb24gc2NyZWVuXG4gICAqL1xuICBzdGF0ZUlEOiBudW1iZXIsXG5cbiAgLyoqXG4gICAqIFRoZSBsYXRlc3Qgc2NyZWVuIGNvb3JkaW5hdGVzIG9mIHRoZSByZWNlbnRseS1tb3ZlZCB0b3VjaFxuICAgKi9cbiAgbW92ZVg6IG51bWJlcixcblxuICAvKipcbiAgICogVGhlIGxhdGVzdCBzY3JlZW4gY29vcmRpbmF0ZXMgb2YgdGhlIHJlY2VudGx5LW1vdmVkIHRvdWNoXG4gICAqL1xuICBtb3ZlWTogbnVtYmVyLFxuXG4gIC8qKlxuICAgKiBUaGUgc2NyZWVuIGNvb3JkaW5hdGVzIG9mIHRoZSByZXNwb25kZXIgZ3JhbnRcbiAgICovXG4gIHgwOiBudW1iZXIsXG5cbiAgLyoqXG4gICAqIFRoZSBzY3JlZW4gY29vcmRpbmF0ZXMgb2YgdGhlIHJlc3BvbmRlciBncmFudFxuICAgKi9cbiAgeTA6IG51bWJlcixcblxuICAvKipcbiAgICogQWNjdW11bGF0ZWQgZGlzdGFuY2Ugb2YgdGhlIGdlc3R1cmUgc2luY2UgdGhlIHRvdWNoIHN0YXJ0ZWRcbiAgICovXG4gIGR4OiBudW1iZXIsXG5cbiAgLyoqXG4gICAqIEFjY3VtdWxhdGVkIGRpc3RhbmNlIG9mIHRoZSBnZXN0dXJlIHNpbmNlIHRoZSB0b3VjaCBzdGFydGVkXG4gICAqL1xuICBkeTogbnVtYmVyLFxuXG4gIC8qKlxuICAgKiBDdXJyZW50IHZlbG9jaXR5IG9mIHRoZSBnZXN0dXJlXG4gICAqL1xuICB2eDogbnVtYmVyLFxuXG4gIC8qKlxuICAgKiBDdXJyZW50IHZlbG9jaXR5IG9mIHRoZSBnZXN0dXJlXG4gICAqL1xuICB2eTogbnVtYmVyLFxuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdG91Y2hlcyBjdXJyZW50bHkgb24gc2NyZWVuXG4gICAqL1xuICBudW1iZXJBY3RpdmVUb3VjaGVzOiBudW1iZXIsXG5cbiAgLyoqXG4gICAqIEFsbCBgZ2VzdHVyZVN0YXRlYCBhY2NvdW50cyBmb3IgdGltZVN0YW1wcyB1cCB1bnRpbCB0aGlzIHZhbHVlXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYWNjb3VudHNGb3JNb3Zlc1VwVG86IG51bWJlcixcbn07XG5cbnR5cGUgQWN0aXZlQ2FsbGJhY2sgPSAoXG4gIGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQsXG4gIGdlc3R1cmVTdGF0ZTogUGFuUmVzcG9uZGVyR2VzdHVyZVN0YXRlLFxuKSA9PiBib29sZWFuO1xuXG50eXBlIFBhc3NpdmVDYWxsYmFjayA9IChcbiAgZXZlbnQ6IEdlc3R1cmVSZXNwb25kZXJFdmVudCxcbiAgZ2VzdHVyZVN0YXRlOiBQYW5SZXNwb25kZXJHZXN0dXJlU3RhdGUsXG4pID0+IG1peGVkO1xuXG5leHBvcnQgdHlwZSBHZXN0dXJlUmVzcG9uZGVySGFuZGxlck1ldGhvZHMgPSB7XG4gIG9uTW92ZVNob3VsZFNldFJlc3BvbmRlcjogKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpID0+IGJvb2xlYW4sXG4gIG9uTW92ZVNob3VsZFNldFJlc3BvbmRlckNhcHR1cmU6IChldmVudDogR2VzdHVyZVJlc3BvbmRlckV2ZW50KSA9PiBib29sZWFuLFxuICBvblJlc3BvbmRlckVuZDogKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpID0+IHZvaWQsXG4gIG9uUmVzcG9uZGVyR3JhbnQ6IChldmVudDogR2VzdHVyZVJlc3BvbmRlckV2ZW50KSA9PiBib29sZWFuLFxuICBvblJlc3BvbmRlck1vdmU6IChldmVudDogR2VzdHVyZVJlc3BvbmRlckV2ZW50KSA9PiB2b2lkLFxuICBvblJlc3BvbmRlclJlamVjdDogKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpID0+IHZvaWQsXG4gIG9uUmVzcG9uZGVyUmVsZWFzZTogKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpID0+IHZvaWQsXG4gIG9uUmVzcG9uZGVyU3RhcnQ6IChldmVudDogR2VzdHVyZVJlc3BvbmRlckV2ZW50KSA9PiB2b2lkLFxuICBvblJlc3BvbmRlclRlcm1pbmF0ZTogKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpID0+IHZvaWQsXG4gIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OiAoZXZlbnQ6IEdlc3R1cmVSZXNwb25kZXJFdmVudCkgPT4gYm9vbGVhbixcbiAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcjogKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpID0+IGJvb2xlYW4sXG4gIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXJDYXB0dXJlOiAoZXZlbnQ6IEdlc3R1cmVSZXNwb25kZXJFdmVudCkgPT4gYm9vbGVhbixcbn07XG5cbmV4cG9ydCB0eXBlIFBhblJlc3BvbmRlckNhbGxiYWNrcyA9ICRSZWFkT25seTx7XG4gIG9uTW92ZVNob3VsZFNldFBhblJlc3BvbmRlcj86ID9BY3RpdmVDYWxsYmFjayxcbiAgb25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZT86ID9BY3RpdmVDYWxsYmFjayxcbiAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcj86ID9BY3RpdmVDYWxsYmFjayxcbiAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmU/OiA/QWN0aXZlQ2FsbGJhY2ssXG4gIC8qKlxuICAgKiBUaGUgYm9keSBvZiBgb25SZXNwb25kZXJHcmFudGAgcmV0dXJucyBhIGJvb2wsIGJ1dCB0aGUgdmFzdCBtYWpvcml0eSBvZlxuICAgKiBjYWxsc2l0ZXMgcmV0dXJuIHZvaWQgYW5kIHRoaXMgVE9ETyBub3RpY2UgaXMgZm91bmQgaW4gaXQ6XG4gICAqICAgVE9ETzogdDc0NjcxMjQgaW52ZXN0aWdhdGUgaWYgdGhpcyBjYW4gYmUgcmVtb3ZlZFxuICAgKi9cbiAgb25QYW5SZXNwb25kZXJHcmFudD86ID8oUGFzc2l2ZUNhbGxiYWNrIHwgQWN0aXZlQ2FsbGJhY2spLFxuICBvblBhblJlc3BvbmRlclJlamVjdD86ID9QYXNzaXZlQ2FsbGJhY2ssXG4gIG9uUGFuUmVzcG9uZGVyU3RhcnQ/OiA/UGFzc2l2ZUNhbGxiYWNrLFxuICBvblBhblJlc3BvbmRlckVuZD86ID9QYXNzaXZlQ2FsbGJhY2ssXG4gIG9uUGFuUmVzcG9uZGVyUmVsZWFzZT86ID9QYXNzaXZlQ2FsbGJhY2ssXG4gIG9uUGFuUmVzcG9uZGVyTW92ZT86ID9QYXNzaXZlQ2FsbGJhY2ssXG4gIG9uUGFuUmVzcG9uZGVyVGVybWluYXRlPzogP1Bhc3NpdmVDYWxsYmFjayxcbiAgb25QYW5SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q/OiA/QWN0aXZlQ2FsbGJhY2ssXG4gIG9uU2hvdWxkQmxvY2tOYXRpdmVSZXNwb25kZXI/OiA/QWN0aXZlQ2FsbGJhY2ssXG59PjtcblxuY29uc3QgUGFuUmVzcG9uZGVyID0ge1xuICAvKipcbiAgICpcbiAgICogQSBncmFwaGljYWwgZXhwbGFuYXRpb24gb2YgdGhlIHRvdWNoIGRhdGEgZmxvdzpcbiAgICpcbiAgICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAgICogfCBSZXNwb25kZXJUb3VjaEhpc3RvcnlTdG9yZSB8ICAgICAgICAgICAgIHxUb3VjaEhpc3RvcnlNYXRoICAgICAgICAgICAgICAgIHxcbiAgICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICstLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAgICogfEdsb2JhbCBzdG9yZSBvZiB0b3VjaEhpc3Rvcnl8ICAgICAgICAgICAgIHxBbGxvY2F0aW9uLWxlc3MgbWF0aCB1dGlsICAgICAgIHxcbiAgICogfGluY2x1ZGluZyBhY3RpdmVuZXNzLCBzdGFydCB8ICAgICAgICAgICAgIHxvbiB0b3VjaCBoaXN0b3J5IChjZW50cm9pZHMgICAgIHxcbiAgICogfHBvc2l0aW9uLCBwcmV2L2N1ciBwb3NpdGlvbi58ICAgICAgICAgICAgIHxhbmQgbXVsdGl0b3VjaCBtb3ZlbWVudCBldGMpICAgIHxcbiAgICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogKy0tLS1eLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICstLS0tXi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAgICogICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiAgICAgIHwgKHJlY29yZHMgcmVsZXZhbnQgaGlzdG9yeSAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgfCAgb2YgdG91Y2hlcyByZWxldmFudCBmb3IgICAgICAgICAgICAgICAgIHxcbiAgICogICAgICB8ICBpbXBsZW1lbnRpbmcgaGlnaGVyIGxldmVsICAgICAgICAgICAgICAgfFxuICAgKiAgICAgIHwgIGdlc3R1cmVzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogKy0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICstLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAgICogfCBSZXNwb25kZXJFdmVudFBsdWdpbiAgICAgICB8ICAgICAgICAgICAgIHwgICAgfCAgIFlvdXIgQXBwL0NvbXBvbmVudCAgICAgIHxcbiAgICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICstLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAgICogfE5lZ290aWF0ZXMgd2hpY2ggdmlldyBnZXRzICB8IExvdyBsZXZlbCAgIHwgICAgfCAgICAgICAgICAgICBIaWdoIGxldmVsICAgIHxcbiAgICogfG9uUmVzcG9uZGVyTW92ZSBldmVudHMuICAgICB8IGV2ZW50cyB3LyAgIHwgICstKy0tLS0tLS0rICAgICBldmVudHMgdy8gICAgIHxcbiAgICogfEFsc28gcmVjb3JkcyBoaXN0b3J5IGludG8gICB8IHRvdWNoSGlzdG9yeXwgIHwgICBQYW4gICB8ICAgICBtdWx0aXRvdWNoICsgIHxcbiAgICogfFJlc3BvbmRlclRvdWNoSGlzdG9yeVN0b3JlLiArLS0tLS0tLS0tLS0tLS0tLT5SZXNwb25kZXIrLS0tLS0+IGFjY3VtdWxhdGl2ZXxcbiAgICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rIGF0dGFjaGVkIHRvIHwgIHwgICAgICAgICB8ICAgICBkaXN0YW5jZSBhbmQgIHxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoIGV2ZW50IHwgICstLS0tLS0tLS0rICAgICB2ZWxvY2l0eS4gICAgIHxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAgICpcbiAgICpcbiAgICpcbiAgICogR2VzdHVyZSB0aGF0IGNhbGN1bGF0ZXMgY3VtdWxhdGl2ZSBtb3ZlbWVudCBvdmVyIHRpbWUgaW4gYSB3YXkgdGhhdCBqdXN0XG4gICAqIFwiZG9lcyB0aGUgcmlnaHQgdGhpbmdcIiBmb3IgbXVsdGlwbGUgdG91Y2hlcy4gVGhlIFwicmlnaHQgdGhpbmdcIiBpcyB2ZXJ5XG4gICAqIG51YW5jZWQuIFdoZW4gbW92aW5nIHR3byB0b3VjaGVzIGluIG9wcG9zaXRlIGRpcmVjdGlvbnMsIHRoZSBjdW11bGF0aXZlXG4gICAqIGRpc3RhbmNlIGlzIHplcm8gaW4gZWFjaCBkaW1lbnNpb24uIFdoZW4gdHdvIHRvdWNoZXMgbW92ZSBpbiBwYXJhbGxlbCBmaXZlXG4gICAqIHBpeGVscyBpbiB0aGUgc2FtZSBkaXJlY3Rpb24sIHRoZSBjdW11bGF0aXZlIGRpc3RhbmNlIGlzIGZpdmUsIG5vdCB0ZW4uIElmXG4gICAqIHR3byB0b3VjaGVzIHN0YXJ0LCBvbmUgbW92ZXMgZml2ZSBpbiBhIGRpcmVjdGlvbiwgdGhlbiBzdG9wcyBhbmQgdGhlIG90aGVyXG4gICAqIHRvdWNoIG1vdmVzIGZpdmVzIGluIHRoZSBzYW1lIGRpcmVjdGlvbiwgdGhlIGN1bXVsYXRpdmUgZGlzdGFuY2UgaXMgdGVuLlxuICAgKlxuICAgKiBUaGlzIGxvZ2ljIHJlcXVpcmVzIGEga2luZCBvZiBwcm9jZXNzaW5nIG9mIHRpbWUgXCJjbHVzdGVyc1wiIG9mIHRvdWNoIGV2ZW50c1xuICAgKiBzbyB0aGF0IHR3byB0b3VjaCBtb3ZlcyB0aGF0IGVzc2VudGlhbGx5IG9jY3VyIGluIHBhcmFsbGVsIGJ1dCBtb3ZlIGV2ZXJ5XG4gICAqIG90aGVyIGZyYW1lIHJlc3BlY3RpdmVseSwgYXJlIGNvbnNpZGVyZWQgcGFydCBvZiB0aGUgc2FtZSBtb3ZlbWVudC5cbiAgICpcbiAgICogRXhwbGFuYXRpb24gb2Ygc29tZSBvZiB0aGUgbm9uLW9idmlvdXMgZmllbGRzOlxuICAgKlxuICAgKiAtIG1vdmVYL21vdmVZOiBJZiBubyBtb3ZlIGV2ZW50IGhhcyBiZWVuIG9ic2VydmVkLCB0aGVuIGAobW92ZVgsIG1vdmVZKWAgaXNcbiAgICogICBpbnZhbGlkLiBJZiBhIG1vdmUgZXZlbnQgaGFzIGJlZW4gb2JzZXJ2ZWQsIGAobW92ZVgsIG1vdmVZKWAgaXMgdGhlXG4gICAqICAgY2VudHJvaWQgb2YgdGhlIG1vc3QgcmVjZW50bHkgbW92ZWQgXCJjbHVzdGVyXCIgb2YgYWN0aXZlIHRvdWNoZXMuXG4gICAqICAgKEN1cnJlbnRseSBhbGwgbW92ZSBoYXZlIHRoZSBzYW1lIHRpbWVTdGFtcCwgYnV0IGxhdGVyIHdlIHNob3VsZCBhZGQgc29tZVxuICAgKiAgIHRocmVzaG9sZCBmb3Igd2hhdCBpcyBjb25zaWRlcmVkIHRvIGJlIFwibW92aW5nXCIpLiBJZiBhIHBhbG0gaXNcbiAgICogICBhY2NpZGVudGFsbHkgY291bnRlZCBhcyBhIHRvdWNoLCBidXQgYSBmaW5nZXIgaXMgbW92aW5nIGdyZWF0bHksIHRoZSBwYWxtXG4gICAqICAgd2lsbCBtb3ZlIHNsaWdodGx5LCBidXQgd2Ugb25seSB3YW50IHRvIGNvdW50IHRoZSBzaW5nbGUgbW92aW5nIHRvdWNoLlxuICAgKiAtIHgwL3kwOiBDZW50cm9pZCBsb2NhdGlvbiAobm9uLWN1bXVsYXRpdmUpIGF0IHRoZSB0aW1lIG9mIGJlY29taW5nXG4gICAqICAgcmVzcG9uZGVyLlxuICAgKiAtIGR4L2R5OiBDdW11bGF0aXZlIHRvdWNoIGRpc3RhbmNlIC0gbm90IHRoZSBzYW1lIHRoaW5nIGFzIHN1bSBvZiBlYWNoIHRvdWNoXG4gICAqICAgZGlzdGFuY2UuIEFjY291bnRzIGZvciB0b3VjaCBtb3ZlcyB0aGF0IGFyZSBjbHVzdGVyZWQgdG9nZXRoZXIgaW4gdGltZSxcbiAgICogICBtb3ZpbmcgdGhlIHNhbWUgZGlyZWN0aW9uLiBPbmx5IHZhbGlkIHdoZW4gY3VycmVudGx5IHJlc3BvbmRlciAob3RoZXJ3aXNlLFxuICAgKiAgIGl0IG9ubHkgcmVwcmVzZW50cyB0aGUgZHJhZyBkaXN0YW5jZSBiZWxvdyB0aGUgdGhyZXNob2xkKS5cbiAgICogLSB2eC92eTogVmVsb2NpdHkuXG4gICAqL1xuXG4gIF9pbml0aWFsaXplR2VzdHVyZVN0YXRlKGdlc3R1cmVTdGF0ZTogUGFuUmVzcG9uZGVyR2VzdHVyZVN0YXRlKSB7XG4gICAgZ2VzdHVyZVN0YXRlLm1vdmVYID0gMDtcbiAgICBnZXN0dXJlU3RhdGUubW92ZVkgPSAwO1xuICAgIGdlc3R1cmVTdGF0ZS54MCA9IDA7XG4gICAgZ2VzdHVyZVN0YXRlLnkwID0gMDtcbiAgICBnZXN0dXJlU3RhdGUuZHggPSAwO1xuICAgIGdlc3R1cmVTdGF0ZS5keSA9IDA7XG4gICAgZ2VzdHVyZVN0YXRlLnZ4ID0gMDtcbiAgICBnZXN0dXJlU3RhdGUudnkgPSAwO1xuICAgIGdlc3R1cmVTdGF0ZS5udW1iZXJBY3RpdmVUb3VjaGVzID0gMDtcbiAgICAvLyBBbGwgYGdlc3R1cmVTdGF0ZWAgYWNjb3VudHMgZm9yIHRpbWVTdGFtcHMgdXAgdW50aWw6XG4gICAgZ2VzdHVyZVN0YXRlLl9hY2NvdW50c0Zvck1vdmVzVXBUbyA9IDA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgbnVhbmNlZCBhbmQgaXMgbmVjZXNzYXJ5LiBJdCBpcyBpbmNvcnJlY3QgdG8gY29udGludW91c2x5IHRha2UgYWxsXG4gICAqIGFjdGl2ZSAqYW5kKiByZWNlbnRseSBtb3ZlZCB0b3VjaGVzLCBmaW5kIHRoZSBjZW50cm9pZCwgYW5kIHRyYWNrIGhvdyB0aGF0XG4gICAqIHJlc3VsdCBjaGFuZ2VzIG92ZXIgdGltZS4gSW5zdGVhZCwgd2UgbXVzdCB0YWtlIGFsbCByZWNlbnRseSBtb3ZlZFxuICAgKiB0b3VjaGVzLCBhbmQgY2FsY3VsYXRlIGhvdyB0aGUgY2VudHJvaWQgaGFzIGNoYW5nZWQganVzdCBmb3IgdGhvc2VcbiAgICogcmVjZW50bHkgbW92ZWQgdG91Y2hlcywgYW5kIGFwcGVuZCB0aGF0IGNoYW5nZSB0byBhbiBhY2N1bXVsYXRvci4gVGhpcyBpc1xuICAgKiB0byAoYXQgbGVhc3QpIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBtb3ZpbmcgdGhyZWUgZmluZ2VycywgYW5kXG4gICAqIHRoZW4gb25lIG9mIHRoZSBmaW5nZXJzIHN0b3BzIGJ1dCB0aGUgb3RoZXIgdHdvIGNvbnRpbnVlLlxuICAgKlxuICAgKiBUaGlzIGlzIHZlcnkgZGlmZmVyZW50IHRoYW4gdGFraW5nIGFsbCBvZiB0aGUgcmVjZW50bHkgbW92ZWQgdG91Y2hlcyBhbmRcbiAgICogc3RvcmluZyB0aGVpciBjZW50cm9pZCBhcyBgZHgvZHlgLiBGb3IgY29ycmVjdG5lc3MsIHdlIG11c3QgKmFjY3VtdWxhdGVcbiAgICogY2hhbmdlcyogaW4gdGhlIGNlbnRyb2lkIG9mIHJlY2VudGx5IG1vdmVkIHRvdWNoZXMuXG4gICAqXG4gICAqIFRoZXJlIGlzIGFsc28gc29tZSBudWFuY2Ugd2l0aCBob3cgd2UgaGFuZGxlIG11bHRpcGxlIG1vdmVkIHRvdWNoZXMgaW4gYVxuICAgKiBzaW5nbGUgZXZlbnQuIFdpdGggdGhlIHdheSBgUmVhY3ROYXRpdmVFdmVudEVtaXR0ZXJgIGRpc3BhdGNoZXMgdG91Y2hlcyBhc1xuICAgKiBpbmRpdmlkdWFsIGV2ZW50cywgbXVsdGlwbGUgdG91Y2hlcyBnZW5lcmF0ZSB0d28gJ21vdmUnIGV2ZW50cywgZWFjaCBvZlxuICAgKiB0aGVtIHRyaWdnZXJpbmcgYG9uUmVzcG9uZGVyTW92ZWAuIEJ1dCB3aXRoIHRoZSB3YXkgYFBhblJlc3BvbmRlcmAgd29ya3MsXG4gICAqIGFsbCBvZiB0aGUgZ2VzdHVyZSBpbmZlcmVuY2UgaXMgcGVyZm9ybWVkIG9uIHRoZSBmaXJzdCBkaXNwYXRjaCwgc2luY2UgaXRcbiAgICogbG9va3MgYXQgYWxsIG9mIHRoZSB0b3VjaGVzIChldmVuIHRoZSBvbmVzIGZvciB3aGljaCB0aGVyZSBoYXNuJ3QgYmVlbiBhXG4gICAqIG5hdGl2ZSBkaXNwYXRjaCB5ZXQpLiBUaGVyZWZvcmUsIGBQYW5SZXNwb25kZXJgIGRvZXMgbm90IGNhbGxcbiAgICogYG9uUmVzcG9uZGVyTW92ZWAgcGFzc2VkIHRoZSBmaXJzdCBkaXNwYXRjaC4gVGhpcyBkaXZlcmdlcyBmcm9tIHRoZVxuICAgKiB0eXBpY2FsIHJlc3BvbmRlciBjYWxsYmFjayBwYXR0ZXJuICh3aXRob3V0IHVzaW5nIGBQYW5SZXNwb25kZXJgKSwgYnV0XG4gICAqIGF2b2lkcyBtb3JlIGRpc3BhdGNoZXMgdGhhbiBuZWNlc3NhcnkuXG4gICAqL1xuICBfdXBkYXRlR2VzdHVyZVN0YXRlT25Nb3ZlKFxuICAgIGdlc3R1cmVTdGF0ZTogUGFuUmVzcG9uZGVyR2VzdHVyZVN0YXRlLFxuICAgIHRvdWNoSGlzdG9yeTogR2VzdHVyZVJlc3BvbmRlckV2ZW50Wyd0b3VjaEhpc3RvcnknXSxcbiAgKSB7XG4gICAgZ2VzdHVyZVN0YXRlLm51bWJlckFjdGl2ZVRvdWNoZXMgPSB0b3VjaEhpc3RvcnkubnVtYmVyQWN0aXZlVG91Y2hlcztcbiAgICBnZXN0dXJlU3RhdGUubW92ZVggPSBjdXJyZW50Q2VudHJvaWRYT2ZUb3VjaGVzQ2hhbmdlZEFmdGVyKFxuICAgICAgdG91Y2hIaXN0b3J5LFxuICAgICAgZ2VzdHVyZVN0YXRlLl9hY2NvdW50c0Zvck1vdmVzVXBUbyxcbiAgICApO1xuICAgIGdlc3R1cmVTdGF0ZS5tb3ZlWSA9IGN1cnJlbnRDZW50cm9pZFlPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIoXG4gICAgICB0b3VjaEhpc3RvcnksXG4gICAgICBnZXN0dXJlU3RhdGUuX2FjY291bnRzRm9yTW92ZXNVcFRvLFxuICAgICk7XG4gICAgY29uc3QgbW92ZWRBZnRlciA9IGdlc3R1cmVTdGF0ZS5fYWNjb3VudHNGb3JNb3Zlc1VwVG87XG4gICAgY29uc3QgcHJldlggPSBwcmV2aW91c0NlbnRyb2lkWE9mVG91Y2hlc0NoYW5nZWRBZnRlcihcbiAgICAgIHRvdWNoSGlzdG9yeSxcbiAgICAgIG1vdmVkQWZ0ZXIsXG4gICAgKTtcbiAgICBjb25zdCB4ID0gY3VycmVudENlbnRyb2lkWE9mVG91Y2hlc0NoYW5nZWRBZnRlcih0b3VjaEhpc3RvcnksIG1vdmVkQWZ0ZXIpO1xuICAgIGNvbnN0IHByZXZZID0gcHJldmlvdXNDZW50cm9pZFlPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIoXG4gICAgICB0b3VjaEhpc3RvcnksXG4gICAgICBtb3ZlZEFmdGVyLFxuICAgICk7XG4gICAgY29uc3QgeSA9IGN1cnJlbnRDZW50cm9pZFlPZlRvdWNoZXNDaGFuZ2VkQWZ0ZXIodG91Y2hIaXN0b3J5LCBtb3ZlZEFmdGVyKTtcbiAgICBjb25zdCBuZXh0RFggPSBnZXN0dXJlU3RhdGUuZHggKyAoeCAtIHByZXZYKTtcbiAgICBjb25zdCBuZXh0RFkgPSBnZXN0dXJlU3RhdGUuZHkgKyAoeSAtIHByZXZZKTtcblxuICAgIC8vIFRPRE86IFRoaXMgbXVzdCBiZSBmaWx0ZXJlZCBpbnRlbGxpZ2VudGx5LlxuICAgIGNvbnN0IGR0ID1cbiAgICAgIHRvdWNoSGlzdG9yeS5tb3N0UmVjZW50VGltZVN0YW1wIC0gZ2VzdHVyZVN0YXRlLl9hY2NvdW50c0Zvck1vdmVzVXBUbztcbiAgICBnZXN0dXJlU3RhdGUudnggPSAobmV4dERYIC0gZ2VzdHVyZVN0YXRlLmR4KSAvIGR0O1xuICAgIGdlc3R1cmVTdGF0ZS52eSA9IChuZXh0RFkgLSBnZXN0dXJlU3RhdGUuZHkpIC8gZHQ7XG5cbiAgICBnZXN0dXJlU3RhdGUuZHggPSBuZXh0RFg7XG4gICAgZ2VzdHVyZVN0YXRlLmR5ID0gbmV4dERZO1xuICAgIGdlc3R1cmVTdGF0ZS5fYWNjb3VudHNGb3JNb3Zlc1VwVG8gPSB0b3VjaEhpc3RvcnkubW9zdFJlY2VudFRpbWVTdGFtcDtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBFbmhhbmNlZCB2ZXJzaW9ucyBvZiBhbGwgb2YgdGhlIHJlc3BvbmRlciBjYWxsYmFja3NcbiAgICogdGhhdCBwcm92aWRlIG5vdCBvbmx5IHRoZSB0eXBpY2FsIGBSZXNwb25kZXJTeW50aGV0aWNFdmVudGAsIGJ1dCBhbHNvIHRoZVxuICAgKiBgUGFuUmVzcG9uZGVyYCBnZXN0dXJlIHN0YXRlLiAgU2ltcGx5IHJlcGxhY2UgdGhlIHdvcmQgYFJlc3BvbmRlcmAgd2l0aFxuICAgKiBgUGFuUmVzcG9uZGVyYCBpbiBlYWNoIG9mIHRoZSB0eXBpY2FsIGBvblJlc3BvbmRlcipgIGNhbGxiYWNrcy4gRm9yXG4gICAqIGV4YW1wbGUsIHRoZSBgY29uZmlnYCBvYmplY3Qgd291bGQgbG9vayBsaWtlOlxuICAgKlxuICAgKiAgLSBgb25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyOiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uTW92ZVNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmU6IChlLCBnZXN0dXJlU3RhdGUpID0+IHsuLi59YFxuICAgKiAgLSBgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcjogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZTogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblBhblJlc3BvbmRlclJlamVjdDogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblBhblJlc3BvbmRlckdyYW50OiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uUGFuUmVzcG9uZGVyU3RhcnQ6IChlLCBnZXN0dXJlU3RhdGUpID0+IHsuLi59YFxuICAgKiAgLSBgb25QYW5SZXNwb25kZXJFbmQ6IChlLCBnZXN0dXJlU3RhdGUpID0+IHsuLi59YFxuICAgKiAgLSBgb25QYW5SZXNwb25kZXJSZWxlYXNlOiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICogIC0gYG9uUGFuUmVzcG9uZGVyTW92ZTogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblBhblJlc3BvbmRlclRlcm1pbmF0ZTogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblBhblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdDogKGUsIGdlc3R1cmVTdGF0ZSkgPT4gey4uLn1gXG4gICAqICAtIGBvblNob3VsZEJsb2NrTmF0aXZlUmVzcG9uZGVyOiAoZSwgZ2VzdHVyZVN0YXRlKSA9PiB7Li4ufWBcbiAgICpcbiAgICogIEluIGdlbmVyYWwsIGZvciBldmVudHMgdGhhdCBoYXZlIGNhcHR1cmUgZXF1aXZhbGVudHMsIHdlIHVwZGF0ZSB0aGVcbiAgICogIGdlc3R1cmVTdGF0ZSBvbmNlIGluIHRoZSBjYXB0dXJlIHBoYXNlIGFuZCBjYW4gdXNlIGl0IGluIHRoZSBidWJibGUgcGhhc2VcbiAgICogIGFzIHdlbGwuXG4gICAqXG4gICAqICBCZSBjYXJlZnVsIHdpdGggb25TdGFydFNob3VsZCogY2FsbGJhY2tzLiBUaGV5IG9ubHkgcmVmbGVjdCB1cGRhdGVkXG4gICAqICBgZ2VzdHVyZVN0YXRlYCBmb3Igc3RhcnQvZW5kIGV2ZW50cyB0aGF0IGJ1YmJsZS9jYXB0dXJlIHRvIHRoZSBOb2RlLlxuICAgKiAgT25jZSB0aGUgbm9kZSBpcyB0aGUgcmVzcG9uZGVyLCB5b3UgY2FuIHJlbHkgb24gZXZlcnkgc3RhcnQvZW5kIGV2ZW50XG4gICAqICBiZWluZyBwcm9jZXNzZWQgYnkgdGhlIGdlc3R1cmUgYW5kIGBnZXN0dXJlU3RhdGVgIGJlaW5nIHVwZGF0ZWRcbiAgICogIGFjY29yZGluZ2x5LiAobnVtYmVyQWN0aXZlVG91Y2hlcykgbWF5IG5vdCBiZSB0b3RhbGx5IGFjY3VyYXRlIHVubGVzcyB5b3VcbiAgICogIGFyZSB0aGUgcmVzcG9uZGVyLlxuICAgKi9cbiAgY3JlYXRlKGNvbmZpZzogUGFuUmVzcG9uZGVyQ2FsbGJhY2tzKToge1xuICAgIGdldEludGVyYWN0aW9uSGFuZGxlOiAoKSA9PiA/bnVtYmVyLFxuICAgIHBhbkhhbmRsZXJzOiBHZXN0dXJlUmVzcG9uZGVySGFuZGxlck1ldGhvZHMsXG4gIH0ge1xuICAgIGNvbnN0IGludGVyYWN0aW9uU3RhdGUgPSB7XG4gICAgICBoYW5kbGU6IChudWxsOiA/bnVtYmVyKSxcbiAgICB9O1xuICAgIGNvbnN0IGdlc3R1cmVTdGF0ZTogUGFuUmVzcG9uZGVyR2VzdHVyZVN0YXRlID0ge1xuICAgICAgLy8gVXNlZnVsIGZvciBkZWJ1Z2dpbmdcbiAgICAgIHN0YXRlSUQ6IE1hdGgucmFuZG9tKCksXG4gICAgICBtb3ZlWDogMCxcbiAgICAgIG1vdmVZOiAwLFxuICAgICAgeDA6IDAsXG4gICAgICB5MDogMCxcbiAgICAgIGR4OiAwLFxuICAgICAgZHk6IDAsXG4gICAgICB2eDogMCxcbiAgICAgIHZ5OiAwLFxuICAgICAgbnVtYmVyQWN0aXZlVG91Y2hlczogMCxcbiAgICAgIF9hY2NvdW50c0Zvck1vdmVzVXBUbzogMCxcbiAgICB9O1xuICAgIGNvbnN0IHBhbkhhbmRsZXJzID0ge1xuICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcihldmVudDogR2VzdHVyZVJlc3BvbmRlckV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb25maWcub25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlciA9PSBudWxsXG4gICAgICAgICAgPyBmYWxzZVxuICAgICAgICAgIDogY29uZmlnLm9uU3RhcnRTaG91bGRTZXRQYW5SZXNwb25kZXIoZXZlbnQsIGdlc3R1cmVTdGF0ZSk7XG4gICAgICB9LFxuICAgICAgb25Nb3ZlU2hvdWxkU2V0UmVzcG9uZGVyKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5vbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXIgPT0gbnVsbFxuICAgICAgICAgID8gZmFsc2VcbiAgICAgICAgICA6IGNvbmZpZy5vbk1vdmVTaG91bGRTZXRQYW5SZXNwb25kZXIoZXZlbnQsIGdlc3R1cmVTdGF0ZSk7XG4gICAgICB9LFxuICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlckNhcHR1cmUoZXZlbnQ6IEdlc3R1cmVSZXNwb25kZXJFdmVudCk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBUT0RPOiBBY3R1YWxseSwgd2Ugc2hvdWxkIHJlaW5pdGlhbGl6ZSB0aGUgc3RhdGUgYW55IHRpbWVcbiAgICAgICAgLy8gdG91Y2hlcy5sZW5ndGggaW5jcmVhc2VzIGZyb20gMCBhY3RpdmUgdG8gPiAwIGFjdGl2ZS5cbiAgICAgICAgaWYgKGV2ZW50Lm5hdGl2ZUV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgUGFuUmVzcG9uZGVyLl9pbml0aWFsaXplR2VzdHVyZVN0YXRlKGdlc3R1cmVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2VzdHVyZVN0YXRlLm51bWJlckFjdGl2ZVRvdWNoZXMgPVxuICAgICAgICAgIGV2ZW50LnRvdWNoSGlzdG9yeS5udW1iZXJBY3RpdmVUb3VjaGVzO1xuICAgICAgICByZXR1cm4gY29uZmlnLm9uU3RhcnRTaG91bGRTZXRQYW5SZXNwb25kZXJDYXB0dXJlICE9IG51bGxcbiAgICAgICAgICA/IGNvbmZpZy5vblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZShldmVudCwgZ2VzdHVyZVN0YXRlKVxuICAgICAgICAgIDogZmFsc2U7XG4gICAgICB9LFxuXG4gICAgICBvbk1vdmVTaG91bGRTZXRSZXNwb25kZXJDYXB0dXJlKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgdG91Y2hIaXN0b3J5ID0gZXZlbnQudG91Y2hIaXN0b3J5O1xuICAgICAgICAvLyBSZXNwb25kZXIgc3lzdGVtIGluY29ycmVjdGx5IGRpc3BhdGNoZXMgc2hvdWxkKiB0byBjdXJyZW50IHJlc3BvbmRlclxuICAgICAgICAvLyBGaWx0ZXIgb3V0IGFueSB0b3VjaCBtb3ZlcyBwYXN0IHRoZSBmaXJzdCBvbmUgLSB3ZSB3b3VsZCBoYXZlXG4gICAgICAgIC8vIGFscmVhZHkgcHJvY2Vzc2VkIG11bHRpLXRvdWNoIGdlb21ldHJ5IGR1cmluZyB0aGUgZmlyc3QgZXZlbnQuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBnZXN0dXJlU3RhdGUuX2FjY291bnRzRm9yTW92ZXNVcFRvID09PVxuICAgICAgICAgIHRvdWNoSGlzdG9yeS5tb3N0UmVjZW50VGltZVN0YW1wXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBQYW5SZXNwb25kZXIuX3VwZGF0ZUdlc3R1cmVTdGF0ZU9uTW92ZShnZXN0dXJlU3RhdGUsIHRvdWNoSGlzdG9yeSk7XG4gICAgICAgIHJldHVybiBjb25maWcub25Nb3ZlU2hvdWxkU2V0UGFuUmVzcG9uZGVyQ2FwdHVyZVxuICAgICAgICAgID8gY29uZmlnLm9uTW92ZVNob3VsZFNldFBhblJlc3BvbmRlckNhcHR1cmUoZXZlbnQsIGdlc3R1cmVTdGF0ZSlcbiAgICAgICAgICA6IGZhbHNlO1xuICAgICAgfSxcblxuICAgICAgb25SZXNwb25kZXJHcmFudChldmVudDogR2VzdHVyZVJlc3BvbmRlckV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghaW50ZXJhY3Rpb25TdGF0ZS5oYW5kbGUpIHtcbiAgICAgICAgICBpbnRlcmFjdGlvblN0YXRlLmhhbmRsZSA9XG4gICAgICAgICAgICBJbnRlcmFjdGlvbk1hbmFnZXIuY3JlYXRlSW50ZXJhY3Rpb25IYW5kbGUoKTtcbiAgICAgICAgfVxuICAgICAgICBnZXN0dXJlU3RhdGUueDAgPSBjdXJyZW50Q2VudHJvaWRYKGV2ZW50LnRvdWNoSGlzdG9yeSk7XG4gICAgICAgIGdlc3R1cmVTdGF0ZS55MCA9IGN1cnJlbnRDZW50cm9pZFkoZXZlbnQudG91Y2hIaXN0b3J5KTtcbiAgICAgICAgZ2VzdHVyZVN0YXRlLmR4ID0gMDtcbiAgICAgICAgZ2VzdHVyZVN0YXRlLmR5ID0gMDtcbiAgICAgICAgaWYgKGNvbmZpZy5vblBhblJlc3BvbmRlckdyYW50KSB7XG4gICAgICAgICAgY29uZmlnLm9uUGFuUmVzcG9uZGVyR3JhbnQoZXZlbnQsIGdlc3R1cmVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogdDc0NjcxMjQgaW52ZXN0aWdhdGUgaWYgdGhpcyBjYW4gYmUgcmVtb3ZlZFxuICAgICAgICByZXR1cm4gY29uZmlnLm9uU2hvdWxkQmxvY2tOYXRpdmVSZXNwb25kZXIgPT0gbnVsbFxuICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgIDogY29uZmlnLm9uU2hvdWxkQmxvY2tOYXRpdmVSZXNwb25kZXIoZXZlbnQsIGdlc3R1cmVTdGF0ZSk7XG4gICAgICB9LFxuXG4gICAgICBvblJlc3BvbmRlclJlamVjdChldmVudDogR2VzdHVyZVJlc3BvbmRlckV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFySW50ZXJhY3Rpb25IYW5kbGUoXG4gICAgICAgICAgaW50ZXJhY3Rpb25TdGF0ZSxcbiAgICAgICAgICBjb25maWcub25QYW5SZXNwb25kZXJSZWplY3QsXG4gICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgZ2VzdHVyZVN0YXRlLFxuICAgICAgICApO1xuICAgICAgfSxcblxuICAgICAgb25SZXNwb25kZXJSZWxlYXNlKGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY2xlYXJJbnRlcmFjdGlvbkhhbmRsZShcbiAgICAgICAgICBpbnRlcmFjdGlvblN0YXRlLFxuICAgICAgICAgIGNvbmZpZy5vblBhblJlc3BvbmRlclJlbGVhc2UsXG4gICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgZ2VzdHVyZVN0YXRlLFxuICAgICAgICApO1xuICAgICAgICBQYW5SZXNwb25kZXIuX2luaXRpYWxpemVHZXN0dXJlU3RhdGUoZ2VzdHVyZVN0YXRlKTtcbiAgICAgIH0sXG5cbiAgICAgIG9uUmVzcG9uZGVyU3RhcnQoZXZlbnQ6IEdlc3R1cmVSZXNwb25kZXJFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCB0b3VjaEhpc3RvcnkgPSBldmVudC50b3VjaEhpc3Rvcnk7XG4gICAgICAgIGdlc3R1cmVTdGF0ZS5udW1iZXJBY3RpdmVUb3VjaGVzID0gdG91Y2hIaXN0b3J5Lm51bWJlckFjdGl2ZVRvdWNoZXM7XG4gICAgICAgIGlmIChjb25maWcub25QYW5SZXNwb25kZXJTdGFydCkge1xuICAgICAgICAgIGNvbmZpZy5vblBhblJlc3BvbmRlclN0YXJ0KGV2ZW50LCBnZXN0dXJlU3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBvblJlc3BvbmRlck1vdmUoZXZlbnQ6IEdlc3R1cmVSZXNwb25kZXJFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCB0b3VjaEhpc3RvcnkgPSBldmVudC50b3VjaEhpc3Rvcnk7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgdGhlIGRpc3BhdGNoIG9mIHR3byB0b3VjaCBtb3ZlcyB3aGVuIHRoZXJlIGFyZSB0d29cbiAgICAgICAgLy8gc2ltdWx0YW5lb3VzbHkgY2hhbmdlZCB0b3VjaGVzLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2VzdHVyZVN0YXRlLl9hY2NvdW50c0Zvck1vdmVzVXBUbyA9PT1cbiAgICAgICAgICB0b3VjaEhpc3RvcnkubW9zdFJlY2VudFRpbWVTdGFtcFxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRmlsdGVyIG91dCBhbnkgdG91Y2ggbW92ZXMgcGFzdCB0aGUgZmlyc3Qgb25lIC0gd2Ugd291bGQgaGF2ZVxuICAgICAgICAvLyBhbHJlYWR5IHByb2Nlc3NlZCBtdWx0aS10b3VjaCBnZW9tZXRyeSBkdXJpbmcgdGhlIGZpcnN0IGV2ZW50LlxuICAgICAgICBQYW5SZXNwb25kZXIuX3VwZGF0ZUdlc3R1cmVTdGF0ZU9uTW92ZShnZXN0dXJlU3RhdGUsIHRvdWNoSGlzdG9yeSk7XG4gICAgICAgIGlmIChjb25maWcub25QYW5SZXNwb25kZXJNb3ZlKSB7XG4gICAgICAgICAgY29uZmlnLm9uUGFuUmVzcG9uZGVyTW92ZShldmVudCwgZ2VzdHVyZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgb25SZXNwb25kZXJFbmQoZXZlbnQ6IEdlc3R1cmVSZXNwb25kZXJFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCB0b3VjaEhpc3RvcnkgPSBldmVudC50b3VjaEhpc3Rvcnk7XG4gICAgICAgIGdlc3R1cmVTdGF0ZS5udW1iZXJBY3RpdmVUb3VjaGVzID0gdG91Y2hIaXN0b3J5Lm51bWJlckFjdGl2ZVRvdWNoZXM7XG4gICAgICAgIGNsZWFySW50ZXJhY3Rpb25IYW5kbGUoXG4gICAgICAgICAgaW50ZXJhY3Rpb25TdGF0ZSxcbiAgICAgICAgICBjb25maWcub25QYW5SZXNwb25kZXJFbmQsXG4gICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgZ2VzdHVyZVN0YXRlLFxuICAgICAgICApO1xuICAgICAgfSxcblxuICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGUoZXZlbnQ6IEdlc3R1cmVSZXNwb25kZXJFdmVudCk6IHZvaWQge1xuICAgICAgICBjbGVhckludGVyYWN0aW9uSGFuZGxlKFxuICAgICAgICAgIGludGVyYWN0aW9uU3RhdGUsXG4gICAgICAgICAgY29uZmlnLm9uUGFuUmVzcG9uZGVyVGVybWluYXRlLFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIGdlc3R1cmVTdGF0ZSxcbiAgICAgICAgKTtcbiAgICAgICAgUGFuUmVzcG9uZGVyLl9pbml0aWFsaXplR2VzdHVyZVN0YXRlKGdlc3R1cmVTdGF0ZSk7XG4gICAgICB9LFxuXG4gICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdChldmVudDogR2VzdHVyZVJlc3BvbmRlckV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb25maWcub25QYW5SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QgPT0gbnVsbFxuICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgIDogY29uZmlnLm9uUGFuUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0KGV2ZW50LCBnZXN0dXJlU3RhdGUpO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICBwYW5IYW5kbGVycyxcbiAgICAgIGdldEludGVyYWN0aW9uSGFuZGxlKCk6ID9udW1iZXIge1xuICAgICAgICByZXR1cm4gaW50ZXJhY3Rpb25TdGF0ZS5oYW5kbGU7XG4gICAgICB9LFxuICAgIH07XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBjbGVhckludGVyYWN0aW9uSGFuZGxlKFxuICBpbnRlcmFjdGlvblN0YXRlOiB7aGFuZGxlOiA/bnVtYmVyLCAuLi59LFxuICBjYWxsYmFjazogPyhBY3RpdmVDYWxsYmFjayB8IFBhc3NpdmVDYWxsYmFjayksXG4gIGV2ZW50OiBHZXN0dXJlUmVzcG9uZGVyRXZlbnQsXG4gIGdlc3R1cmVTdGF0ZTogUGFuUmVzcG9uZGVyR2VzdHVyZVN0YXRlLFxuKSB7XG4gIGlmIChpbnRlcmFjdGlvblN0YXRlLmhhbmRsZSkge1xuICAgIEludGVyYWN0aW9uTWFuYWdlci5jbGVhckludGVyYWN0aW9uSGFuZGxlKGludGVyYWN0aW9uU3RhdGUuaGFuZGxlKTtcbiAgICBpbnRlcmFjdGlvblN0YXRlLmhhbmRsZSA9IG51bGw7XG4gIH1cbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2soZXZlbnQsIGdlc3R1cmVTdGF0ZSk7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgUGFuUmVzcG9uZGVySW5zdGFuY2UgPSBSZXR1cm5UeXBlPCh0eXBlb2YgUGFuUmVzcG9uZGVyKVsnY3JlYXRlJ10+O1xuXG5leHBvcnQgZGVmYXVsdCBQYW5SZXNwb25kZXI7XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUNBLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLE9BQUE7QUFJYixJQUFNQyxrQkFBa0IsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUNGLE9BQU87QUFDbEUsSUFBTUcsZ0JBQWdCLEdBQUdELE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDRixPQUFPO0FBRTlELElBQU1JLHFDQUFxQyxHQUN6Q0QsZ0JBQWdCLENBQUNDLHFDQUFxQztBQUN4RCxJQUFNQyxxQ0FBcUMsR0FDekNGLGdCQUFnQixDQUFDRSxxQ0FBcUM7QUFDeEQsSUFBTUMsc0NBQXNDLEdBQzFDSCxnQkFBZ0IsQ0FBQ0csc0NBQXNDO0FBQ3pELElBQU1DLHNDQUFzQyxHQUMxQ0osZ0JBQWdCLENBQUNJLHNDQUFzQztBQUN6RCxJQUFNQyxnQkFBZ0IsR0FBR0wsZ0JBQWdCLENBQUNLLGdCQUFnQjtBQUMxRCxJQUFNQyxnQkFBZ0IsR0FBR04sZ0JBQWdCLENBQUNNLGdCQUFnQjtBQTZNMUQsSUFBTUMsWUFBWSxHQUFHO0VBZ0VuQkMsdUJBQXVCLFdBQXZCQSx1QkFBdUJBLENBQUNDLFlBQXNDLEVBQUU7SUFDOURBLFlBQVksQ0FBQ0MsS0FBSyxHQUFHLENBQUM7SUFDdEJELFlBQVksQ0FBQ0UsS0FBSyxHQUFHLENBQUM7SUFDdEJGLFlBQVksQ0FBQ0csRUFBRSxHQUFHLENBQUM7SUFDbkJILFlBQVksQ0FBQ0ksRUFBRSxHQUFHLENBQUM7SUFDbkJKLFlBQVksQ0FBQ0ssRUFBRSxHQUFHLENBQUM7SUFDbkJMLFlBQVksQ0FBQ00sRUFBRSxHQUFHLENBQUM7SUFDbkJOLFlBQVksQ0FBQ08sRUFBRSxHQUFHLENBQUM7SUFDbkJQLFlBQVksQ0FBQ1EsRUFBRSxHQUFHLENBQUM7SUFDbkJSLFlBQVksQ0FBQ1MsbUJBQW1CLEdBQUcsQ0FBQztJQUVwQ1QsWUFBWSxDQUFDVSxxQkFBcUIsR0FBRyxDQUFDO0VBQ3hDLENBQUM7RUEwQkRDLHlCQUF5QixXQUF6QkEseUJBQXlCQSxDQUN2QlgsWUFBc0MsRUFDdENZLFlBQW1ELEVBQ25EO0lBQ0FaLFlBQVksQ0FBQ1MsbUJBQW1CLEdBQUdHLFlBQVksQ0FBQ0gsbUJBQW1CO0lBQ25FVCxZQUFZLENBQUNDLEtBQUssR0FBR1QscUNBQXFDLENBQ3hEb0IsWUFBWSxFQUNaWixZQUFZLENBQUNVLHFCQUNmLENBQUM7SUFDRFYsWUFBWSxDQUFDRSxLQUFLLEdBQUdULHFDQUFxQyxDQUN4RG1CLFlBQVksRUFDWlosWUFBWSxDQUFDVSxxQkFDZixDQUFDO0lBQ0QsSUFBTUcsVUFBVSxHQUFHYixZQUFZLENBQUNVLHFCQUFxQjtJQUNyRCxJQUFNSSxLQUFLLEdBQUdwQixzQ0FBc0MsQ0FDbERrQixZQUFZLEVBQ1pDLFVBQ0YsQ0FBQztJQUNELElBQU1FLENBQUMsR0FBR3ZCLHFDQUFxQyxDQUFDb0IsWUFBWSxFQUFFQyxVQUFVLENBQUM7SUFDekUsSUFBTUcsS0FBSyxHQUFHckIsc0NBQXNDLENBQ2xEaUIsWUFBWSxFQUNaQyxVQUNGLENBQUM7SUFDRCxJQUFNSSxDQUFDLEdBQUd4QixxQ0FBcUMsQ0FBQ21CLFlBQVksRUFBRUMsVUFBVSxDQUFDO0lBQ3pFLElBQU1LLE1BQU0sR0FBR2xCLFlBQVksQ0FBQ0ssRUFBRSxJQUFJVSxDQUFDLEdBQUdELEtBQUssQ0FBQztJQUM1QyxJQUFNSyxNQUFNLEdBQUduQixZQUFZLENBQUNNLEVBQUUsSUFBSVcsQ0FBQyxHQUFHRCxLQUFLLENBQUM7SUFHNUMsSUFBTUksRUFBRSxHQUNOUixZQUFZLENBQUNTLG1CQUFtQixHQUFHckIsWUFBWSxDQUFDVSxxQkFBcUI7SUFDdkVWLFlBQVksQ0FBQ08sRUFBRSxHQUFHLENBQUNXLE1BQU0sR0FBR2xCLFlBQVksQ0FBQ0ssRUFBRSxJQUFJZSxFQUFFO0lBQ2pEcEIsWUFBWSxDQUFDUSxFQUFFLEdBQUcsQ0FBQ1csTUFBTSxHQUFHbkIsWUFBWSxDQUFDTSxFQUFFLElBQUljLEVBQUU7SUFFakRwQixZQUFZLENBQUNLLEVBQUUsR0FBR2EsTUFBTTtJQUN4QmxCLFlBQVksQ0FBQ00sRUFBRSxHQUFHYSxNQUFNO0lBQ3hCbkIsWUFBWSxDQUFDVSxxQkFBcUIsR0FBR0UsWUFBWSxDQUFDUyxtQkFBbUI7RUFDdkUsQ0FBQztFQWtDREMsTUFBTSxXQUFOQSxNQUFNQSxDQUFDQyxNQUE2QixFQUdsQztJQUNBLElBQU1DLGdCQUFnQixHQUFHO01BQ3ZCQyxNQUFNLEVBQUc7SUFDWCxDQUFDO0lBQ0QsSUFBTXpCLFlBQXNDLEdBQUc7TUFFN0MwQixPQUFPLEVBQUVDLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUM7TUFDdEIzQixLQUFLLEVBQUUsQ0FBQztNQUNSQyxLQUFLLEVBQUUsQ0FBQztNQUNSQyxFQUFFLEVBQUUsQ0FBQztNQUNMQyxFQUFFLEVBQUUsQ0FBQztNQUNMQyxFQUFFLEVBQUUsQ0FBQztNQUNMQyxFQUFFLEVBQUUsQ0FBQztNQUNMQyxFQUFFLEVBQUUsQ0FBQztNQUNMQyxFQUFFLEVBQUUsQ0FBQztNQUNMQyxtQkFBbUIsRUFBRSxDQUFDO01BQ3RCQyxxQkFBcUIsRUFBRTtJQUN6QixDQUFDO0lBQ0QsSUFBTW1CLFdBQVcsR0FBRztNQUNsQkMseUJBQXlCLFdBQXpCQSx5QkFBeUJBLENBQUNDLEtBQTRCLEVBQVc7UUFDL0QsT0FBT1IsTUFBTSxDQUFDUyw0QkFBNEIsSUFBSSxJQUFJLEdBQzlDLEtBQUssR0FDTFQsTUFBTSxDQUFDUyw0QkFBNEIsQ0FBQ0QsS0FBSyxFQUFFL0IsWUFBWSxDQUFDO01BQzlELENBQUM7TUFDRGlDLHdCQUF3QixXQUF4QkEsd0JBQXdCQSxDQUFDRixLQUE0QixFQUFXO1FBQzlELE9BQU9SLE1BQU0sQ0FBQ1csMkJBQTJCLElBQUksSUFBSSxHQUM3QyxLQUFLLEdBQ0xYLE1BQU0sQ0FBQ1csMkJBQTJCLENBQUNILEtBQUssRUFBRS9CLFlBQVksQ0FBQztNQUM3RCxDQUFDO01BQ0RtQyxnQ0FBZ0MsV0FBaENBLGdDQUFnQ0EsQ0FBQ0osS0FBNEIsRUFBVztRQUd0RSxJQUFJQSxLQUFLLENBQUNLLFdBQVcsQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1VBQzFDeEMsWUFBWSxDQUFDQyx1QkFBdUIsQ0FBQ0MsWUFBWSxDQUFDO1FBQ3BEO1FBQ0FBLFlBQVksQ0FBQ1MsbUJBQW1CLEdBQzlCc0IsS0FBSyxDQUFDbkIsWUFBWSxDQUFDSCxtQkFBbUI7UUFDeEMsT0FBT2MsTUFBTSxDQUFDZ0IsbUNBQW1DLElBQUksSUFBSSxHQUNyRGhCLE1BQU0sQ0FBQ2dCLG1DQUFtQyxDQUFDUixLQUFLLEVBQUUvQixZQUFZLENBQUMsR0FDL0QsS0FBSztNQUNYLENBQUM7TUFFRHdDLCtCQUErQixXQUEvQkEsK0JBQStCQSxDQUFDVCxLQUE0QixFQUFXO1FBQ3JFLElBQU1uQixZQUFZLEdBQUdtQixLQUFLLENBQUNuQixZQUFZO1FBSXZDLElBQ0VaLFlBQVksQ0FBQ1UscUJBQXFCLEtBQ2xDRSxZQUFZLENBQUNTLG1CQUFtQixFQUNoQztVQUNBLE9BQU8sS0FBSztRQUNkO1FBQ0F2QixZQUFZLENBQUNhLHlCQUF5QixDQUFDWCxZQUFZLEVBQUVZLFlBQVksQ0FBQztRQUNsRSxPQUFPVyxNQUFNLENBQUNrQixrQ0FBa0MsR0FDNUNsQixNQUFNLENBQUNrQixrQ0FBa0MsQ0FBQ1YsS0FBSyxFQUFFL0IsWUFBWSxDQUFDLEdBQzlELEtBQUs7TUFDWCxDQUFDO01BRUQwQyxnQkFBZ0IsV0FBaEJBLGdCQUFnQkEsQ0FBQ1gsS0FBNEIsRUFBVztRQUN0RCxJQUFJLENBQUNQLGdCQUFnQixDQUFDQyxNQUFNLEVBQUU7VUFDNUJELGdCQUFnQixDQUFDQyxNQUFNLEdBQ3JCcEMsa0JBQWtCLENBQUNzRCx1QkFBdUIsQ0FBQyxDQUFDO1FBQ2hEO1FBQ0EzQyxZQUFZLENBQUNHLEVBQUUsR0FBR1AsZ0JBQWdCLENBQUNtQyxLQUFLLENBQUNuQixZQUFZLENBQUM7UUFDdERaLFlBQVksQ0FBQ0ksRUFBRSxHQUFHUCxnQkFBZ0IsQ0FBQ2tDLEtBQUssQ0FBQ25CLFlBQVksQ0FBQztRQUN0RFosWUFBWSxDQUFDSyxFQUFFLEdBQUcsQ0FBQztRQUNuQkwsWUFBWSxDQUFDTSxFQUFFLEdBQUcsQ0FBQztRQUNuQixJQUFJaUIsTUFBTSxDQUFDcUIsbUJBQW1CLEVBQUU7VUFDOUJyQixNQUFNLENBQUNxQixtQkFBbUIsQ0FBQ2IsS0FBSyxFQUFFL0IsWUFBWSxDQUFDO1FBQ2pEO1FBRUEsT0FBT3VCLE1BQU0sQ0FBQ3NCLDRCQUE0QixJQUFJLElBQUksR0FDOUMsSUFBSSxHQUNKdEIsTUFBTSxDQUFDc0IsNEJBQTRCLENBQUNkLEtBQUssRUFBRS9CLFlBQVksQ0FBQztNQUM5RCxDQUFDO01BRUQ4QyxpQkFBaUIsV0FBakJBLGlCQUFpQkEsQ0FBQ2YsS0FBNEIsRUFBUTtRQUNwRGdCLHNCQUFzQixDQUNwQnZCLGdCQUFnQixFQUNoQkQsTUFBTSxDQUFDeUIsb0JBQW9CLEVBQzNCakIsS0FBSyxFQUNML0IsWUFDRixDQUFDO01BQ0gsQ0FBQztNQUVEaUQsa0JBQWtCLFdBQWxCQSxrQkFBa0JBLENBQUNsQixLQUE0QixFQUFRO1FBQ3JEZ0Isc0JBQXNCLENBQ3BCdkIsZ0JBQWdCLEVBQ2hCRCxNQUFNLENBQUMyQixxQkFBcUIsRUFDNUJuQixLQUFLLEVBQ0wvQixZQUNGLENBQUM7UUFDREYsWUFBWSxDQUFDQyx1QkFBdUIsQ0FBQ0MsWUFBWSxDQUFDO01BQ3BELENBQUM7TUFFRG1ELGdCQUFnQixXQUFoQkEsZ0JBQWdCQSxDQUFDcEIsS0FBNEIsRUFBUTtRQUNuRCxJQUFNbkIsWUFBWSxHQUFHbUIsS0FBSyxDQUFDbkIsWUFBWTtRQUN2Q1osWUFBWSxDQUFDUyxtQkFBbUIsR0FBR0csWUFBWSxDQUFDSCxtQkFBbUI7UUFDbkUsSUFBSWMsTUFBTSxDQUFDNkIsbUJBQW1CLEVBQUU7VUFDOUI3QixNQUFNLENBQUM2QixtQkFBbUIsQ0FBQ3JCLEtBQUssRUFBRS9CLFlBQVksQ0FBQztRQUNqRDtNQUNGLENBQUM7TUFFRHFELGVBQWUsV0FBZkEsZUFBZUEsQ0FBQ3RCLEtBQTRCLEVBQVE7UUFDbEQsSUFBTW5CLFlBQVksR0FBR21CLEtBQUssQ0FBQ25CLFlBQVk7UUFHdkMsSUFDRVosWUFBWSxDQUFDVSxxQkFBcUIsS0FDbENFLFlBQVksQ0FBQ1MsbUJBQW1CLEVBQ2hDO1VBQ0E7UUFDRjtRQUdBdkIsWUFBWSxDQUFDYSx5QkFBeUIsQ0FBQ1gsWUFBWSxFQUFFWSxZQUFZLENBQUM7UUFDbEUsSUFBSVcsTUFBTSxDQUFDK0Isa0JBQWtCLEVBQUU7VUFDN0IvQixNQUFNLENBQUMrQixrQkFBa0IsQ0FBQ3ZCLEtBQUssRUFBRS9CLFlBQVksQ0FBQztRQUNoRDtNQUNGLENBQUM7TUFFRHVELGNBQWMsV0FBZEEsY0FBY0EsQ0FBQ3hCLEtBQTRCLEVBQVE7UUFDakQsSUFBTW5CLFlBQVksR0FBR21CLEtBQUssQ0FBQ25CLFlBQVk7UUFDdkNaLFlBQVksQ0FBQ1MsbUJBQW1CLEdBQUdHLFlBQVksQ0FBQ0gsbUJBQW1CO1FBQ25Fc0Msc0JBQXNCLENBQ3BCdkIsZ0JBQWdCLEVBQ2hCRCxNQUFNLENBQUNpQyxpQkFBaUIsRUFDeEJ6QixLQUFLLEVBQ0wvQixZQUNGLENBQUM7TUFDSCxDQUFDO01BRUR5RCxvQkFBb0IsV0FBcEJBLG9CQUFvQkEsQ0FBQzFCLEtBQTRCLEVBQVE7UUFDdkRnQixzQkFBc0IsQ0FDcEJ2QixnQkFBZ0IsRUFDaEJELE1BQU0sQ0FBQ21DLHVCQUF1QixFQUM5QjNCLEtBQUssRUFDTC9CLFlBQ0YsQ0FBQztRQUNERixZQUFZLENBQUNDLHVCQUF1QixDQUFDQyxZQUFZLENBQUM7TUFDcEQsQ0FBQztNQUVEMkQsNkJBQTZCLFdBQTdCQSw2QkFBNkJBLENBQUM1QixLQUE0QixFQUFXO1FBQ25FLE9BQU9SLE1BQU0sQ0FBQ3FDLGdDQUFnQyxJQUFJLElBQUksR0FDbEQsSUFBSSxHQUNKckMsTUFBTSxDQUFDcUMsZ0NBQWdDLENBQUM3QixLQUFLLEVBQUUvQixZQUFZLENBQUM7TUFDbEU7SUFDRixDQUFDO0lBQ0QsT0FBTztNQUNMNkIsV0FBVyxFQUFYQSxXQUFXO01BQ1hnQyxvQkFBb0IsV0FBcEJBLG9CQUFvQkEsQ0FBQSxFQUFZO1FBQzlCLE9BQU9yQyxnQkFBZ0IsQ0FBQ0MsTUFBTTtNQUNoQztJQUNGLENBQUM7RUFDSDtBQUNGLENBQUM7QUFFRCxTQUFTc0Isc0JBQXNCQSxDQUM3QnZCLGdCQUF3QyxFQUN4Q3NDLFFBQTZDLEVBQzdDL0IsS0FBNEIsRUFDNUIvQixZQUFzQyxFQUN0QztFQUNBLElBQUl3QixnQkFBZ0IsQ0FBQ0MsTUFBTSxFQUFFO0lBQzNCcEMsa0JBQWtCLENBQUMwRCxzQkFBc0IsQ0FBQ3ZCLGdCQUFnQixDQUFDQyxNQUFNLENBQUM7SUFDbEVELGdCQUFnQixDQUFDQyxNQUFNLEdBQUcsSUFBSTtFQUNoQztFQUNBLElBQUlxQyxRQUFRLEVBQUU7SUFDWkEsUUFBUSxDQUFDL0IsS0FBSyxFQUFFL0IsWUFBWSxDQUFDO0VBQy9CO0FBQ0Y7QUFBQyxJQUFBK0QsUUFBQSxHQUFBN0UsT0FBQSxDQUFBRSxPQUFBLEdBSWNVLFlBQVkiLCJpZ25vcmVMaXN0IjpbXX0=