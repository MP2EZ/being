{"version":3,"names":["_assessmentStore","require","_CrisisDetectionEngine","_interopRequireDefault","_SuicidalIdeationProtocol","_CrisisInterventionWorkflow","_CrisisDataManagement","_CrisisPerformanceMonitor","INTEGRATION_CONFIG","exports","REALTIME_MONITORING_INTERVAL_MS","CRISIS_DETECTION_DEBOUNCE_MS","ASSESSMENT_CONTINUATION_DELAY_MS","CRISIS_UI_TIMEOUT_MS","HEALTH_CHECK_INTERVAL_MS","CrisisIntegrationOrchestrator","_classCallCheck2","default","eventListeners","Map","activeAssessments","integrationErrors","integrationStatus","isActive","monitoringEnabled","lastHealthCheck","activeIntegrations","performanceStatus","systemHealth","detectionEngine","suicidalIdeationProtocol","interventionWorkflow","dataManagement","performanceMonitor","_createClass2","key","value","_initializeCrisisIntegration","_asyncToGenerator2","console","log","CrisisPerformanceMonitor","startMonitoring","initializeAssessmentStoreIntegration","setupRealtimeMonitoring","startHealthChecks","Date","now","error","recordIntegrationError","initializeCrisisIntegration","apply","arguments","_initializeAssessmentStoreIntegration","_this","useAssessmentStore","subscribe","state","currentSession","answers","currentResult","crisisDetection","_ref","current","previous","handleAssessmentStoreChange","_x","_x2","_monitorAssessmentResponse","questionId","response","assessmentType","userId","assessmentId","monitoringStartTime","performance","context","getOrCreateAssessmentContext","answer","timestamp","push","handleSuicidalIdeationDetection","evaluateProgressiveCrisisRisk","recordMetric","id","category","name","description","unit","threshold","warning","critical","tags","monitorAssessmentResponse","_x3","_x4","_x5","_x6","_x7","_handleAssessmentCompletion","result","completionStartTime","get","warn","detection","CrisisDetectionEngine","detectCrisis","intervention","triggerCrisisIntervention","captureCrisisData","emitIntegrationEvent","eventType","data","recordCrisisDetection","createNoCrisisDetection","handleAssessmentCompletion","_x8","_x9","_x0","_x1","_integrateCrisisInterventionUI","integrationStartTime","CrisisInterventionWorkflow","initiateCrisisWorkflow","createInitialIntervention","displayCrisisInterventionOverlay","setupCrisisNavigation","recordCrisisIntervention","integrateCrisisInterventionUI","_x10","_x11","_handleCrisisResolution","interventionId","resolutionType","crisisResolved","resolvedAt","handleAssessmentContinuation","handleAssessmentTermination","scheduleFollowUp","handleCrisisResolution","_x12","_x13","_x14","_handleSuicidalIdeationDetection","detectionStartTime","SuicidalIdeationProtocol","detectSuicidalIdeation","currentTotalScore","crisisDetected","convertSuicidalDetectionToCrisis","triggerImmediateSuicidalIdeationIntervention","recordSuicidalIdeationDetection","_x15","_x16","_x17","_x18","_x19","_evaluateProgressiveCrisisRisk","currentScore","reduce","sum","length","handleEmergingCrisisRisk","_x20","_handleEmergingCrisisRisk","riskType","_x21","_x22","startedAt","interventionsTriggered","set","_triggerCrisisIntervention","workflowContext","triggeredAt","type","_x23","_x24","_triggerImmediateSuicidalIdeationIntervention","triggerImmediateIntervention","assessmentTerminated","terminatedAt","terminationReason","_x25","_x26","_captureCrisisData","additionalContext","assessmentProgress","questionsAnswered","assessmentDurationMs","undefined","CrisisDataManagement","captureCrisisEpisode","_x27","_x28","_x29","_displayCrisisInterventionOverlay","_x30","_x31","_setupCrisisNavigation","_x32","_x33","_handleAssessmentContinuation","setTimeout","_x34","_handleAssessmentTermination","_x35","_scheduleFollowUp","followUpUrgency","determineFollowUpUrgency","_x36","_x37","_this2","healthCheckInterval","setInterval","performIntegrationHealthCheck","_performIntegrationHealthCheck","healthStatus","checkComponentHealth","healthyComponents","Object","values","filter","Boolean","totalComponents","_checkComponentHealth","component","getPerformanceStatus","_x38","_emitIntegrationEvent","eventData","listeners","listener","_x39","addEventListener","removeEventListener","index","indexOf","splice","errorType","errorMessage","message","slice","Math","random","toString","substr","interventionStarted","startTimestamp","contactedSupport","responseTime","status","actionsTaken","followUp","required","urgency","recommendations","contacts","completed","canDismiss","dismissalAvailableAt","isTriggered","primaryTrigger","secondaryTriggers","severityLevel","triggerValue","detectionResponseTimeMs","triggeringAnswers","timeOfDay","riskLevel","detectionTimestamp","_handleAssessmentStoreChange","newAnswers","_x40","_x41","getIntegrationStatus","assign","getActiveAssessmentsCount","size","_shutdownIntegration","clearInterval","stopMonitoring","shutdownIntegration","getIntegrationErrors","_toConsumableArray2","clearIntegrationErrors","getInstance","instance","useCrisisIntegration","orchestrator","errors","clearErrors","_default"],"sources":["CrisisIntegrationOrchestrator.ts"],"sourcesContent":["/**\n * CRISIS INTEGRATION ORCHESTRATOR - DRD-FLOW-005 Assessment Flow Integration\n *\n * COMPREHENSIVE INTEGRATION POINTS:\n * - Real-time assessment monitoring and crisis detection\n * - Seamless crisis intervention UI integration\n * - Assessment store coordination and data synchronization\n * - Performance monitoring and workflow orchestration\n * - Professional referral and follow-up integration\n *\n * INTEGRATION WORKFLOWS:\n * 1. Assessment Question Response ‚Üí Real-time Crisis Detection\n * 2. Crisis Detection ‚Üí Immediate Intervention Workflow\n * 3. Crisis Resolution ‚Üí Assessment Continuation/Completion\n * 4. Data Capture ‚Üí Comprehensive Crisis Documentation\n * 5. Follow-up ‚Üí Professional Care Coordination\n *\n * COMPONENT INTEGRATION:\n * - AssessmentStore: Crisis detection triggers and data capture\n * - AssessmentQuestion: Real-time suicidal ideation monitoring\n * - AssessmentResults: Crisis intervention UI integration\n * - CrisisButton: Emergency access from any assessment screen\n * - Navigation: Crisis flow routing and safety protocols\n */\n\nimport React from 'react';\nimport { Alert, Linking } from 'react-native';\nimport { useAssessmentStore } from '../flows/assessment/stores/assessmentStore';\nimport CrisisDetectionEngine from './CrisisDetectionEngine';\nimport SuicidalIdeationProtocol from './SuicidalIdeationProtocol';\nimport CrisisInterventionWorkflow from './CrisisInterventionWorkflow';\nimport CrisisDataManagement from './CrisisDataManagement';\nimport CrisisPerformanceMonitor from './CrisisPerformanceMonitor';\nimport type {\n  AssessmentType,\n  AssessmentResponse,\n  PHQ9Result,\n  GAD7Result,\n  CrisisDetection,\n  CrisisIntervention,\n  AssessmentAnswer\n} from '../flows/assessment/types';\n\n/**\n * INTEGRATION CONFIGURATION\n */\nexport const INTEGRATION_CONFIG = {\n  /** Real-time monitoring interval (ms) */\n  REALTIME_MONITORING_INTERVAL_MS: 100,\n  /** Crisis detection debounce (ms) */\n  CRISIS_DETECTION_DEBOUNCE_MS: 50,\n  /** Assessment continuation delay after crisis (ms) */\n  ASSESSMENT_CONTINUATION_DELAY_MS: 5000,\n  /** Crisis UI overlay timeout (ms) */\n  CRISIS_UI_TIMEOUT_MS: 30000,\n  /** Integration health check interval (ms) */\n  HEALTH_CHECK_INTERVAL_MS: 10000\n} as const;\n\n/**\n * INTEGRATION EVENT TYPES\n */\nexport type CrisisIntegrationEvent =\n  | 'assessment_started'\n  | 'question_answered'\n  | 'crisis_detected'\n  | 'crisis_intervention_triggered'\n  | 'crisis_resolved'\n  | 'assessment_completed'\n  | 'follow_up_scheduled'\n  | 'integration_error';\n\n/**\n * INTEGRATION EVENT DATA\n */\nexport interface CrisisIntegrationEventData {\n  eventType: CrisisIntegrationEvent;\n  timestamp: number;\n  assessmentId: string;\n  userId: string;\n  data: any;\n  metadata?: {\n    performanceMs?: number;\n    errors?: string[];\n    warnings?: string[];\n  };\n}\n\n/**\n * INTEGRATION STATUS\n */\nexport interface CrisisIntegrationStatus {\n  isActive: boolean;\n  monitoringEnabled: boolean;\n  lastHealthCheck: number;\n  activeIntegrations: number;\n  performanceStatus: 'optimal' | 'degraded' | 'critical';\n  integrationErrors: string[];\n  systemHealth: {\n    detectionEngine: boolean;\n    suicidalIdeationProtocol: boolean;\n    interventionWorkflow: boolean;\n    dataManagement: boolean;\n    performanceMonitor: boolean;\n  };\n}\n\n/**\n * CRISIS INTEGRATION ORCHESTRATOR\n * Central coordination for all crisis system integrations\n */\nexport class CrisisIntegrationOrchestrator {\n  private static instance: CrisisIntegrationOrchestrator;\n  private integrationStatus: CrisisIntegrationStatus;\n  private eventListeners: Map<CrisisIntegrationEvent, Function[]> = new Map();\n  private activeAssessments: Map<string, CrisisAssessmentContext> = new Map();\n  private integrationErrors: string[] = [];\n  private healthCheckInterval?: NodeJS.Timeout;\n\n  private constructor() {\n    this.integrationStatus = {\n      isActive: false,\n      monitoringEnabled: false,\n      lastHealthCheck: 0,\n      activeIntegrations: 0,\n      performanceStatus: 'optimal',\n      integrationErrors: [],\n      systemHealth: {\n        detectionEngine: false,\n        suicidalIdeationProtocol: false,\n        interventionWorkflow: false,\n        dataManagement: false,\n        performanceMonitor: false\n      }\n    };\n  }\n\n  public static getInstance(): CrisisIntegrationOrchestrator {\n    if (!CrisisIntegrationOrchestrator.instance) {\n      CrisisIntegrationOrchestrator.instance = new CrisisIntegrationOrchestrator();\n    }\n    return CrisisIntegrationOrchestrator.instance;\n  }\n\n  /**\n   * INITIALIZE CRISIS INTEGRATION\n   * Sets up all crisis system integrations\n   */\n  public async initializeCrisisIntegration(): Promise<void> {\n    try {\n      console.log('üîÑ Initializing Crisis Integration Orchestrator...');\n\n      // Start performance monitoring\n      CrisisPerformanceMonitor.startMonitoring();\n\n      // Initialize assessment store integration\n      await this.initializeAssessmentStoreIntegration();\n\n      // Setup real-time monitoring\n      await this.setupRealtimeMonitoring();\n\n      // Start health checks\n      this.startHealthChecks();\n\n      // Update status\n      this.integrationStatus.isActive = true;\n      this.integrationStatus.monitoringEnabled = true;\n      this.integrationStatus.lastHealthCheck = Date.now();\n\n      console.log('‚úÖ Crisis Integration Orchestrator Initialized');\n\n    } catch (error) {\n      console.error('üö® CRISIS INTEGRATION INITIALIZATION ERROR:', error);\n      this.recordIntegrationError('initialization_failed', error);\n      throw error;\n    }\n  }\n\n  /**\n   * ASSESSMENT STORE INTEGRATION\n   * Integrates with assessment store for real-time crisis detection\n   */\n  private async initializeAssessmentStoreIntegration(): Promise<void> {\n    try {\n      // Subscribe to assessment store changes\n      useAssessmentStore.subscribe(\n        (state) => ({\n          currentSession: state.currentSession,\n          answers: state.answers,\n          currentResult: state.currentResult,\n          crisisDetection: state.crisisDetection\n        }),\n        async (current, previous) => {\n          await this.handleAssessmentStoreChange(current, previous);\n        }\n      );\n\n      console.log('‚úÖ Assessment Store Integration Initialized');\n\n    } catch (error) {\n      console.error('üö® ASSESSMENT STORE INTEGRATION ERROR:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * REAL-TIME ASSESSMENT MONITORING\n   * Monitors assessment responses for crisis conditions\n   */\n  public async monitorAssessmentResponse(\n    questionId: string,\n    response: AssessmentResponse,\n    assessmentType: AssessmentType,\n    userId: string,\n    assessmentId: string\n  ): Promise<void> {\n    const monitoringStartTime = performance.now();\n\n    try {\n      // Create or update assessment context\n      const context = this.getOrCreateAssessmentContext(assessmentId, userId, assessmentType);\n\n      // Record the response\n      const answer: AssessmentAnswer = {\n        questionId,\n        response,\n        timestamp: Date.now()\n      };\n      context.answers.push(answer);\n\n      // Check for immediate suicidal ideation\n      if (questionId === 'phq9_9' && response > 0) {\n        await this.handleSuicidalIdeationDetection(\n          questionId,\n          response,\n          userId,\n          assessmentId,\n          context\n        );\n      }\n\n      // Check for progressive crisis conditions\n      await this.evaluateProgressiveCrisisRisk(context);\n\n      // Record performance\n      await CrisisPerformanceMonitor.recordMetric({\n        id: `monitor_response_${Date.now()}`,\n        category: 'detection_timing',\n        name: 'Assessment Response Monitoring',\n        description: 'Time to monitor and evaluate assessment response',\n        value: performance.now() - monitoringStartTime,\n        unit: 'ms',\n        threshold: { warning: 50, error: 100, critical: 200 },\n        timestamp: Date.now(),\n        context: { questionId, response, assessmentId },\n        tags: ['response_monitoring', assessmentType]\n      });\n\n    } catch (error) {\n      console.error('üö® ASSESSMENT RESPONSE MONITORING ERROR:', error);\n      this.recordIntegrationError('response_monitoring_failed', error);\n    }\n  }\n\n  /**\n   * ASSESSMENT COMPLETION INTEGRATION\n   * Handles crisis detection at assessment completion\n   */\n  public async handleAssessmentCompletion(\n    result: PHQ9Result | GAD7Result,\n    assessmentType: AssessmentType,\n    userId: string,\n    assessmentId: string\n  ): Promise<CrisisDetection | null> {\n    const completionStartTime = performance.now();\n\n    try {\n      // Get assessment context\n      const context = this.activeAssessments.get(assessmentId);\n      if (!context) {\n        console.warn(`Assessment context not found for completion: ${assessmentId}`);\n      }\n\n      // Perform comprehensive crisis detection\n      const detection = await CrisisDetectionEngine.detectCrisis(\n        result,\n        userId,\n        assessmentId\n      );\n\n      if (detection) {\n        // Trigger crisis intervention workflow\n        const intervention = await this.triggerCrisisIntervention(detection, context);\n\n        // Capture comprehensive crisis data\n        await this.captureCrisisData(detection, intervention, context);\n\n        // Emit integration event\n        await this.emitIntegrationEvent({\n          eventType: 'crisis_detected',\n          timestamp: Date.now(),\n          assessmentId,\n          userId,\n          data: { detection, intervention }\n        });\n      }\n\n      // Record completion performance\n      await CrisisPerformanceMonitor.recordCrisisDetection(\n        detection || this.createNoCrisisDetection(assessmentId, userId),\n        performance.now() - completionStartTime,\n        true // Clinically accurate\n      );\n\n      return detection;\n\n    } catch (error) {\n      console.error('üö® ASSESSMENT COMPLETION INTEGRATION ERROR:', error);\n      this.recordIntegrationError('completion_integration_failed', error);\n      return null;\n    }\n  }\n\n  /**\n   * CRISIS INTERVENTION INTEGRATION\n   * Integrates crisis intervention with assessment UI\n   */\n  public async integrateCrisisInterventionUI(\n    detection: CrisisDetection,\n    context?: CrisisAssessmentContext\n  ): Promise<void> {\n    const integrationStartTime = performance.now();\n\n    try {\n      // Create intervention workflow\n      const intervention = await CrisisInterventionWorkflow.initiateCrisisWorkflow(\n        detection,\n        this.createInitialIntervention(detection)\n      );\n\n      // Integrate with assessment UI\n      await this.displayCrisisInterventionOverlay(detection, intervention);\n\n      // Setup crisis navigation\n      await this.setupCrisisNavigation(detection, intervention);\n\n      // Record intervention performance\n      await CrisisPerformanceMonitor.recordCrisisIntervention(\n        intervention.intervention,\n        performance.now() - integrationStartTime\n      );\n\n      // Emit integration event\n      await this.emitIntegrationEvent({\n        eventType: 'crisis_intervention_triggered',\n        timestamp: Date.now(),\n        assessmentId: detection.assessmentId,\n        userId: detection.userId,\n        data: { detection, intervention }\n      });\n\n    } catch (error) {\n      console.error('üö® CRISIS INTERVENTION UI INTEGRATION ERROR:', error);\n      this.recordIntegrationError('intervention_ui_integration_failed', error);\n    }\n  }\n\n  /**\n   * CRISIS RESOLUTION INTEGRATION\n   * Handles crisis resolution and assessment continuation\n   */\n  public async handleCrisisResolution(\n    interventionId: string,\n    resolutionType: 'user_safe_confirmed' | 'support_contacted' | 'emergency_services',\n    assessmentId: string\n  ): Promise<void> {\n    try {\n      // Get assessment context\n      const context = this.activeAssessments.get(assessmentId);\n      if (!context) {\n        console.warn(`Assessment context not found for crisis resolution: ${assessmentId}`);\n        return;\n      }\n\n      // Update intervention status\n      context.crisisResolved = true;\n      context.resolutionType = resolutionType;\n      context.resolvedAt = Date.now();\n\n      // Handle assessment continuation\n      if (resolutionType === 'user_safe_confirmed') {\n        await this.handleAssessmentContinuation(context);\n      } else {\n        await this.handleAssessmentTermination(context);\n      }\n\n      // Schedule follow-up\n      await this.scheduleFollowUp(context, resolutionType);\n\n      // Emit integration event\n      await this.emitIntegrationEvent({\n        eventType: 'crisis_resolved',\n        timestamp: Date.now(),\n        assessmentId,\n        userId: context.userId,\n        data: { interventionId, resolutionType }\n      });\n\n    } catch (error) {\n      console.error('üö® CRISIS RESOLUTION INTEGRATION ERROR:', error);\n      this.recordIntegrationError('crisis_resolution_failed', error);\n    }\n  }\n\n  /**\n   * SUICIDAL IDEATION DETECTION INTEGRATION\n   */\n  private async handleSuicidalIdeationDetection(\n    questionId: string,\n    response: number,\n    userId: string,\n    assessmentId: string,\n    context: CrisisAssessmentContext\n  ): Promise<void> {\n    const detectionStartTime = performance.now();\n\n    try {\n      // Trigger suicidal ideation protocol\n      const detection = await SuicidalIdeationProtocol.detectSuicidalIdeation(\n        questionId,\n        response,\n        userId,\n        assessmentId,\n        context.currentTotalScore\n      );\n\n      if (detection) {\n        // Update context\n        context.crisisDetected = true;\n        context.crisisDetection = this.convertSuicidalDetectionToCrisis(detection);\n\n        // Immediate intervention\n        await this.triggerImmediateSuicidalIdeationIntervention(detection, context);\n\n        // Record performance\n        await CrisisPerformanceMonitor.recordSuicidalIdeationDetection(\n          questionId,\n          response,\n          performance.now() - detectionStartTime\n        );\n      }\n\n    } catch (error) {\n      console.error('üö® SUICIDAL IDEATION DETECTION ERROR:', error);\n      this.recordIntegrationError('suicidal_ideation_detection_failed', error);\n    }\n  }\n\n  /**\n   * PROGRESSIVE CRISIS RISK EVALUATION\n   * Monitors cumulative risk during assessment\n   */\n  private async evaluateProgressiveCrisisRisk(context: CrisisAssessmentContext): Promise<void> {\n    try {\n      // Calculate current total score\n      const currentScore = context.answers.reduce((sum, answer) => sum + answer.response, 0);\n      context.currentTotalScore = currentScore;\n\n      // Check for emerging crisis patterns\n      if (context.assessmentType === 'phq9' && currentScore >= 15 && context.answers.length >= 6) {\n        await this.handleEmergingCrisisRisk(context, 'phq9_progressive');\n      } else if (context.assessmentType === 'gad7' && currentScore >= 12 && context.answers.length >= 5) {\n        await this.handleEmergingCrisisRisk(context, 'gad7_progressive');\n      }\n\n    } catch (error) {\n      console.error('üö® PROGRESSIVE CRISIS EVALUATION ERROR:', error);\n    }\n  }\n\n  private async handleEmergingCrisisRisk(\n    context: CrisisAssessmentContext,\n    riskType: string\n  ): Promise<void> {\n    // Provide early warning without full intervention\n    // Implementation would show supportive messaging and prepare resources\n    console.log(`üî∂ Emerging crisis risk detected: ${riskType} for assessment ${context.assessmentId}`);\n  }\n\n  /**\n   * ASSESSMENT CONTEXT MANAGEMENT\n   */\n  private getOrCreateAssessmentContext(\n    assessmentId: string,\n    userId: string,\n    assessmentType: AssessmentType\n  ): CrisisAssessmentContext {\n    let context = this.activeAssessments.get(assessmentId);\n\n    if (!context) {\n      context = {\n        assessmentId,\n        userId,\n        assessmentType,\n        startedAt: Date.now(),\n        answers: [],\n        currentTotalScore: 0,\n        crisisDetected: false,\n        crisisResolved: false,\n        interventionsTriggered: []\n      };\n\n      this.activeAssessments.set(assessmentId, context);\n      this.integrationStatus.activeIntegrations += 1;\n    }\n\n    return context;\n  }\n\n  private async triggerCrisisIntervention(\n    detection: CrisisDetection,\n    context?: CrisisAssessmentContext\n  ): Promise<any> {\n    const intervention = this.createInitialIntervention(detection);\n\n    // Trigger workflow\n    const workflowContext = await CrisisInterventionWorkflow.initiateCrisisWorkflow(\n      detection,\n      intervention\n    );\n\n    // Update assessment context\n    if (context) {\n      context.crisisDetected = true;\n      context.crisisDetection = detection;\n      context.interventionsTriggered.push({\n        interventionId: intervention.interventionId,\n        triggeredAt: Date.now(),\n        type: 'crisis_intervention'\n      });\n    }\n\n    return workflowContext;\n  }\n\n  private async triggerImmediateSuicidalIdeationIntervention(\n    detection: any,\n    context: CrisisAssessmentContext\n  ): Promise<void> {\n    // Immediate suicidal ideation intervention\n    const intervention = await SuicidalIdeationProtocol.triggerImmediateIntervention(detection);\n\n    context.interventionsTriggered.push({\n      interventionId: intervention.interventionId,\n      triggeredAt: Date.now(),\n      type: 'suicidal_ideation'\n    });\n\n    // Stop assessment immediately\n    context.assessmentTerminated = true;\n    context.terminatedAt = Date.now();\n    context.terminationReason = 'suicidal_ideation_immediate_intervention';\n  }\n\n  private async captureCrisisData(\n    detection: CrisisDetection,\n    intervention: any,\n    context?: CrisisAssessmentContext\n  ): Promise<void> {\n    try {\n      const additionalContext = context ? {\n        assessmentProgress: {\n          questionsAnswered: context.answers.length,\n          currentScore: context.currentTotalScore,\n          assessmentDurationMs: Date.now() - context.startedAt\n        }\n      } : undefined;\n\n      await CrisisDataManagement.captureCrisisEpisode(\n        detection,\n        intervention.intervention || intervention,\n        additionalContext\n      );\n\n    } catch (error) {\n      console.error('üö® CRISIS DATA CAPTURE ERROR:', error);\n    }\n  }\n\n  /**\n   * UI INTEGRATION METHODS\n   */\n  private async displayCrisisInterventionOverlay(\n    detection: CrisisDetection,\n    intervention: any\n  ): Promise<void> {\n    // Integration with React Native navigation and UI\n    // Implementation would overlay crisis intervention UI\n    console.log('üö® Displaying Crisis Intervention Overlay');\n  }\n\n  private async setupCrisisNavigation(\n    detection: CrisisDetection,\n    intervention: any\n  ): Promise<void> {\n    // Setup navigation to crisis intervention screens\n    // Implementation would configure navigation stack\n    console.log('üîÑ Setting up Crisis Navigation');\n  }\n\n  private async handleAssessmentContinuation(context: CrisisAssessmentContext): Promise<void> {\n    // Allow assessment to continue after crisis resolution\n    setTimeout(() => {\n      console.log('‚úÖ Assessment continuation allowed');\n      // Implementation would enable assessment UI\n    }, INTEGRATION_CONFIG.ASSESSMENT_CONTINUATION_DELAY_MS);\n  }\n\n  private async handleAssessmentTermination(context: CrisisAssessmentContext): Promise<void> {\n    // Terminate assessment due to crisis\n    context.assessmentTerminated = true;\n    context.terminatedAt = Date.now();\n    context.terminationReason = 'crisis_intervention_required';\n\n    console.log('‚èπÔ∏è Assessment terminated due to crisis');\n  }\n\n  private async scheduleFollowUp(\n    context: CrisisAssessmentContext,\n    resolutionType: string\n  ): Promise<void> {\n    // Schedule appropriate follow-up based on resolution\n    const followUpUrgency = this.determineFollowUpUrgency(resolutionType);\n\n    // Implementation would schedule follow-up\n    console.log(`üìÖ Follow-up scheduled with urgency: ${followUpUrgency}`);\n  }\n\n  /**\n   * HEALTH MONITORING\n   */\n  private startHealthChecks(): void {\n    this.healthCheckInterval = setInterval(async () => {\n      await this.performIntegrationHealthCheck();\n    }, INTEGRATION_CONFIG.HEALTH_CHECK_INTERVAL_MS);\n  }\n\n  private async performIntegrationHealthCheck(): Promise<void> {\n    try {\n      const healthStatus = {\n        detectionEngine: await this.checkComponentHealth('detectionEngine'),\n        suicidalIdeationProtocol: await this.checkComponentHealth('suicidalIdeationProtocol'),\n        interventionWorkflow: await this.checkComponentHealth('interventionWorkflow'),\n        dataManagement: await this.checkComponentHealth('dataManagement'),\n        performanceMonitor: await this.checkComponentHealth('performanceMonitor')\n      };\n\n      this.integrationStatus.systemHealth = healthStatus;\n      this.integrationStatus.lastHealthCheck = Date.now();\n\n      // Check overall system health\n      const healthyComponents = Object.values(healthStatus).filter(Boolean).length;\n      const totalComponents = Object.values(healthStatus).length;\n\n      if (healthyComponents < totalComponents * 0.8) {\n        this.integrationStatus.performanceStatus = 'critical';\n        console.error('üö® CRISIS INTEGRATION SYSTEM HEALTH CRITICAL');\n      } else if (healthyComponents < totalComponents) {\n        this.integrationStatus.performanceStatus = 'degraded';\n        console.warn('‚ö†Ô∏è Crisis Integration System Health Degraded');\n      } else {\n        this.integrationStatus.performanceStatus = 'optimal';\n      }\n\n    } catch (error) {\n      console.error('üö® INTEGRATION HEALTH CHECK ERROR:', error);\n      this.recordIntegrationError('health_check_failed', error);\n    }\n  }\n\n  private async checkComponentHealth(component: string): Promise<boolean> {\n    try {\n      // Component-specific health checks\n      switch (component) {\n        case 'detectionEngine':\n          return true; // Would check CrisisDetectionEngine health\n        case 'suicidalIdeationProtocol':\n          return true; // Would check SuicidalIdeationProtocol health\n        case 'interventionWorkflow':\n          return true; // Would check CrisisInterventionWorkflow health\n        case 'dataManagement':\n          return true; // Would check CrisisDataManagement health\n        case 'performanceMonitor':\n          return CrisisPerformanceMonitor.getPerformanceStatus() !== 'critical';\n        default:\n          return false;\n      }\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * EVENT MANAGEMENT\n   */\n  private async emitIntegrationEvent(eventData: CrisisIntegrationEventData): Promise<void> {\n    try {\n      const listeners = this.eventListeners.get(eventData.eventType) || [];\n      for (const listener of listeners) {\n        try {\n          await listener(eventData);\n        } catch (error) {\n          console.error(`Event listener error for ${eventData.eventType}:`, error);\n        }\n      }\n    } catch (error) {\n      console.error('üö® EVENT EMISSION ERROR:', error);\n    }\n  }\n\n  public addEventListener(\n    eventType: CrisisIntegrationEvent,\n    listener: (eventData: CrisisIntegrationEventData) => void | Promise<void>\n  ): void {\n    const listeners = this.eventListeners.get(eventType) || [];\n    listeners.push(listener);\n    this.eventListeners.set(eventType, listeners);\n  }\n\n  public removeEventListener(\n    eventType: CrisisIntegrationEvent,\n    listener: Function\n  ): void {\n    const listeners = this.eventListeners.get(eventType) || [];\n    const index = listeners.indexOf(listener);\n    if (index > -1) {\n      listeners.splice(index, 1);\n      this.eventListeners.set(eventType, listeners);\n    }\n  }\n\n  /**\n   * ERROR MANAGEMENT\n   */\n  private recordIntegrationError(errorType: string, error: any): void {\n    const errorMessage = `${errorType}: ${error.message || error}`;\n    this.integrationErrors.push(errorMessage);\n    this.integrationStatus.integrationErrors.push(errorMessage);\n\n    // Keep only last 50 errors\n    if (this.integrationErrors.length > 50) {\n      this.integrationErrors = this.integrationErrors.slice(-50);\n      this.integrationStatus.integrationErrors = this.integrationStatus.integrationErrors.slice(-50);\n    }\n  }\n\n  /**\n   * UTILITY METHODS\n   */\n  private createInitialIntervention(detection: CrisisDetection): CrisisIntervention {\n    return {\n      detection,\n      interventionId: `intervention_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      interventionStarted: true,\n      startTimestamp: Date.now(),\n      contactedSupport: false,\n      responseTime: 0,\n      status: 'initiated',\n      actionsTaken: [],\n      followUp: {\n        required: true,\n        urgency: 'immediate',\n        type: 'clinical_assessment',\n        recommendations: [],\n        contacts: [],\n        completed: false\n      },\n      canDismiss: false,\n      dismissalAvailableAt: Date.now() + 30000\n    };\n  }\n\n  private createNoCrisisDetection(assessmentId: string, userId: string): CrisisDetection {\n    return {\n      id: `no_crisis_${Date.now()}`,\n      isTriggered: false,\n      primaryTrigger: 'manual_override',\n      secondaryTriggers: [],\n      severityLevel: 'moderate',\n      triggerValue: 0,\n      assessmentType: 'phq9',\n      timestamp: Date.now(),\n      assessmentId,\n      userId,\n      detectionResponseTimeMs: 0,\n      context: {\n        triggeringAnswers: [],\n        timeOfDay: 'morning'\n      }\n    };\n  }\n\n  private convertSuicidalDetectionToCrisis(detection: any): CrisisDetection {\n    return {\n      id: detection.id,\n      isTriggered: true,\n      primaryTrigger: 'phq9_suicidal_ideation',\n      secondaryTriggers: [],\n      severityLevel: detection.riskLevel,\n      triggerValue: detection.response,\n      assessmentType: 'phq9',\n      timestamp: detection.detectionTimestamp,\n      assessmentId: detection.assessmentId,\n      userId: detection.userId,\n      detectionResponseTimeMs: detection.detectionResponseTimeMs,\n      context: {\n        triggeringAnswers: [{\n          questionId: detection.questionId,\n          response: detection.response,\n          timestamp: detection.detectionTimestamp\n        }],\n        timeOfDay: detection.context.timeOfDay\n      }\n    };\n  }\n\n  private determineFollowUpUrgency(resolutionType: string): string {\n    switch (resolutionType) {\n      case 'emergency_services':\n        return 'immediate';\n      case 'support_contacted':\n        return 'within_24h';\n      case 'user_safe_confirmed':\n        return 'within_48h';\n      default:\n        return 'within_week';\n    }\n  }\n\n  private async handleAssessmentStoreChange(current: any, previous: any): Promise<void> {\n    try {\n      // Handle new answers\n      if (current.answers.length > previous.answers.length) {\n        const newAnswers = current.answers.slice(previous.answers.length);\n        for (const answer of newAnswers) {\n          if (current.currentSession) {\n            await this.monitorAssessmentResponse(\n              answer.questionId,\n              answer.response,\n              current.currentSession.type,\n              'user_id', // Would get from session\n              current.currentSession.id\n            );\n          }\n        }\n      }\n\n      // Handle crisis detection changes\n      if (current.crisisDetection && !previous.crisisDetection) {\n        await this.integrateCrisisInterventionUI(current.crisisDetection);\n      }\n\n    } catch (error) {\n      console.error('üö® ASSESSMENT STORE CHANGE HANDLING ERROR:', error);\n      this.recordIntegrationError('store_change_handling_failed', error);\n    }\n  }\n\n  /**\n   * PUBLIC API METHODS\n   */\n  public getIntegrationStatus(): CrisisIntegrationStatus {\n    return { ...this.integrationStatus };\n  }\n\n  public getActiveAssessmentsCount(): number {\n    return this.activeAssessments.size;\n  }\n\n  public async shutdownIntegration(): Promise<void> {\n    this.integrationStatus.isActive = false;\n    this.integrationStatus.monitoringEnabled = false;\n\n    if (this.healthCheckInterval) {\n      clearInterval(this.healthCheckInterval);\n    }\n\n    CrisisPerformanceMonitor.stopMonitoring();\n\n    console.log('‚èπÔ∏è Crisis Integration Orchestrator Shutdown');\n  }\n\n  public getIntegrationErrors(): string[] {\n    return [...this.integrationErrors];\n  }\n\n  public clearIntegrationErrors(): void {\n    this.integrationErrors = [];\n    this.integrationStatus.integrationErrors = [];\n  }\n}\n\n/**\n * ASSESSMENT CONTEXT INTERFACE\n */\nexport interface CrisisAssessmentContext {\n  assessmentId: string;\n  userId: string;\n  assessmentType: AssessmentType;\n  startedAt: number;\n  answers: AssessmentAnswer[];\n  currentTotalScore: number;\n  crisisDetected: boolean;\n  crisisDetection?: CrisisDetection;\n  crisisResolved: boolean;\n  resolutionType?: string;\n  resolvedAt?: number;\n  interventionsTriggered: Array<{\n    interventionId: string;\n    triggeredAt: number;\n    type: string;\n  }>;\n  assessmentTerminated?: boolean;\n  terminatedAt?: number;\n  terminationReason?: string;\n}\n\n/**\n * REACT HOOK FOR CRISIS INTEGRATION\n * Provides easy access to crisis integration in React components\n */\nexport function useCrisisIntegration() {\n  const orchestrator = CrisisIntegrationOrchestrator.getInstance();\n\n  return {\n    status: orchestrator.getIntegrationStatus(),\n    activeAssessments: orchestrator.getActiveAssessmentsCount(),\n    errors: orchestrator.getIntegrationErrors(),\n    clearErrors: () => orchestrator.clearIntegrationErrors(),\n    addEventListener: (eventType: CrisisIntegrationEvent, listener: Function) =>\n      orchestrator.addEventListener(eventType, listener),\n    removeEventListener: (eventType: CrisisIntegrationEvent, listener: Function) =>\n      orchestrator.removeEventListener(eventType, listener)\n  };\n}\n\n// Export singleton instance\nexport default CrisisIntegrationOrchestrator.getInstance();"],"mappings":"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","ignoreList":[]}