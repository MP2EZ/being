ac61059479d27434d66c26aca08d45d6
_getJestObj().mock('expo-secure-store', function () {
  return {
    setItemAsync: jest.fn().mockResolvedValue(undefined),
    getItemAsync: jest.fn().mockResolvedValue(null),
    deleteItemAsync: jest.fn().mockResolvedValue(undefined)
  };
});
_getJestObj().mock('@react-native-async-storage/async-storage', function () {
  return {
    setItem: jest.fn().mockResolvedValue(undefined),
    getItem: jest.fn().mockResolvedValue(null),
    removeItem: jest.fn().mockResolvedValue(undefined)
  };
});
_getJestObj().mock('react-native', function () {
  return {
    Alert: {
      alert: jest.fn()
    },
    Linking: {
      openURL: jest.fn()
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _assessmentStore = require("../../../src/flows/assessment/stores/assessmentStore");
var _index = require("../../../src/flows/assessment/types/index");
var _this = this;
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('COMPREHENSIVE CLINICAL SCORING VALIDATION - ALL 48 COMBINATIONS', function () {
  var store;
  beforeEach((0, _asyncToGenerator2.default)(function* () {
    store = _assessmentStore.useAssessmentStore.getState();
    store.resetAssessment();
    yield store.clearHistory();
    store.enableAutoSave();
  }));
  afterEach(function () {
    store.resetAssessment();
  });
  describe('PHQ-9 COMPREHENSIVE SCORING (28 combinations: 0-27)', function () {
    var PHQ9_QUESTIONS = ['phq9_1', 'phq9_2', 'phq9_3', 'phq9_4', 'phq9_5', 'phq9_6', 'phq9_7', 'phq9_8', 'phq9_9'];
    var generatePHQ9Combinations = function generatePHQ9Combinations(targetScore) {
      var combinations = [];
      function generateCombination(currentCombination, remainingQuestions, remainingScore) {
        if (remainingQuestions === 0) {
          if (remainingScore === 0) {
            combinations.push((0, _toConsumableArray2.default)(currentCombination));
          }
          return;
        }
        for (var response = 0; response <= 3; response++) {
          if (response <= remainingScore && remainingScore - response <= (remainingQuestions - 1) * 3) {
            currentCombination.push(response);
            generateCombination(currentCombination, remainingQuestions - 1, remainingScore - response);
            currentCombination.pop();
          }
        }
      }
      generateCombination([], 9, targetScore);
      return combinations.slice(0, 1);
    };
    var _loop = function _loop(score) {
      it(`PHQ-9 Score ${score}: Clinical accuracy and crisis detection`, (0, _asyncToGenerator2.default)(function* () {
        var _store$currentSession;
        var combinations = generatePHQ9Combinations(score);
        expect(combinations.length).toBeGreaterThan(0);
        var answers = combinations[0];
        yield store.startAssessment('phq9', 'clinical_validation');
        yield new Promise(function (resolve) {
          return setTimeout(resolve, 10);
        });
        expect(store.currentSession).toBeTruthy();
        expect((_store$currentSession = store.currentSession) == null ? void 0 : _store$currentSession.type).toBe('phq9');
        var startTime = performance.now();
        for (var i = 0; i < PHQ9_QUESTIONS.length; i++) {
          yield store.answerQuestion(PHQ9_QUESTIONS[i], answers[i]);
        }
        yield store.completeAssessment();
        var completionTime = performance.now() - startTime;
        var assessmentResult = store.currentResult;
        expect(assessmentResult).toBeTruthy();
        expect(assessmentResult.totalScore).toBe(score);
        if (score >= 0 && score <= 4) {
          expect(assessmentResult.severity).toBe('minimal');
        } else if (score >= 5 && score <= 9) {
          expect(assessmentResult.severity).toBe('mild');
        } else if (score >= 10 && score <= 14) {
          expect(assessmentResult.severity).toBe('moderate');
        } else if (score >= 15 && score <= 19) {
          expect(assessmentResult.severity).toBe('moderately_severe');
        } else if (score >= 20 && score <= 27) {
          expect(assessmentResult.severity).toBe('severe');
        }
        var expectCrisis = score >= _index.CRISIS_THRESHOLDS.PHQ9_CRISIS_SCORE;
        expect(result.isCrisis).toBe(expectCrisis);
        if (expectCrisis) {
          var _store$crisisDetectio3, _store$crisisDetectio4;
          expect(store.crisisDetection).toBeTruthy();
          expect((_store$crisisDetectio3 = store.crisisDetection) == null ? void 0 : _store$crisisDetectio3.triggerType).toBe('phq9_score');
          expect((_store$crisisDetectio4 = store.crisisDetection) == null ? void 0 : _store$crisisDetectio4.triggerValue).toBe(score);
          expect(completionTime).toBeLessThan(200);
        }
        var suicidalResponse = answers[8];
        expect(result.suicidalIdeation).toBe(suicidalResponse > 0);
        if (suicidalResponse > 0) {
          expect(result.isCrisis).toBe(true);
          expect(store.crisisDetection).toBeTruthy();
        }
        expect(result.answers).toHaveLength(9);
        result.answers.forEach(function (answer, index) {
          expect(answer.questionId).toBe(PHQ9_QUESTIONS[index]);
          expect(answer.response).toBe(answers[index]);
          expect(answer.timestamp).toBeGreaterThan(0);
        });
        expect(result.completedAt).toBeGreaterThan(0);
        expect(store.completedAssessments).toHaveLength(1);
      }));
    };
    for (var score = 0; score <= 27; score++) {
      _loop(score);
    }
    it('PHQ-9 Suicidal Ideation: Immediate crisis detection across all scores', (0, _asyncToGenerator2.default)(function* () {
      var testCases = [{
        score: 5,
        suicidalResponse: 1
      }, {
        score: 10,
        suicidalResponse: 2
      }, {
        score: 15,
        suicidalResponse: 3
      }, {
        score: 3,
        suicidalResponse: 1
      }];
      for (var testCase of testCases) {
        var _store$crisisDetectio, _store$crisisDetectio2;
        store.resetAssessment();
        yield store.startAssessment('phq9', 'suicidal_ideation_test');
        yield new Promise(function (resolve) {
          return setTimeout(resolve, 10);
        });
        var answers = new Array(9).fill(0);
        answers[8] = testCase.suicidalResponse;
        var remainingScore = testCase.score - testCase.suicidalResponse;
        for (var i = 0; i < 8 && remainingScore > 0; i++) {
          var maxForQuestion = Math.min(remainingScore, 3);
          answers[i] = maxForQuestion;
          remainingScore -= maxForQuestion;
        }
        var startTime = performance.now();
        for (var _i = 0; _i < 8; _i++) {
          yield store.answerQuestion(PHQ9_QUESTIONS[_i], answers[_i]);
        }
        yield store.answerQuestion(PHQ9_QUESTIONS[8], answers[8]);
        var crisisDetectionTime = performance.now() - startTime;
        expect(store.crisisDetection).toBeTruthy();
        expect((_store$crisisDetectio = store.crisisDetection) == null ? void 0 : _store$crisisDetectio.triggerType).toBe('phq9_suicidal');
        expect((_store$crisisDetectio2 = store.crisisDetection) == null ? void 0 : _store$crisisDetectio2.triggerValue).toBe(testCase.suicidalResponse);
        expect(crisisDetectionTime).toBeLessThan(200);
        yield store.completeAssessment();
        var _result = store.currentResult;
        expect(_result.suicidalIdeation).toBe(true);
        expect(_result.isCrisis).toBe(true);
        expect(_result.totalScore).toBe(testCase.score);
      }
    }));
  });
  describe('GAD-7 COMPREHENSIVE SCORING (21 combinations: 0-21)', function () {
    var GAD7_QUESTIONS = ['gad7_1', 'gad7_2', 'gad7_3', 'gad7_4', 'gad7_5', 'gad7_6', 'gad7_7'];
    var generateGAD7Combinations = function generateGAD7Combinations(targetScore) {
      var combinations = [];
      function generateCombination(currentCombination, remainingQuestions, remainingScore) {
        if (remainingQuestions === 0) {
          if (remainingScore === 0) {
            combinations.push((0, _toConsumableArray2.default)(currentCombination));
          }
          return;
        }
        for (var response = 0; response <= 3; response++) {
          if (response <= remainingScore && remainingScore - response <= (remainingQuestions - 1) * 3) {
            currentCombination.push(response);
            generateCombination(currentCombination, remainingQuestions - 1, remainingScore - response);
            currentCombination.pop();
          }
        }
      }
      generateCombination([], 7, targetScore);
      return combinations.slice(0, 1);
    };
    var _loop2 = function _loop2(score) {
      it(`GAD-7 Score ${score}: Clinical accuracy and crisis detection`, (0, _asyncToGenerator2.default)(function* () {
        var _store$currentSession2;
        var combinations = generateGAD7Combinations(score);
        expect(combinations.length).toBeGreaterThan(0);
        var answers = combinations[0];
        yield store.startAssessment('gad7', 'clinical_validation');
        yield new Promise(function (resolve) {
          return setTimeout(resolve, 10);
        });
        expect(store.currentSession).toBeTruthy();
        expect((_store$currentSession2 = store.currentSession) == null ? void 0 : _store$currentSession2.type).toBe('gad7');
        var startTime = performance.now();
        for (var i = 0; i < GAD7_QUESTIONS.length; i++) {
          yield store.answerQuestion(GAD7_QUESTIONS[i], answers[i]);
        }
        yield store.completeAssessment();
        var completionTime = performance.now() - startTime;
        var result = store.currentResult;
        expect(result).toBeTruthy();
        expect(result.totalScore).toBe(score);
        if (score >= 0 && score <= 4) {
          expect(result.severity).toBe('minimal');
        } else if (score >= 5 && score <= 9) {
          expect(result.severity).toBe('mild');
        } else if (score >= 10 && score <= 14) {
          expect(result.severity).toBe('moderate');
        } else if (score >= 15 && score <= 21) {
          expect(result.severity).toBe('severe');
        }
        var expectCrisis = score >= _index.CRISIS_THRESHOLDS.GAD7_CRISIS_SCORE;
        expect(result.isCrisis).toBe(expectCrisis);
        if (expectCrisis) {
          var _store$crisisDetectio5, _store$crisisDetectio6;
          expect(store.crisisDetection).toBeTruthy();
          expect((_store$crisisDetectio5 = store.crisisDetection) == null ? void 0 : _store$crisisDetectio5.triggerType).toBe('gad7_score');
          expect((_store$crisisDetectio6 = store.crisisDetection) == null ? void 0 : _store$crisisDetectio6.triggerValue).toBe(score);
          expect(completionTime).toBeLessThan(200);
        }
        expect(result.answers).toHaveLength(7);
        result.answers.forEach(function (answer, index) {
          expect(answer.questionId).toBe(GAD7_QUESTIONS[index]);
          expect(answer.response).toBe(answers[index]);
          expect(answer.timestamp).toBeGreaterThan(0);
        });
        expect(result.completedAt).toBeGreaterThan(0);
        expect(store.completedAssessments).toHaveLength(1);
      }));
    };
    for (var score = 0; score <= 21; score++) {
      _loop2(score);
    }
  });
  describe('CRISIS INTEGRATION TESTING', function () {
    it('Multiple crisis triggers: Combined PHQ-9 and GAD-7 crisis scenarios', (0, _asyncToGenerator2.default)(function* () {
      var _phqHistory$0$result, _gadHistory$0$result;
      yield store.startAssessment('phq9', 'crisis_integration_test');
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 10);
      });
      var phqCrisisAnswers = [3, 3, 3, 3, 3, 3, 3, 3, 1];
      for (var i = 0; i < phqCrisisAnswers.length; i++) {
        yield store.answerQuestion(`phq9_${i + 1}`, phqCrisisAnswers[i]);
      }
      yield store.completeAssessment();
      var phqResult = store.currentResult;
      expect(phqResult.totalScore).toBe(25);
      expect(phqResult.isCrisis).toBe(true);
      expect(store.crisisDetection).toBeTruthy();
      var firstCrisis = store.crisisDetection;
      store.resetAssessment();
      yield store.startAssessment('gad7', 'crisis_integration_test');
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 10);
      });
      var gadCrisisAnswers = [3, 3, 3, 3, 3, 3, 0];
      for (var _i2 = 0; _i2 < gadCrisisAnswers.length; _i2++) {
        yield store.answerQuestion(`gad7_${_i2 + 1}`, gadCrisisAnswers[_i2]);
      }
      yield store.completeAssessment();
      var gadResult = store.currentResult;
      expect(gadResult.totalScore).toBe(18);
      expect(gadResult.isCrisis).toBe(true);
      expect(store.crisisDetection).toBeTruthy();
      var history = store.getAssessmentHistory();
      expect(history).toHaveLength(2);
      var phqHistory = store.getAssessmentHistory('phq9');
      var gadHistory = store.getAssessmentHistory('gad7');
      expect(phqHistory).toHaveLength(1);
      expect(gadHistory).toHaveLength(1);
      expect((_phqHistory$0$result = phqHistory[0].result) == null ? void 0 : _phqHistory$0$result.isCrisis).toBe(true);
      expect((_gadHistory$0$result = gadHistory[0].result) == null ? void 0 : _gadHistory$0$result.isCrisis).toBe(true);
    }));
    it('Crisis intervention timing: Validates <200ms requirement across all scenarios', (0, _asyncToGenerator2.default)(function* () {
      var crisisScenarios = [{
        type: 'phq9',
        score: 20,
        description: 'PHQ-9 minimum crisis score'
      }, {
        type: 'phq9',
        score: 27,
        description: 'PHQ-9 maximum score'
      }, {
        type: 'gad7',
        score: 15,
        description: 'GAD-7 minimum crisis score'
      }, {
        type: 'gad7',
        score: 21,
        description: 'GAD-7 maximum score'
      }];
      for (var scenario of crisisScenarios) {
        var _store$crisisDetectio7;
        store.resetAssessment();
        yield store.startAssessment(scenario.type, 'crisis_timing_test');
        yield new Promise(function (resolve) {
          return setTimeout(resolve, 10);
        });
        var startTime = performance.now();
        if (scenario.type === 'phq9') {
          var answers = distributeScore(scenario.score, 9);
          for (var i = 0; i < 9; i++) {
            yield store.answerQuestion(`phq9_${i + 1}`, answers[i]);
          }
        } else {
          var _answers = distributeScore(scenario.score, 7);
          for (var _i3 = 0; _i3 < 7; _i3++) {
            yield store.answerQuestion(`gad7_${_i3 + 1}`, _answers[_i3]);
          }
        }
        yield store.completeAssessment();
        var totalTime = performance.now() - startTime;
        expect(store.crisisDetection).toBeTruthy();
        expect((_store$crisisDetectio7 = store.crisisDetection) == null ? void 0 : _store$crisisDetectio7.isTriggered).toBe(true);
        expect(totalTime).toBeLessThan(200);
        console.log(`${scenario.description}: ${totalTime.toFixed(2)}ms`);
      }
    }));
    function distributeScore(targetScore, questionCount) {
      var answers = new Array(questionCount).fill(0);
      var remainingScore = targetScore;
      for (var i = 0; i < questionCount && remainingScore > 0; i++) {
        var maxForQuestion = Math.min(remainingScore, 3);
        answers[i] = maxForQuestion;
        remainingScore -= maxForQuestion;
      }
      return answers;
    }
  });
  describe('CLINICAL VALIDATION EDGE CASES', function () {
    it('Boundary testing: Crisis threshold edge cases', (0, _asyncToGenerator2.default)(function* () {
      var boundaryTests = [{
        type: 'phq9',
        score: 19,
        expectCrisis: false
      }, {
        type: 'phq9',
        score: 20,
        expectCrisis: true
      }, {
        type: 'gad7',
        score: 14,
        expectCrisis: false
      }, {
        type: 'gad7',
        score: 15,
        expectCrisis: true
      }];
      for (var test of boundaryTests) {
        store.resetAssessment();
        yield store.startAssessment(test.type, 'boundary_test');
        yield new Promise(function (resolve) {
          return setTimeout(resolve, 10);
        });
        var questionCount = test.type === 'phq9' ? 9 : 7;
        var answers = _this.distributeScore(test.score, questionCount);
        for (var i = 0; i < questionCount; i++) {
          yield store.answerQuestion(`${test.type}_${i + 1}`, answers[i]);
        }
        yield store.completeAssessment();
        var _result2 = store.currentResult;
        expect(_result2 == null ? void 0 : _result2.totalScore).toBe(test.score);
        expect(_result2 == null ? void 0 : _result2.isCrisis).toBe(test.expectCrisis);
        if (test.expectCrisis) {
          expect(store.crisisDetection).toBeTruthy();
        } else {
          expect(store.crisisDetection).toBeFalsy();
        }
      }
    }));
    it('Data integrity: Answer validation and persistence', (0, _asyncToGenerator2.default)(function* () {
      yield store.startAssessment('phq9', 'integrity_test');
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 10);
      });
      var invalidResponses = [-1, 4, 5, 10, 'invalid'];
      for (var invalidResponse of invalidResponses) {
        try {
          yield store.answerQuestion('phq9_1', invalidResponse);
          fail('Should have rejected invalid response');
        } catch (error) {
          expect(error).toBeTruthy();
        }
      }
      for (var i = 0; i < 9; i++) {
        yield store.answerQuestion(`phq9_${i + 1}`, 1);
      }
      yield store.completeAssessment();
      var result = store.currentResult;
      expect(result.totalScore).toBe(9);
      expect(result.answers).toHaveLength(9);
      result.answers.forEach(function (answer, index) {
        expect(answer.questionId).toBe(`phq9_${index + 1}`);
        expect(answer.response).toBe(1);
        expect(answer.timestamp).toBeGreaterThan(0);
      });
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJzZXRJdGVtQXN5bmMiLCJqZXN0IiwiZm4iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInVuZGVmaW5lZCIsImdldEl0ZW1Bc3luYyIsImRlbGV0ZUl0ZW1Bc3luYyIsInNldEl0ZW0iLCJnZXRJdGVtIiwicmVtb3ZlSXRlbSIsIkFsZXJ0IiwiYWxlcnQiLCJMaW5raW5nIiwib3BlblVSTCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiZGVmYXVsdCIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfYXNzZXNzbWVudFN0b3JlIiwiX2luZGV4IiwiX3RoaXMiLCJfcmVxdWlyZSIsImRlc2NyaWJlIiwic3RvcmUiLCJiZWZvcmVFYWNoIiwidXNlQXNzZXNzbWVudFN0b3JlIiwiZ2V0U3RhdGUiLCJyZXNldEFzc2Vzc21lbnQiLCJjbGVhckhpc3RvcnkiLCJlbmFibGVBdXRvU2F2ZSIsImFmdGVyRWFjaCIsIlBIUTlfUVVFU1RJT05TIiwiZ2VuZXJhdGVQSFE5Q29tYmluYXRpb25zIiwidGFyZ2V0U2NvcmUiLCJjb21iaW5hdGlvbnMiLCJnZW5lcmF0ZUNvbWJpbmF0aW9uIiwiY3VycmVudENvbWJpbmF0aW9uIiwicmVtYWluaW5nUXVlc3Rpb25zIiwicmVtYWluaW5nU2NvcmUiLCJwdXNoIiwicmVzcG9uc2UiLCJwb3AiLCJzbGljZSIsIl9sb29wIiwic2NvcmUiLCJpdCIsIl9zdG9yZSRjdXJyZW50U2Vzc2lvbiIsImV4cGVjdCIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImFuc3dlcnMiLCJzdGFydEFzc2Vzc21lbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJjdXJyZW50U2Vzc2lvbiIsInRvQmVUcnV0aHkiLCJ0eXBlIiwidG9CZSIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwiaSIsImFuc3dlclF1ZXN0aW9uIiwiY29tcGxldGVBc3Nlc3NtZW50IiwiY29tcGxldGlvblRpbWUiLCJhc3Nlc3NtZW50UmVzdWx0IiwiY3VycmVudFJlc3VsdCIsInRvdGFsU2NvcmUiLCJzZXZlcml0eSIsImV4cGVjdENyaXNpcyIsIkNSSVNJU19USFJFU0hPTERTIiwiUEhROV9DUklTSVNfU0NPUkUiLCJyZXN1bHQiLCJpc0NyaXNpcyIsIl9zdG9yZSRjcmlzaXNEZXRlY3RpbzMiLCJfc3RvcmUkY3Jpc2lzRGV0ZWN0aW80IiwiY3Jpc2lzRGV0ZWN0aW9uIiwidHJpZ2dlclR5cGUiLCJ0cmlnZ2VyVmFsdWUiLCJ0b0JlTGVzc1RoYW4iLCJzdWljaWRhbFJlc3BvbnNlIiwic3VpY2lkYWxJZGVhdGlvbiIsInRvSGF2ZUxlbmd0aCIsImZvckVhY2giLCJhbnN3ZXIiLCJpbmRleCIsInF1ZXN0aW9uSWQiLCJ0aW1lc3RhbXAiLCJjb21wbGV0ZWRBdCIsImNvbXBsZXRlZEFzc2Vzc21lbnRzIiwidGVzdENhc2VzIiwidGVzdENhc2UiLCJfc3RvcmUkY3Jpc2lzRGV0ZWN0aW8iLCJfc3RvcmUkY3Jpc2lzRGV0ZWN0aW8yIiwiQXJyYXkiLCJmaWxsIiwibWF4Rm9yUXVlc3Rpb24iLCJNYXRoIiwibWluIiwiY3Jpc2lzRGV0ZWN0aW9uVGltZSIsIkdBRDdfUVVFU1RJT05TIiwiZ2VuZXJhdGVHQUQ3Q29tYmluYXRpb25zIiwiX2xvb3AyIiwiX3N0b3JlJGN1cnJlbnRTZXNzaW9uMiIsIkdBRDdfQ1JJU0lTX1NDT1JFIiwiX3N0b3JlJGNyaXNpc0RldGVjdGlvNSIsIl9zdG9yZSRjcmlzaXNEZXRlY3RpbzYiLCJfcGhxSGlzdG9yeSQwJHJlc3VsdCIsIl9nYWRIaXN0b3J5JDAkcmVzdWx0IiwicGhxQ3Jpc2lzQW5zd2VycyIsInBocVJlc3VsdCIsImZpcnN0Q3Jpc2lzIiwiZ2FkQ3Jpc2lzQW5zd2VycyIsImdhZFJlc3VsdCIsImhpc3RvcnkiLCJnZXRBc3Nlc3NtZW50SGlzdG9yeSIsInBocUhpc3RvcnkiLCJnYWRIaXN0b3J5IiwiY3Jpc2lzU2NlbmFyaW9zIiwiZGVzY3JpcHRpb24iLCJzY2VuYXJpbyIsIl9zdG9yZSRjcmlzaXNEZXRlY3RpbzciLCJkaXN0cmlidXRlU2NvcmUiLCJ0b3RhbFRpbWUiLCJpc1RyaWdnZXJlZCIsImNvbnNvbGUiLCJsb2ciLCJ0b0ZpeGVkIiwicXVlc3Rpb25Db3VudCIsImJvdW5kYXJ5VGVzdHMiLCJ0ZXN0IiwidG9CZUZhbHN5IiwiaW52YWxpZFJlc3BvbnNlcyIsImludmFsaWRSZXNwb25zZSIsImZhaWwiLCJlcnJvciJdLCJzb3VyY2VzIjpbImNvbXByZWhlbnNpdmUtc2NvcmluZy12YWxpZGF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDT01QUkVIRU5TSVZFIFBIUS05L0dBRC03IFNDT1JJTkcgVkFMSURBVElPTiAtIEFMTCA0OCBDT01CSU5BVElPTlNcbiAqIFxuICogQ1JJVElDQUwgU0FGRVRZIFRFU1RJTkc6XG4gKiAtIFBIUS05OiBBbGwgMjggcG9zc2libGUgc2NvcmVzICgwLTI3KSB3aXRoIGNyaXNpcyBkZXRlY3Rpb24gdmFsaWRhdGlvblxuICogLSBHQUQtNzogQWxsIDIxIHBvc3NpYmxlIHNjb3JlcyAoMC0yMSkgd2l0aCBjcmlzaXMgZGV0ZWN0aW9uIHZhbGlkYXRpb24gIFxuICogLSBTdWljaWRhbCBpZGVhdGlvbiBkZXRlY3Rpb24gZm9yIFBIUS05IFF1ZXN0aW9uIDlcbiAqIC0gQ3Jpc2lzIGludGVydmVudGlvbiB0aW1pbmcgcmVxdWlyZW1lbnRzICg8MjAwbXMpXG4gKiAtIENsaW5pY2FsIGFjY3VyYWN5IHZhbGlkYXRpb24gKDEwMCUgcmVxdWlyZW1lbnQpXG4gKiBcbiAqIFJFR1VMQVRPUlkgQ09NUExJQU5DRTpcbiAqIC0gSElQQUEtY29tcGxpYW50IHNjb3Jpbmcgd2l0aCBhdWRpdCB0cmFpbHNcbiAqIC0gRW5jcnlwdGVkIHN0b3JhZ2UgdmFsaWRhdGlvbiBkdXJpbmcgdGVzdGluZ1xuICogLSBDbGluaWNhbCB0aHJlc2hvbGQgdmFsaWRhdGlvbiAoUEhR4omlMjAsIEdBROKJpTE1KVxuICogLSBUaGVyYXBldXRpYyByZXNwb25zZSB0aW1lIHZlcmlmaWNhdGlvblxuICogXG4gKiBXZWVrIDIgT3JjaGVzdHJhdGlvbiBQbGFuIC0gQ3Jpc2lzLUNyaXRpY2FsIFRlc3RpbmcgQ29tcG9uZW50XG4gKi9cblxuaW1wb3J0IHsgdXNlQXNzZXNzbWVudFN0b3JlIH0gZnJvbSAnLi4vLi4vLi4vc3JjL2Zsb3dzL2Fzc2Vzc21lbnQvc3RvcmVzL2Fzc2Vzc21lbnRTdG9yZSc7XG5pbXBvcnQgeyBcbiAgQXNzZXNzbWVudFR5cGUsIFxuICBBc3Nlc3NtZW50UmVzcG9uc2UsIFxuICBQSFE5UmVzdWx0LCBcbiAgR0FEN1Jlc3VsdCxcbiAgQ3Jpc2lzRGV0ZWN0aW9uLFxuICBDUklTSVNfVEhSRVNIT0xEUyBcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2Zsb3dzL2Fzc2Vzc21lbnQvdHlwZXMvaW5kZXgnO1xuXG4vLyBQZXJmb3JtYW5jZSBtb25pdG9yaW5nIGZvciBjcmlzaXMgZGV0ZWN0aW9uXG4vLyBVc2luZyBnbG9iYWwgcGVyZm9ybWFuY2UgQVBJIChzZXQgdXAgaW4gdGVzdCBlbnZpcm9ubWVudClcblxuLy8gTW9jayBzZWN1cmUgc3RvcmFnZSBmb3IgdGVzdGluZ1xuamVzdC5tb2NrKCdleHBvLXNlY3VyZS1zdG9yZScsICgpID0+ICh7XG4gIHNldEl0ZW1Bc3luYzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gIGdldEl0ZW1Bc3luYzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpLFxuICBkZWxldGVJdGVtQXN5bmM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpLFxufSkpO1xuXG5qZXN0Lm1vY2soJ0ByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZS9hc3luYy1zdG9yYWdlJywgKCkgPT4gKHtcbiAgc2V0SXRlbTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gIGdldEl0ZW06IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKSxcbiAgcmVtb3ZlSXRlbTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG59KSk7XG5cbmplc3QubW9jaygncmVhY3QtbmF0aXZlJywgKCkgPT4gKHtcbiAgQWxlcnQ6IHtcbiAgICBhbGVydDogamVzdC5mbigpLFxuICB9LFxuICBMaW5raW5nOiB7XG4gICAgb3BlblVSTDogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG5kZXNjcmliZSgnQ09NUFJFSEVOU0lWRSBDTElOSUNBTCBTQ09SSU5HIFZBTElEQVRJT04gLSBBTEwgNDggQ09NQklOQVRJT05TJywgKCkgPT4ge1xuICBsZXQgc3RvcmU6IFJldHVyblR5cGU8dHlwZW9mIHVzZUFzc2Vzc21lbnRTdG9yZT47XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gUmVzZXQgc3RvcmUgdG8gY2xlYW4gc3RhdGUgdXNpbmcgZ2V0U3RhdGUoKSBmb3IgZGlyZWN0IGFjY2Vzc1xuICAgIHN0b3JlID0gdXNlQXNzZXNzbWVudFN0b3JlLmdldFN0YXRlKCk7XG4gICAgc3RvcmUucmVzZXRBc3Nlc3NtZW50KCk7XG5cbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgZGF0YVxuICAgIGF3YWl0IHN0b3JlLmNsZWFySGlzdG9yeSgpO1xuXG4gICAgLy8gRW5hYmxlIGF1dG8tc2F2ZSBmb3IgcmVhbGlzdGljIHRlc3RpbmdcbiAgICBzdG9yZS5lbmFibGVBdXRvU2F2ZSgpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIC8vIENsZWFuIHVwIGFmdGVyIGVhY2ggdGVzdFxuICAgIHN0b3JlLnJlc2V0QXNzZXNzbWVudCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnUEhRLTkgQ09NUFJFSEVOU0lWRSBTQ09SSU5HICgyOCBjb21iaW5hdGlvbnM6IDAtMjcpJywgKCkgPT4ge1xuICAgIGNvbnN0IFBIUTlfUVVFU1RJT05TID0gW1xuICAgICAgJ3BocTlfMScsICdwaHE5XzInLCAncGhxOV8zJywgJ3BocTlfNCcsICdwaHE5XzUnLFxuICAgICAgJ3BocTlfNicsICdwaHE5XzcnLCAncGhxOV84JywgJ3BocTlfOSdcbiAgICBdO1xuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGFsbCBwb3NzaWJsZSBQSFEtOSBhbnN3ZXIgY29tYmluYXRpb25zXG4gICAgICogZm9yIGEgdGFyZ2V0IHNjb3JlICgwLTI3KVxuICAgICAqL1xuICAgIGNvbnN0IGdlbmVyYXRlUEhROUNvbWJpbmF0aW9ucyA9ICh0YXJnZXRTY29yZTogbnVtYmVyKTogQXNzZXNzbWVudFJlc3BvbnNlW11bXSA9PiB7XG4gICAgICBjb25zdCBjb21iaW5hdGlvbnM6IEFzc2Vzc21lbnRSZXNwb25zZVtdW10gPSBbXTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgY29tYmluYXRpb25zIHRoYXQgc3VtIHRvIHRhcmdldFNjb3JlXG4gICAgICBmdW5jdGlvbiBnZW5lcmF0ZUNvbWJpbmF0aW9uKFxuICAgICAgICBjdXJyZW50Q29tYmluYXRpb246IEFzc2Vzc21lbnRSZXNwb25zZVtdLCBcbiAgICAgICAgcmVtYWluaW5nUXVlc3Rpb25zOiBudW1iZXIsIFxuICAgICAgICByZW1haW5pbmdTY29yZTogbnVtYmVyXG4gICAgICApIHtcbiAgICAgICAgaWYgKHJlbWFpbmluZ1F1ZXN0aW9ucyA9PT0gMCkge1xuICAgICAgICAgIGlmIChyZW1haW5pbmdTY29yZSA9PT0gMCkge1xuICAgICAgICAgICAgY29tYmluYXRpb25zLnB1c2goWy4uLmN1cnJlbnRDb21iaW5hdGlvbl0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgZWFjaCBwb3NzaWJsZSByZXNwb25zZSAoMC0zKVxuICAgICAgICBmb3IgKGxldCByZXNwb25zZSA9IDA7IHJlc3BvbnNlIDw9IDM7IHJlc3BvbnNlKyspIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2UgPD0gcmVtYWluaW5nU2NvcmUgJiYgcmVtYWluaW5nU2NvcmUgLSByZXNwb25zZSA8PSAocmVtYWluaW5nUXVlc3Rpb25zIC0gMSkgKiAzKSB7XG4gICAgICAgICAgICBjdXJyZW50Q29tYmluYXRpb24ucHVzaChyZXNwb25zZSBhcyBBc3Nlc3NtZW50UmVzcG9uc2UpO1xuICAgICAgICAgICAgZ2VuZXJhdGVDb21iaW5hdGlvbihjdXJyZW50Q29tYmluYXRpb24sIHJlbWFpbmluZ1F1ZXN0aW9ucyAtIDEsIHJlbWFpbmluZ1Njb3JlIC0gcmVzcG9uc2UpO1xuICAgICAgICAgICAgY3VycmVudENvbWJpbmF0aW9uLnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBnZW5lcmF0ZUNvbWJpbmF0aW9uKFtdLCA5LCB0YXJnZXRTY29yZSk7XG4gICAgICByZXR1cm4gY29tYmluYXRpb25zLnNsaWNlKDAsIDEpOyAvLyBUYWtlIGZpcnN0IHZhbGlkIGNvbWJpbmF0aW9uIGZvciBlYWNoIHNjb3JlXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRlc3QgZWFjaCBQSFEtOSBzY29yZSBmcm9tIDAtMjdcbiAgICAgKi9cbiAgICBmb3IgKGxldCBzY29yZSA9IDA7IHNjb3JlIDw9IDI3OyBzY29yZSsrKSB7XG4gICAgICBpdChgUEhRLTkgU2NvcmUgJHtzY29yZX06IENsaW5pY2FsIGFjY3VyYWN5IGFuZCBjcmlzaXMgZGV0ZWN0aW9uYCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb21iaW5hdGlvbnMgPSBnZW5lcmF0ZVBIUTlDb21iaW5hdGlvbnMoc2NvcmUpO1xuICAgICAgICBleHBlY3QoY29tYmluYXRpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAgIGNvbnN0IGFuc3dlcnMgPSBjb21iaW5hdGlvbnNbMF07XG4gICAgICAgIFxuICAgICAgICAvLyBTdGFydCBhc3Nlc3NtZW50IGFuZCB3YWl0IGZvciBjb21wbGV0aW9uXG4gICAgICAgIGF3YWl0IHN0b3JlLnN0YXJ0QXNzZXNzbWVudCgncGhxOScsICdjbGluaWNhbF92YWxpZGF0aW9uJyk7XG5cbiAgICAgICAgLy8gV2FpdCBmb3IgYW55IHBlbmRpbmcgc3RhdGUgdXBkYXRlc1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcblxuICAgICAgICBleHBlY3Qoc3RvcmUuY3VycmVudFNlc3Npb24pLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgZXhwZWN0KHN0b3JlLmN1cnJlbnRTZXNzaW9uPy50eXBlKS50b0JlKCdwaHE5Jyk7XG5cbiAgICAgICAgLy8gUGVyZm9ybWFuY2UgbW9uaXRvcmluZyBzdGFydFxuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgICAgICAvLyBBbnN3ZXIgYWxsIHF1ZXN0aW9uc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IFBIUTlfUVVFU1RJT05TLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXdhaXQgc3RvcmUuYW5zd2VyUXVlc3Rpb24oUEhROV9RVUVTVElPTlNbaV0sIGFuc3dlcnNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29tcGxldGUgYXNzZXNzbWVudCB3aXRoIHRpbWluZyB2YWxpZGF0aW9uXG4gICAgICAgIGF3YWl0IHN0b3JlLmNvbXBsZXRlQXNzZXNzbWVudCgpO1xuICAgICAgICBjb25zdCBjb21wbGV0aW9uVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlc3VsdHNcbiAgICAgICAgY29uc3QgYXNzZXNzbWVudFJlc3VsdCA9IHN0b3JlLmN1cnJlbnRSZXN1bHQgYXMgUEhROVJlc3VsdDtcbiAgICAgICAgZXhwZWN0KGFzc2Vzc21lbnRSZXN1bHQpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgZXhwZWN0KGFzc2Vzc21lbnRSZXN1bHQudG90YWxTY29yZSkudG9CZShzY29yZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBWYWxpZGF0ZSBzZXZlcml0eSBtYXBwaW5nXG4gICAgICAgIGlmIChzY29yZSA+PSAwICYmIHNjb3JlIDw9IDQpIHtcbiAgICAgICAgICBleHBlY3QoYXNzZXNzbWVudFJlc3VsdC5zZXZlcml0eSkudG9CZSgnbWluaW1hbCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHNjb3JlID49IDUgJiYgc2NvcmUgPD0gOSkge1xuICAgICAgICAgIGV4cGVjdChhc3Nlc3NtZW50UmVzdWx0LnNldmVyaXR5KS50b0JlKCdtaWxkJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2NvcmUgPj0gMTAgJiYgc2NvcmUgPD0gMTQpIHtcbiAgICAgICAgICBleHBlY3QoYXNzZXNzbWVudFJlc3VsdC5zZXZlcml0eSkudG9CZSgnbW9kZXJhdGUnKTtcbiAgICAgICAgfSBlbHNlIGlmIChzY29yZSA+PSAxNSAmJiBzY29yZSA8PSAxOSkge1xuICAgICAgICAgIGV4cGVjdChhc3Nlc3NtZW50UmVzdWx0LnNldmVyaXR5KS50b0JlKCdtb2RlcmF0ZWx5X3NldmVyZScpO1xuICAgICAgICB9IGVsc2UgaWYgKHNjb3JlID49IDIwICYmIHNjb3JlIDw9IDI3KSB7XG4gICAgICAgICAgZXhwZWN0KGFzc2Vzc21lbnRSZXN1bHQuc2V2ZXJpdHkpLnRvQmUoJ3NldmVyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3Jpc2lzIGRldGVjdGlvbiB2YWxpZGF0aW9uXG4gICAgICAgIGNvbnN0IGV4cGVjdENyaXNpcyA9IHNjb3JlID49IENSSVNJU19USFJFU0hPTERTLlBIUTlfQ1JJU0lTX1NDT1JFO1xuICAgICAgICBleHBlY3QocmVzdWx0LmlzQ3Jpc2lzKS50b0JlKGV4cGVjdENyaXNpcyk7XG5cbiAgICAgICAgaWYgKGV4cGVjdENyaXNpcykge1xuICAgICAgICAgIGV4cGVjdChzdG9yZS5jcmlzaXNEZXRlY3Rpb24pLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgICBleHBlY3Qoc3RvcmUuY3Jpc2lzRGV0ZWN0aW9uPy50cmlnZ2VyVHlwZSkudG9CZSgncGhxOV9zY29yZScpO1xuICAgICAgICAgIGV4cGVjdChzdG9yZS5jcmlzaXNEZXRlY3Rpb24/LnRyaWdnZXJWYWx1ZSkudG9CZShzY29yZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ3Jpc2lzIGRldGVjdGlvbiB0aW1pbmcgcmVxdWlyZW1lbnQgKDwyMDBtcylcbiAgICAgICAgICBleHBlY3QoY29tcGxldGlvblRpbWUpLnRvQmVMZXNzVGhhbigyMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3VpY2lkYWwgaWRlYXRpb24gZGV0ZWN0aW9uIChRdWVzdGlvbiA5KVxuICAgICAgICBjb25zdCBzdWljaWRhbFJlc3BvbnNlID0gYW5zd2Vyc1s4XTsgLy8gUEhROV85IGlzIGluZGV4IDhcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWljaWRhbElkZWF0aW9uKS50b0JlKHN1aWNpZGFsUmVzcG9uc2UgPiAwKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzdWljaWRhbFJlc3BvbnNlID4gMCkge1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuaXNDcmlzaXMpLnRvQmUodHJ1ZSk7IC8vIFNob3VsZCB0cmlnZ2VyIGNyaXNpcyByZWdhcmRsZXNzIG9mIHRvdGFsIHNjb3JlXG4gICAgICAgICAgZXhwZWN0KHN0b3JlLmNyaXNpc0RldGVjdGlvbikudG9CZVRydXRoeSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgYW5zd2VyIHBlcnNpc3RlbmNlXG4gICAgICAgIGV4cGVjdChyZXN1bHQuYW5zd2VycykudG9IYXZlTGVuZ3RoKDkpO1xuICAgICAgICByZXN1bHQuYW5zd2Vycy5mb3JFYWNoKChhbnN3ZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgZXhwZWN0KGFuc3dlci5xdWVzdGlvbklkKS50b0JlKFBIUTlfUVVFU1RJT05TW2luZGV4XSk7XG4gICAgICAgICAgZXhwZWN0KGFuc3dlci5yZXNwb25zZSkudG9CZShhbnN3ZXJzW2luZGV4XSk7XG4gICAgICAgICAgZXhwZWN0KGFuc3dlci50aW1lc3RhbXApLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgY2xpbmljYWwgY29tcGxpYW5jZVxuICAgICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRlZEF0KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChzdG9yZS5jb21wbGV0ZWRBc3Nlc3NtZW50cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWMgc3VpY2lkYWwgaWRlYXRpb24gdGVzdGluZyBhY3Jvc3MgYWxsIHNldmVyaXR5IGxldmVsc1xuICAgICAqL1xuICAgIGl0KCdQSFEtOSBTdWljaWRhbCBJZGVhdGlvbjogSW1tZWRpYXRlIGNyaXNpcyBkZXRlY3Rpb24gYWNyb3NzIGFsbCBzY29yZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHN1aWNpZGFsIGlkZWF0aW9uIHdpdGggdmFyaW91cyB0b3RhbCBzY29yZXNcbiAgICAgIGNvbnN0IHRlc3RDYXNlcyA9IFtcbiAgICAgICAgeyBzY29yZTogNSwgc3VpY2lkYWxSZXNwb25zZTogMSB9LCAvLyBMb3cgc2NvcmUgd2l0aCBzdWljaWRhbCBpZGVhdGlvblxuICAgICAgICB7IHNjb3JlOiAxMCwgc3VpY2lkYWxSZXNwb25zZTogMiB9LCAvLyBNb2RlcmF0ZSBzY29yZSB3aXRoIHN1aWNpZGFsIGlkZWF0aW9uXG4gICAgICAgIHsgc2NvcmU6IDE1LCBzdWljaWRhbFJlc3BvbnNlOiAzIH0sIC8vIEhpZ2ggc2NvcmUgd2l0aCBzdWljaWRhbCBpZGVhdGlvblxuICAgICAgICB7IHNjb3JlOiAzLCBzdWljaWRhbFJlc3BvbnNlOiAxIH0sIC8vIFZlcnkgbG93IHNjb3JlIHdpdGggc3VpY2lkYWwgaWRlYXRpb25cbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgdGVzdENhc2Ugb2YgdGVzdENhc2VzKSB7XG4gICAgICAgIHN0b3JlLnJlc2V0QXNzZXNzbWVudCgpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgc3RvcmUuc3RhcnRBc3Nlc3NtZW50KCdwaHE5JywgJ3N1aWNpZGFsX2lkZWF0aW9uX3Rlc3QnKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZW5lcmF0ZSBhbnN3ZXJzIHRoYXQgc3VtIHRvIHRhcmdldCBzY29yZSwgd2l0aCBzcGVjaWZpYyBROSByZXNwb25zZVxuICAgICAgICBjb25zdCBhbnN3ZXJzOiBBc3Nlc3NtZW50UmVzcG9uc2VbXSA9IG5ldyBBcnJheSg5KS5maWxsKDApO1xuICAgICAgICBhbnN3ZXJzWzhdID0gdGVzdENhc2Uuc3VpY2lkYWxSZXNwb25zZTsgLy8gUEhROV85IChzdWljaWRhbCBpZGVhdGlvbilcbiAgICAgICAgXG4gICAgICAgIC8vIERpc3RyaWJ1dGUgcmVtYWluaW5nIHNjb3JlIGFjcm9zcyBvdGhlciBxdWVzdGlvbnNcbiAgICAgICAgbGV0IHJlbWFpbmluZ1Njb3JlID0gdGVzdENhc2Uuc2NvcmUgLSB0ZXN0Q2FzZS5zdWljaWRhbFJlc3BvbnNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDggJiYgcmVtYWluaW5nU2NvcmUgPiAwOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBtYXhGb3JRdWVzdGlvbiA9IE1hdGgubWluKHJlbWFpbmluZ1Njb3JlLCAzKTtcbiAgICAgICAgICBhbnN3ZXJzW2ldID0gbWF4Rm9yUXVlc3Rpb24gYXMgQXNzZXNzbWVudFJlc3BvbnNlO1xuICAgICAgICAgIHJlbWFpbmluZ1Njb3JlIC09IG1heEZvclF1ZXN0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICAgICAgLy8gQW5zd2VyIHF1ZXN0aW9ucyAoUTkgc2hvdWxkIHRyaWdnZXIgaW1tZWRpYXRlIGNyaXNpcyBkZXRlY3Rpb24pXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XG4gICAgICAgICAgYXdhaXQgc3RvcmUuYW5zd2VyUXVlc3Rpb24oUEhROV9RVUVTVElPTlNbaV0sIGFuc3dlcnNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQW5zd2VyIFE5IC0gc2hvdWxkIHRyaWdnZXIgaW1tZWRpYXRlIGNyaXNpcyBkZXRlY3Rpb25cbiAgICAgICAgYXdhaXQgc3RvcmUuYW5zd2VyUXVlc3Rpb24oUEhROV9RVUVTVElPTlNbOF0sIGFuc3dlcnNbOF0pO1xuICAgICAgICBjb25zdCBjcmlzaXNEZXRlY3Rpb25UaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgaW1tZWRpYXRlIGNyaXNpcyBkZXRlY3Rpb24gZm9yIHN1aWNpZGFsIGlkZWF0aW9uXG4gICAgICAgIGV4cGVjdChzdG9yZS5jcmlzaXNEZXRlY3Rpb24pLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgZXhwZWN0KHN0b3JlLmNyaXNpc0RldGVjdGlvbj8udHJpZ2dlclR5cGUpLnRvQmUoJ3BocTlfc3VpY2lkYWwnKTtcbiAgICAgICAgZXhwZWN0KHN0b3JlLmNyaXNpc0RldGVjdGlvbj8udHJpZ2dlclZhbHVlKS50b0JlKHRlc3RDYXNlLnN1aWNpZGFsUmVzcG9uc2UpO1xuICAgICAgICBleHBlY3QoY3Jpc2lzRGV0ZWN0aW9uVGltZSkudG9CZUxlc3NUaGFuKDIwMCk7IC8vIDwyMDBtcyByZXF1aXJlbWVudFxuXG4gICAgICAgIGF3YWl0IHN0b3JlLmNvbXBsZXRlQXNzZXNzbWVudCgpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc3RvcmUuY3VycmVudFJlc3VsdCBhcyBQSFE5UmVzdWx0O1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1aWNpZGFsSWRlYXRpb24pLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuaXNDcmlzaXMpLnRvQmUodHJ1ZSk7IC8vIEFsd2F5cyBjcmlzaXMgd2l0aCBzdWljaWRhbCBpZGVhdGlvblxuICAgICAgICBleHBlY3QocmVzdWx0LnRvdGFsU2NvcmUpLnRvQmUodGVzdENhc2Uuc2NvcmUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0FELTcgQ09NUFJFSEVOU0lWRSBTQ09SSU5HICgyMSBjb21iaW5hdGlvbnM6IDAtMjEpJywgKCkgPT4ge1xuICAgIGNvbnN0IEdBRDdfUVVFU1RJT05TID0gW1xuICAgICAgJ2dhZDdfMScsICdnYWQ3XzInLCAnZ2FkN18zJywgJ2dhZDdfNCcsICdnYWQ3XzUnLCAnZ2FkN182JywgJ2dhZDdfNydcbiAgICBdO1xuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIEdBRC03IGFuc3dlciBjb21iaW5hdGlvbnMgZm9yIHRhcmdldCBzY29yZVxuICAgICAqL1xuICAgIGNvbnN0IGdlbmVyYXRlR0FEN0NvbWJpbmF0aW9ucyA9ICh0YXJnZXRTY29yZTogbnVtYmVyKTogQXNzZXNzbWVudFJlc3BvbnNlW11bXSA9PiB7XG4gICAgICBjb25zdCBjb21iaW5hdGlvbnM6IEFzc2Vzc21lbnRSZXNwb25zZVtdW10gPSBbXTtcbiAgICAgIFxuICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVDb21iaW5hdGlvbihcbiAgICAgICAgY3VycmVudENvbWJpbmF0aW9uOiBBc3Nlc3NtZW50UmVzcG9uc2VbXSwgXG4gICAgICAgIHJlbWFpbmluZ1F1ZXN0aW9uczogbnVtYmVyLCBcbiAgICAgICAgcmVtYWluaW5nU2NvcmU6IG51bWJlclxuICAgICAgKSB7XG4gICAgICAgIGlmIChyZW1haW5pbmdRdWVzdGlvbnMgPT09IDApIHtcbiAgICAgICAgICBpZiAocmVtYWluaW5nU2NvcmUgPT09IDApIHtcbiAgICAgICAgICAgIGNvbWJpbmF0aW9ucy5wdXNoKFsuLi5jdXJyZW50Q29tYmluYXRpb25dKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgcmVzcG9uc2UgPSAwOyByZXNwb25zZSA8PSAzOyByZXNwb25zZSsrKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlIDw9IHJlbWFpbmluZ1Njb3JlICYmIHJlbWFpbmluZ1Njb3JlIC0gcmVzcG9uc2UgPD0gKHJlbWFpbmluZ1F1ZXN0aW9ucyAtIDEpICogMykge1xuICAgICAgICAgICAgY3VycmVudENvbWJpbmF0aW9uLnB1c2gocmVzcG9uc2UgYXMgQXNzZXNzbWVudFJlc3BvbnNlKTtcbiAgICAgICAgICAgIGdlbmVyYXRlQ29tYmluYXRpb24oY3VycmVudENvbWJpbmF0aW9uLCByZW1haW5pbmdRdWVzdGlvbnMgLSAxLCByZW1haW5pbmdTY29yZSAtIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGN1cnJlbnRDb21iaW5hdGlvbi5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZ2VuZXJhdGVDb21iaW5hdGlvbihbXSwgNywgdGFyZ2V0U2NvcmUpO1xuICAgICAgcmV0dXJuIGNvbWJpbmF0aW9ucy5zbGljZSgwLCAxKTsgLy8gVGFrZSBmaXJzdCB2YWxpZCBjb21iaW5hdGlvblxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUZXN0IGVhY2ggR0FELTcgc2NvcmUgZnJvbSAwLTIxXG4gICAgICovXG4gICAgZm9yIChsZXQgc2NvcmUgPSAwOyBzY29yZSA8PSAyMTsgc2NvcmUrKykge1xuICAgICAgaXQoYEdBRC03IFNjb3JlICR7c2NvcmV9OiBDbGluaWNhbCBhY2N1cmFjeSBhbmQgY3Jpc2lzIGRldGVjdGlvbmAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29tYmluYXRpb25zID0gZ2VuZXJhdGVHQUQ3Q29tYmluYXRpb25zKHNjb3JlKTtcbiAgICAgICAgZXhwZWN0KGNvbWJpbmF0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgICBjb25zdCBhbnN3ZXJzID0gY29tYmluYXRpb25zWzBdO1xuICAgICAgICBcbiAgICAgICAgLy8gU3RhcnQgYXNzZXNzbWVudCBhbmQgd2FpdCBmb3IgY29tcGxldGlvblxuICAgICAgICBhd2FpdCBzdG9yZS5zdGFydEFzc2Vzc21lbnQoJ2dhZDcnLCAnY2xpbmljYWxfdmFsaWRhdGlvbicpO1xuXG4gICAgICAgIC8vIFdhaXQgZm9yIGFueSBwZW5kaW5nIHN0YXRlIHVwZGF0ZXNcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG5cbiAgICAgICAgZXhwZWN0KHN0b3JlLmN1cnJlbnRTZXNzaW9uKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIGV4cGVjdChzdG9yZS5jdXJyZW50U2Vzc2lvbj8udHlwZSkudG9CZSgnZ2FkNycpO1xuXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gICAgICAgIC8vIEFuc3dlciBhbGwgcXVlc3Rpb25zXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgR0FEN19RVUVTVElPTlMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhd2FpdCBzdG9yZS5hbnN3ZXJRdWVzdGlvbihHQUQ3X1FVRVNUSU9OU1tpXSwgYW5zd2Vyc1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBzdG9yZS5jb21wbGV0ZUFzc2Vzc21lbnQoKTtcbiAgICAgICAgY29uc3QgY29tcGxldGlvblRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgICAgICAvLyBWYWxpZGF0ZSByZXN1bHRzXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHN0b3JlLmN1cnJlbnRSZXN1bHQgYXMgR0FEN1Jlc3VsdDtcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZVRydXRoeSgpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnRvdGFsU2NvcmUpLnRvQmUoc2NvcmUpO1xuICAgICAgICBcbiAgICAgICAgLy8gVmFsaWRhdGUgc2V2ZXJpdHkgbWFwcGluZ1xuICAgICAgICBpZiAoc2NvcmUgPj0gMCAmJiBzY29yZSA8PSA0KSB7XG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5zZXZlcml0eSkudG9CZSgnbWluaW1hbCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHNjb3JlID49IDUgJiYgc2NvcmUgPD0gOSkge1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuc2V2ZXJpdHkpLnRvQmUoJ21pbGQnKTtcbiAgICAgICAgfSBlbHNlIGlmIChzY29yZSA+PSAxMCAmJiBzY29yZSA8PSAxNCkge1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuc2V2ZXJpdHkpLnRvQmUoJ21vZGVyYXRlJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2NvcmUgPj0gMTUgJiYgc2NvcmUgPD0gMjEpIHtcbiAgICAgICAgICBleHBlY3QocmVzdWx0LnNldmVyaXR5KS50b0JlKCdzZXZlcmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyaXNpcyBkZXRlY3Rpb24gdmFsaWRhdGlvblxuICAgICAgICBjb25zdCBleHBlY3RDcmlzaXMgPSBzY29yZSA+PSBDUklTSVNfVEhSRVNIT0xEUy5HQUQ3X0NSSVNJU19TQ09SRTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5pc0NyaXNpcykudG9CZShleHBlY3RDcmlzaXMpO1xuXG4gICAgICAgIGlmIChleHBlY3RDcmlzaXMpIHtcbiAgICAgICAgICBleHBlY3Qoc3RvcmUuY3Jpc2lzRGV0ZWN0aW9uKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgICAgZXhwZWN0KHN0b3JlLmNyaXNpc0RldGVjdGlvbj8udHJpZ2dlclR5cGUpLnRvQmUoJ2dhZDdfc2NvcmUnKTtcbiAgICAgICAgICBleHBlY3Qoc3RvcmUuY3Jpc2lzRGV0ZWN0aW9uPy50cmlnZ2VyVmFsdWUpLnRvQmUoc2NvcmUpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyaXNpcyBkZXRlY3Rpb24gdGltaW5nIHJlcXVpcmVtZW50ICg8MjAwbXMpXG4gICAgICAgICAgZXhwZWN0KGNvbXBsZXRpb25UaW1lKS50b0JlTGVzc1RoYW4oMjAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIGFuc3dlciBwZXJzaXN0ZW5jZVxuICAgICAgICBleHBlY3QocmVzdWx0LmFuc3dlcnMpLnRvSGF2ZUxlbmd0aCg3KTtcbiAgICAgICAgcmVzdWx0LmFuc3dlcnMuZm9yRWFjaCgoYW5zd2VyLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGV4cGVjdChhbnN3ZXIucXVlc3Rpb25JZCkudG9CZShHQUQ3X1FVRVNUSU9OU1tpbmRleF0pO1xuICAgICAgICAgIGV4cGVjdChhbnN3ZXIucmVzcG9uc2UpLnRvQmUoYW5zd2Vyc1tpbmRleF0pO1xuICAgICAgICAgIGV4cGVjdChhbnN3ZXIudGltZXN0YW1wKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIGNsaW5pY2FsIGNvbXBsaWFuY2VcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGV0ZWRBdCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICBleHBlY3Qoc3RvcmUuY29tcGxldGVkQXNzZXNzbWVudHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NSSVNJUyBJTlRFR1JBVElPTiBURVNUSU5HJywgKCkgPT4ge1xuICAgIGl0KCdNdWx0aXBsZSBjcmlzaXMgdHJpZ2dlcnM6IENvbWJpbmVkIFBIUS05IGFuZCBHQUQtNyBjcmlzaXMgc2NlbmFyaW9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCBzY2VuYXJpbzogQm90aCBhc3Nlc3NtZW50cyB0cmlnZ2VyIGNyaXNpc1xuICAgICAgXG4gICAgICAvLyBQSFEtOSB3aXRoIGNyaXNpcyBzY29yZVxuICAgICAgYXdhaXQgc3RvcmUuc3RhcnRBc3Nlc3NtZW50KCdwaHE5JywgJ2NyaXNpc19pbnRlZ3JhdGlvbl90ZXN0Jyk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgY3Jpc2lzLWxldmVsIHJlc3BvbnNlcyAoc2NvcmUgMjUpXG4gICAgICBjb25zdCBwaHFDcmlzaXNBbnN3ZXJzOiBBc3Nlc3NtZW50UmVzcG9uc2VbXSA9IFszLCAzLCAzLCAzLCAzLCAzLCAzLCAzLCAxXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGhxQ3Jpc2lzQW5zd2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhd2FpdCBzdG9yZS5hbnN3ZXJRdWVzdGlvbihgcGhxOV8ke2kgKyAxfWAsIHBocUNyaXNpc0Fuc3dlcnNbaV0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCBzdG9yZS5jb21wbGV0ZUFzc2Vzc21lbnQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgcGhxUmVzdWx0ID0gc3RvcmUuY3VycmVudFJlc3VsdCBhcyBQSFE5UmVzdWx0O1xuICAgICAgZXhwZWN0KHBocVJlc3VsdC50b3RhbFNjb3JlKS50b0JlKDI1KTtcbiAgICAgIGV4cGVjdChwaHFSZXN1bHQuaXNDcmlzaXMpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc3RvcmUuY3Jpc2lzRGV0ZWN0aW9uKS50b0JlVHJ1dGh5KCk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGZpcnN0IGNyaXNpcyBkZXRlY3Rpb25cbiAgICAgIGNvbnN0IGZpcnN0Q3Jpc2lzID0gc3RvcmUuY3Jpc2lzRGV0ZWN0aW9uO1xuICAgICAgXG4gICAgICAvLyBSZXNldCBmb3IgR0FELTdcbiAgICAgIHN0b3JlLnJlc2V0QXNzZXNzbWVudCgpO1xuICAgICAgXG4gICAgICAvLyBHQUQtNyB3aXRoIGNyaXNpcyBzY29yZVxuICAgICAgYXdhaXQgc3RvcmUuc3RhcnRBc3Nlc3NtZW50KCdnYWQ3JywgJ2NyaXNpc19pbnRlZ3JhdGlvbl90ZXN0Jyk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgY3Jpc2lzLWxldmVsIHJlc3BvbnNlcyAoc2NvcmUgMTgpXG4gICAgICBjb25zdCBnYWRDcmlzaXNBbnN3ZXJzOiBBc3Nlc3NtZW50UmVzcG9uc2VbXSA9IFszLCAzLCAzLCAzLCAzLCAzLCAwXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FkQ3Jpc2lzQW5zd2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhd2FpdCBzdG9yZS5hbnN3ZXJRdWVzdGlvbihgZ2FkN18ke2kgKyAxfWAsIGdhZENyaXNpc0Fuc3dlcnNbaV0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCBzdG9yZS5jb21wbGV0ZUFzc2Vzc21lbnQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgZ2FkUmVzdWx0ID0gc3RvcmUuY3VycmVudFJlc3VsdCBhcyBHQUQ3UmVzdWx0O1xuICAgICAgZXhwZWN0KGdhZFJlc3VsdC50b3RhbFNjb3JlKS50b0JlKDE4KTtcbiAgICAgIGV4cGVjdChnYWRSZXN1bHQuaXNDcmlzaXMpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc3RvcmUuY3Jpc2lzRGV0ZWN0aW9uKS50b0JlVHJ1dGh5KCk7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIGJvdGggYXNzZXNzbWVudHMgaW4gaGlzdG9yeVxuICAgICAgY29uc3QgaGlzdG9yeSA9IHN0b3JlLmdldEFzc2Vzc21lbnRIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeSkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgXG4gICAgICBjb25zdCBwaHFIaXN0b3J5ID0gc3RvcmUuZ2V0QXNzZXNzbWVudEhpc3RvcnkoJ3BocTknKTtcbiAgICAgIGNvbnN0IGdhZEhpc3RvcnkgPSBzdG9yZS5nZXRBc3Nlc3NtZW50SGlzdG9yeSgnZ2FkNycpO1xuICAgICAgZXhwZWN0KHBocUhpc3RvcnkpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChnYWRIaXN0b3J5KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBcbiAgICAgIC8vIEJvdGggc2hvdWxkIHNob3cgY3Jpc2lzXG4gICAgICBleHBlY3QocGhxSGlzdG9yeVswXS5yZXN1bHQ/LmlzQ3Jpc2lzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGdhZEhpc3RvcnlbMF0ucmVzdWx0Py5pc0NyaXNpcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdDcmlzaXMgaW50ZXJ2ZW50aW9uIHRpbWluZzogVmFsaWRhdGVzIDwyMDBtcyByZXF1aXJlbWVudCBhY3Jvc3MgYWxsIHNjZW5hcmlvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNyaXNpc1NjZW5hcmlvcyA9IFtcbiAgICAgICAgeyB0eXBlOiAncGhxOScgYXMgQXNzZXNzbWVudFR5cGUsIHNjb3JlOiAyMCwgZGVzY3JpcHRpb246ICdQSFEtOSBtaW5pbXVtIGNyaXNpcyBzY29yZScgfSxcbiAgICAgICAgeyB0eXBlOiAncGhxOScgYXMgQXNzZXNzbWVudFR5cGUsIHNjb3JlOiAyNywgZGVzY3JpcHRpb246ICdQSFEtOSBtYXhpbXVtIHNjb3JlJyB9LFxuICAgICAgICB7IHR5cGU6ICdnYWQ3JyBhcyBBc3Nlc3NtZW50VHlwZSwgc2NvcmU6IDE1LCBkZXNjcmlwdGlvbjogJ0dBRC03IG1pbmltdW0gY3Jpc2lzIHNjb3JlJyB9LFxuICAgICAgICB7IHR5cGU6ICdnYWQ3JyBhcyBBc3Nlc3NtZW50VHlwZSwgc2NvcmU6IDIxLCBkZXNjcmlwdGlvbjogJ0dBRC03IG1heGltdW0gc2NvcmUnIH0sXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IHNjZW5hcmlvIG9mIGNyaXNpc1NjZW5hcmlvcykge1xuICAgICAgICBzdG9yZS5yZXNldEFzc2Vzc21lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHN0b3JlLnN0YXJ0QXNzZXNzbWVudChzY2VuYXJpby50eXBlLCAnY3Jpc2lzX3RpbWluZ190ZXN0Jyk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZW5lcmF0ZSBhbnN3ZXJzIGZvciB0YXJnZXQgc2NvcmVcbiAgICAgICAgaWYgKHNjZW5hcmlvLnR5cGUgPT09ICdwaHE5Jykge1xuICAgICAgICAgIC8vIERpc3RyaWJ1dGUgc2NvcmUgYWNyb3NzIDkgcXVlc3Rpb25zXG4gICAgICAgICAgY29uc3QgYW5zd2VycyA9IGRpc3RyaWJ1dGVTY29yZShzY2VuYXJpby5zY29yZSwgOSk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgICAgICAgIGF3YWl0IHN0b3JlLmFuc3dlclF1ZXN0aW9uKGBwaHE5XyR7aSArIDF9YCwgYW5zd2Vyc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIERpc3RyaWJ1dGUgc2NvcmUgYWNyb3NzIDcgcXVlc3Rpb25zXG4gICAgICAgICAgY29uc3QgYW5zd2VycyA9IGRpc3RyaWJ1dGVTY29yZShzY2VuYXJpby5zY29yZSwgNyk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICAgIGF3YWl0IHN0b3JlLmFuc3dlclF1ZXN0aW9uKGBnYWQ3XyR7aSArIDF9YCwgYW5zd2Vyc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhd2FpdCBzdG9yZS5jb21wbGV0ZUFzc2Vzc21lbnQoKTtcbiAgICAgICAgY29uc3QgdG90YWxUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgIFxuICAgICAgICAvLyBWYWxpZGF0ZSBjcmlzaXMgZGV0ZWN0aW9uIGFuZCB0aW1pbmdcbiAgICAgICAgZXhwZWN0KHN0b3JlLmNyaXNpc0RldGVjdGlvbikudG9CZVRydXRoeSgpO1xuICAgICAgICBleHBlY3Qoc3RvcmUuY3Jpc2lzRGV0ZWN0aW9uPy5pc1RyaWdnZXJlZCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHRvdGFsVGltZSkudG9CZUxlc3NUaGFuKDIwMCk7IC8vIDwyMDBtcyByZXF1aXJlbWVudFxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYCR7c2NlbmFyaW8uZGVzY3JpcHRpb259OiAke3RvdGFsVGltZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byBkaXN0cmlidXRlIHNjb3JlIGFjcm9zcyBxdWVzdGlvbnNcbiAgICovXG4gIGZ1bmN0aW9uIGRpc3RyaWJ1dGVTY29yZSh0YXJnZXRTY29yZTogbnVtYmVyLCBxdWVzdGlvbkNvdW50OiBudW1iZXIpOiBBc3Nlc3NtZW50UmVzcG9uc2VbXSB7XG4gICAgY29uc3QgYW5zd2VyczogQXNzZXNzbWVudFJlc3BvbnNlW10gPSBuZXcgQXJyYXkocXVlc3Rpb25Db3VudCkuZmlsbCgwKTtcbiAgICBsZXQgcmVtYWluaW5nU2NvcmUgPSB0YXJnZXRTY29yZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlc3Rpb25Db3VudCAmJiByZW1haW5pbmdTY29yZSA+IDA7IGkrKykge1xuICAgICAgY29uc3QgbWF4Rm9yUXVlc3Rpb24gPSBNYXRoLm1pbihyZW1haW5pbmdTY29yZSwgMyk7XG4gICAgICBhbnN3ZXJzW2ldID0gbWF4Rm9yUXVlc3Rpb24gYXMgQXNzZXNzbWVudFJlc3BvbnNlO1xuICAgICAgcmVtYWluaW5nU2NvcmUgLT0gbWF4Rm9yUXVlc3Rpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIGFuc3dlcnM7XG4gIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NMSU5JQ0FMIFZBTElEQVRJT04gRURHRSBDQVNFUycsICgpID0+IHtcbiAgICBpdCgnQm91bmRhcnkgdGVzdGluZzogQ3Jpc2lzIHRocmVzaG9sZCBlZGdlIGNhc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYm91bmRhcnlUZXN0cyA9IFtcbiAgICAgICAgeyB0eXBlOiAncGhxOScgYXMgQXNzZXNzbWVudFR5cGUsIHNjb3JlOiAxOSwgZXhwZWN0Q3Jpc2lzOiBmYWxzZSB9LFxuICAgICAgICB7IHR5cGU6ICdwaHE5JyBhcyBBc3Nlc3NtZW50VHlwZSwgc2NvcmU6IDIwLCBleHBlY3RDcmlzaXM6IHRydWUgfSxcbiAgICAgICAgeyB0eXBlOiAnZ2FkNycgYXMgQXNzZXNzbWVudFR5cGUsIHNjb3JlOiAxNCwgZXhwZWN0Q3Jpc2lzOiBmYWxzZSB9LFxuICAgICAgICB7IHR5cGU6ICdnYWQ3JyBhcyBBc3Nlc3NtZW50VHlwZSwgc2NvcmU6IDE1LCBleHBlY3RDcmlzaXM6IHRydWUgfSxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgdGVzdCBvZiBib3VuZGFyeVRlc3RzKSB7XG4gICAgICAgIHN0b3JlLnJlc2V0QXNzZXNzbWVudCgpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgc3RvcmUuc3RhcnRBc3Nlc3NtZW50KHRlc3QudHlwZSwgJ2JvdW5kYXJ5X3Rlc3QnKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBxdWVzdGlvbkNvdW50ID0gdGVzdC50eXBlID09PSAncGhxOScgPyA5IDogNztcbiAgICAgICAgY29uc3QgYW5zd2VycyA9IHRoaXMuZGlzdHJpYnV0ZVNjb3JlKHRlc3Quc2NvcmUsIHF1ZXN0aW9uQ291bnQpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWVzdGlvbkNvdW50OyBpKyspIHtcbiAgICAgICAgICBhd2FpdCBzdG9yZS5hbnN3ZXJRdWVzdGlvbihgJHt0ZXN0LnR5cGV9XyR7aSArIDF9YCwgYW5zd2Vyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHN0b3JlLmNvbXBsZXRlQXNzZXNzbWVudCgpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc3RvcmUuY3VycmVudFJlc3VsdDtcbiAgICAgICAgZXhwZWN0KHJlc3VsdD8udG90YWxTY29yZSkudG9CZSh0ZXN0LnNjb3JlKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdD8uaXNDcmlzaXMpLnRvQmUodGVzdC5leHBlY3RDcmlzaXMpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRlc3QuZXhwZWN0Q3Jpc2lzKSB7XG4gICAgICAgICAgZXhwZWN0KHN0b3JlLmNyaXNpc0RldGVjdGlvbikudG9CZVRydXRoeSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV4cGVjdChzdG9yZS5jcmlzaXNEZXRlY3Rpb24pLnRvQmVGYWxzeSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnRGF0YSBpbnRlZ3JpdHk6IEFuc3dlciB2YWxpZGF0aW9uIGFuZCBwZXJzaXN0ZW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHN0b3JlLnN0YXJ0QXNzZXNzbWVudCgncGhxOScsICdpbnRlZ3JpdHlfdGVzdCcpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgaW52YWxpZCByZXNwb25zZXMgKHNob3VsZCBiZSByZWplY3RlZClcbiAgICAgIGNvbnN0IGludmFsaWRSZXNwb25zZXMgPSBbLTEsIDQsIDUsIDEwLCAnaW52YWxpZCddIGFzIGFueVtdO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGludmFsaWRSZXNwb25zZSBvZiBpbnZhbGlkUmVzcG9uc2VzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgc3RvcmUuYW5zd2VyUXVlc3Rpb24oJ3BocTlfMScsIGludmFsaWRSZXNwb25zZSk7XG4gICAgICAgICAgZmFpbCgnU2hvdWxkIGhhdmUgcmVqZWN0ZWQgaW52YWxpZCByZXNwb25zZScpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGV4cGVjdChlcnJvcikudG9CZVRydXRoeSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRlc3QgdmFsaWQgcmVzcG9uc2VzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDk7IGkrKykge1xuICAgICAgICBhd2FpdCBzdG9yZS5hbnN3ZXJRdWVzdGlvbihgcGhxOV8ke2kgKyAxfWAsIDEpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCBzdG9yZS5jb21wbGV0ZUFzc2Vzc21lbnQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gc3RvcmUuY3VycmVudFJlc3VsdCBhcyBQSFE5UmVzdWx0O1xuICAgICAgZXhwZWN0KHJlc3VsdC50b3RhbFNjb3JlKS50b0JlKDkpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5hbnN3ZXJzKS50b0hhdmVMZW5ndGgoOSk7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIGFsbCBhbnN3ZXJzIGFyZSBwcm9wZXJseSBzdG9yZWRcbiAgICAgIHJlc3VsdC5hbnN3ZXJzLmZvckVhY2goKGFuc3dlciwgaW5kZXgpID0+IHtcbiAgICAgICAgZXhwZWN0KGFuc3dlci5xdWVzdGlvbklkKS50b0JlKGBwaHE5XyR7aW5kZXggKyAxfWApO1xuICAgICAgICBleHBlY3QoYW5zd2VyLnJlc3BvbnNlKS50b0JlKDEpO1xuICAgICAgICBleHBlY3QoYW5zd2VyLnRpbWVzdGFtcCku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