{"version":3,"names":["_globals","require","_CrisisDetectionEngine","_interopRequireDefault","_SuicidalIdeationProtocol","_CrisisInterventionWorkflow","_CrisisDataManagement","_CrisisPerformanceMonitor","_CrisisIntegrationOrchestrator","TEST_CONFIG","PERFORMANCE_TIMEOUT_MS","SUICIDAL_IDEATION_TIMEOUT_MS","CRISIS_DETECTION_MAX_MS","TEST_USER_ID","TEST_ASSESSMENT_ID","CrisisTestDataGenerator","_classCallCheck2","default","_createClass2","key","value","generateAllPHQ9Combinations","combinations","score","push","totalScore","severity","getPHQ9Severity","isCrisis","suicidalIdeation","completedAt","Date","now","answers","generatePHQ9Answers","generateAllGAD7Combinations","getGAD7Severity","generateGAD7Answers","generateHighRiskScenarios","description","phq9","gad7","includeSuicidalIdeation","remainingScore","i","maxForThisQuestion","Math","min","response","floor","random","questionId","timestamp","q9Response","max","PerformanceTestUtils","_measureExecutionTime","_asyncToGenerator2","fn","startTime","performance","result","executionTimeMs","measureExecutionTime","_x","apply","arguments","_runPerformanceTest","testName","testFn","maxTimeMs","iterations","length","undefined","executionTimes","violations","_yield$PerformanceTes","averageTimeMs","reduce","sum","time","maxExecutionTime","success","runPerformanceTest","_x2","_x3","_x4","describe","crisisEngine","beforeEach","CrisisDetectionEngine","jest","clearAllMocks","test","allCombinations","correctDetections","totalTests","phq9Result","detection","detectCrisis","expectedCrisis","actualCrisis","expect","primaryTrigger","toBe","severityLevel","toBeOneOf","console","error","accuracyPercent","log","gad7Result","assessmentType","highRiskScenarios","scenario","phq9Detection","not","toBeNull","isTriggered","gad7Detection","testCases","_loop","testCase","performanceResult","toBeLessThan","toFixed","suicidalIdeationProtocol","SuicidalIdeationProtocol","detectSuicidalIdeation","interventionWorkflow","CrisisInterventionWorkflow","testDetection","id","secondaryTriggers","triggerValue","assessmentId","userId","detectionResponseTimeMs","context","triggeringAnswers","timeOfDay","_yield$PerformanceTes2","initiateCrisisWorkflow","interventionId","interventionStarted","startTimestamp","contactedSupport","responseTime","status","actionsTaken","followUp","required","urgency","type","recommendations","contacts","completed","canDismiss","dismissalAvailableAt","riskLevel","createTestDetection","workflowContext","toBeDefined","dataManagement","CrisisDataManagement","testIntervention","packageId","captureCrisisEpisode","toBeGreaterThan","summary","getCrisisDataSummary","crisisEpisodeId","invalidDetection","invalidIntervention","rejects","toThrow","durationMs","exportedData","exportCrisisData","parsedData","JSON","parse","integrationOrchestrator","CrisisIntegrationOrchestrator","initializeCrisisIntegration","afterEach","shutdownIntegration","monitorAssessmentResponse","getIntegrationStatus","isActive","monitoringEnabled","handleAssessmentCompletion","clearIntegrationErrors","errors","getIntegrationErrors","performanceMonitor","CrisisPerformanceMonitor","startMonitoring","stopMonitoring","recordCrisisDetection","metrics","getCurrentMetrics","size","getPerformanceStatus","toContain","endTime","report","generatePerformanceReport","reportId","timeRange","detailedMetrics","complianceStatus","activeAlerts","getActiveAlerts","alertId","acknowledged","acknowledgeAlert","mockFailingDetection","mockRejectedValue","Error","consoleSpy","spyOn","mockImplementation","mockRestore","localCrisisDetection","allPHQ9","allGAD7","complianceRate","performanceTests","packageCount","getDataPackageCount","toBeGreaterThanOrEqual","cleanedCount","cleanupExpiredData","concurrentTests","promises","promise","results","Promise","all","detectedCrises","filter","r","initialMemory","process","memoryUsage","finalMemory","memoryIncrease","heapUsed","extend","received","validOptions","pass","includes","message","join"],"sources":["CrisisDetectionValidation.test.ts"],"sourcesContent":["/**\n * COMPREHENSIVE CRISIS DETECTION VALIDATION - DRD-FLOW-005 Testing Suite\n *\n * CRITICAL TESTING REQUIREMENTS:\n * - 100% clinical accuracy validation (27 PHQ-9 + 21 GAD-7 combinations)\n * - Performance requirements validation (<200ms detection)\n * - Suicidal ideation immediate response testing (<50ms)\n * - Crisis intervention workflow testing (all severity levels)\n * - Data integrity and storage validation\n * - Integration testing with assessment components\n * - Fail-safe mechanism validation\n * - Regulatory compliance verification\n *\n * TESTING SCENARIOS:\n * 1. Clinical Accuracy Tests (All score combinations)\n * 2. Performance Tests (Response time validation)\n * 3. Suicidal Ideation Tests (Immediate intervention)\n * 4. Crisis Workflow Tests (All intervention paths)\n * 5. Integration Tests (Component coordination)\n * 6. Error Handling Tests (Fail-safe validation)\n * 7. Compliance Tests (Regulatory requirements)\n * 8. Stress Tests (High load scenarios)\n */\n\nimport { describe, test, expect, beforeEach, afterEach, jest } from '@jest/globals';\nimport CrisisDetectionEngine from '../CrisisDetectionEngine';\nimport SuicidalIdeationProtocol from '../SuicidalIdeationProtocol';\nimport CrisisInterventionWorkflow from '../CrisisInterventionWorkflow';\nimport CrisisDataManagement from '../CrisisDataManagement';\nimport CrisisPerformanceMonitor from '../CrisisPerformanceMonitor';\nimport CrisisIntegrationOrchestrator from '../CrisisIntegrationOrchestrator';\nimport type {\n  PHQ9Result,\n  GAD7Result,\n  CrisisDetection,\n  CrisisIntervention,\n  AssessmentAnswer\n} from '../../flows/assessment/types';\n\n/**\n * TEST CONFIGURATION\n */\nconst TEST_CONFIG = {\n  PERFORMANCE_TIMEOUT_MS: 300, // Extra buffer for testing\n  SUICIDAL_IDEATION_TIMEOUT_MS: 100,\n  CRISIS_DETECTION_MAX_MS: 200,\n  TEST_USER_ID: 'test_user_crisis_validation',\n  TEST_ASSESSMENT_ID: 'test_assessment_crisis_validation'\n} as const;\n\n/**\n * MOCK DATA GENERATORS\n */\nclass CrisisTestDataGenerator {\n  /**\n   * Generate all possible PHQ-9 score combinations (0-27)\n   */\n  static generateAllPHQ9Combinations(): PHQ9Result[] {\n    const combinations: PHQ9Result[] = [];\n\n    for (let score = 0; score <= 27; score++) {\n      // Test without suicidal ideation\n      combinations.push({\n        totalScore: score,\n        severity: this.getPHQ9Severity(score),\n        isCrisis: score >= 20,\n        suicidalIdeation: false,\n        completedAt: Date.now(),\n        answers: this.generatePHQ9Answers(score, false)\n      });\n\n      // Test with suicidal ideation (if score allows)\n      if (score >= 1) {\n        combinations.push({\n          totalScore: score,\n          severity: this.getPHQ9Severity(score),\n          isCrisis: true, // Always crisis with suicidal ideation\n          suicidalIdeation: true,\n          completedAt: Date.now(),\n          answers: this.generatePHQ9Answers(score, true)\n        });\n      }\n    }\n\n    return combinations;\n  }\n\n  /**\n   * Generate all possible GAD-7 score combinations (0-21)\n   */\n  static generateAllGAD7Combinations(): GAD7Result[] {\n    const combinations: GAD7Result[] = [];\n\n    for (let score = 0; score <= 21; score++) {\n      combinations.push({\n        totalScore: score,\n        severity: this.getGAD7Severity(score),\n        isCrisis: score >= 15,\n        completedAt: Date.now(),\n        answers: this.generateGAD7Answers(score)\n      });\n    }\n\n    return combinations;\n  }\n\n  /**\n   * Generate specific high-risk scenarios\n   */\n  static generateHighRiskScenarios(): Array<{ phq9: PHQ9Result; gad7: GAD7Result; description: string }> {\n    return [\n      {\n        description: 'Maximum scores with suicidal ideation',\n        phq9: {\n          totalScore: 27,\n          severity: 'severe',\n          isCrisis: true,\n          suicidalIdeation: true,\n          completedAt: Date.now(),\n          answers: this.generatePHQ9Answers(27, true)\n        },\n        gad7: {\n          totalScore: 21,\n          severity: 'severe',\n          isCrisis: true,\n          completedAt: Date.now(),\n          answers: this.generateGAD7Answers(21)\n        }\n      },\n      {\n        description: 'Borderline crisis scores',\n        phq9: {\n          totalScore: 20,\n          severity: 'severe',\n          isCrisis: true,\n          suicidalIdeation: false,\n          completedAt: Date.now(),\n          answers: this.generatePHQ9Answers(20, false)\n        },\n        gad7: {\n          totalScore: 15,\n          severity: 'severe',\n          isCrisis: true,\n          completedAt: Date.now(),\n          answers: this.generateGAD7Answers(15)\n        }\n      },\n      {\n        description: 'Low score with suicidal ideation',\n        phq9: {\n          totalScore: 5,\n          severity: 'mild',\n          isCrisis: true,\n          suicidalIdeation: true,\n          completedAt: Date.now(),\n          answers: this.generatePHQ9Answers(5, true)\n        },\n        gad7: {\n          totalScore: 3,\n          severity: 'minimal',\n          isCrisis: false,\n          completedAt: Date.now(),\n          answers: this.generateGAD7Answers(3)\n        }\n      }\n    ];\n  }\n\n  private static getPHQ9Severity(score: number): PHQ9Result['severity'] {\n    if (score <= 4) return 'minimal';\n    if (score <= 9) return 'mild';\n    if (score <= 14) return 'moderate';\n    if (score <= 19) return 'moderately_severe';\n    return 'severe';\n  }\n\n  private static getGAD7Severity(score: number): GAD7Result['severity'] {\n    if (score <= 4) return 'minimal';\n    if (score <= 9) return 'mild';\n    if (score <= 14) return 'moderate';\n    return 'severe';\n  }\n\n  private static generatePHQ9Answers(totalScore: number, includeSuicidalIdeation: boolean): AssessmentAnswer[] {\n    const answers: AssessmentAnswer[] = [];\n    let remainingScore = totalScore;\n\n    // Generate answers for questions 1-8\n    for (let i = 1; i <= 8; i++) {\n      const maxForThisQuestion = Math.min(3, remainingScore);\n      const response = Math.floor(Math.random() * (maxForThisQuestion + 1));\n\n      answers.push({\n        questionId: `phq9_${i}`,\n        response,\n        timestamp: Date.now() - (9 - i) * 1000\n      });\n\n      remainingScore -= response;\n    }\n\n    // Question 9 (suicidal ideation)\n    const q9Response = includeSuicidalIdeation ? Math.max(1, remainingScore) : 0;\n    answers.push({\n      questionId: 'phq9_9',\n      response: q9Response,\n      timestamp: Date.now()\n    });\n\n    return answers;\n  }\n\n  private static generateGAD7Answers(totalScore: number): AssessmentAnswer[] {\n    const answers: AssessmentAnswer[] = [];\n    let remainingScore = totalScore;\n\n    for (let i = 1; i <= 7; i++) {\n      const maxForThisQuestion = Math.min(3, remainingScore);\n      const response = i === 7 ? remainingScore : Math.floor(Math.random() * (maxForThisQuestion + 1));\n\n      answers.push({\n        questionId: `gad7_${i}`,\n        response,\n        timestamp: Date.now() - (8 - i) * 1000\n      });\n\n      remainingScore -= response;\n    }\n\n    return answers;\n  }\n}\n\n/**\n * PERFORMANCE TESTING UTILITIES\n */\nclass PerformanceTestUtils {\n  static async measureExecutionTime<T>(fn: () => Promise<T>): Promise<{ result: T; executionTimeMs: number }> {\n    const startTime = performance.now();\n    const result = await fn();\n    const executionTimeMs = performance.now() - startTime;\n    return { result, executionTimeMs };\n  }\n\n  static async runPerformanceTest(\n    testName: string,\n    testFn: () => Promise<any>,\n    maxTimeMs: number,\n    iterations: number = 10\n  ): Promise<{ success: boolean; averageTimeMs: number; maxTimeMs: number; violations: number }> {\n    const executionTimes: number[] = [];\n    let violations = 0;\n\n    for (let i = 0; i < iterations; i++) {\n      const { executionTimeMs } = await PerformanceTestUtils.measureExecutionTime(testFn);\n      executionTimes.push(executionTimeMs);\n\n      if (executionTimeMs > maxTimeMs) {\n        violations++;\n      }\n    }\n\n    const averageTimeMs = executionTimes.reduce((sum, time) => sum + time, 0) / executionTimes.length;\n    const maxExecutionTime = Math.max(...executionTimes);\n\n    return {\n      success: violations === 0,\n      averageTimeMs,\n      maxTimeMs: maxExecutionTime,\n      violations\n    };\n  }\n}\n\n/**\n * CLINICAL ACCURACY VALIDATION TESTS\n */\ndescribe('Crisis Detection - Clinical Accuracy Validation', () => {\n  let crisisEngine: typeof CrisisDetectionEngine;\n\n  beforeEach(() => {\n    crisisEngine = CrisisDetectionEngine;\n    jest.clearAllMocks();\n  });\n\n  test('PHQ-9 Crisis Detection - All Score Combinations (0-27)', async () => {\n    const allCombinations = CrisisTestDataGenerator.generateAllPHQ9Combinations();\n    let correctDetections = 0;\n    let totalTests = 0;\n\n    for (const phq9Result of allCombinations) {\n      const detection = await crisisEngine.detectCrisis(\n        phq9Result,\n        TEST_CONFIG.TEST_USER_ID,\n        `${TEST_CONFIG.TEST_ASSESSMENT_ID}_phq9_${totalTests}`\n      );\n\n      totalTests++;\n\n      // Validate crisis detection logic\n      const expectedCrisis = phq9Result.totalScore >= 20 || phq9Result.suicidalIdeation;\n      const actualCrisis = detection !== null;\n\n      if (expectedCrisis === actualCrisis) {\n        correctDetections++;\n\n        // Additional validation for detected crises\n        if (detection) {\n          if (phq9Result.suicidalIdeation) {\n            expect(detection.primaryTrigger).toBe('phq9_suicidal_ideation');\n            expect(detection.severityLevel).toBeOneOf(['critical', 'emergency']);\n          } else if (phq9Result.totalScore >= 20) {\n            expect(detection.primaryTrigger).toBe('phq9_severe_score');\n            expect(detection.severityLevel).toBeOneOf(['high', 'critical']);\n          }\n        }\n      } else {\n        console.error(`PHQ-9 Detection Mismatch - Score: ${phq9Result.totalScore}, Suicidal: ${phq9Result.suicidalIdeation}, Expected: ${expectedCrisis}, Actual: ${actualCrisis}`);\n      }\n    }\n\n    const accuracyPercent = (correctDetections / totalTests) * 100;\n    expect(accuracyPercent).toBe(100); // MUST be 100% for regulatory compliance\n    console.log(`PHQ-9 Clinical Accuracy: ${accuracyPercent}% (${correctDetections}/${totalTests})`);\n  });\n\n  test('GAD-7 Crisis Detection - All Score Combinations (0-21)', async () => {\n    const allCombinations = CrisisTestDataGenerator.generateAllGAD7Combinations();\n    let correctDetections = 0;\n    let totalTests = 0;\n\n    for (const gad7Result of allCombinations) {\n      const detection = await crisisEngine.detectCrisis(\n        gad7Result,\n        TEST_CONFIG.TEST_USER_ID,\n        `${TEST_CONFIG.TEST_ASSESSMENT_ID}_gad7_${totalTests}`\n      );\n\n      totalTests++;\n\n      // Validate crisis detection logic\n      const expectedCrisis = gad7Result.totalScore >= 15;\n      const actualCrisis = detection !== null;\n\n      if (expectedCrisis === actualCrisis) {\n        correctDetections++;\n\n        // Additional validation for detected crises\n        if (detection) {\n          expect(detection.primaryTrigger).toBe('gad7_severe_score');\n          expect(detection.severityLevel).toBe('high');\n          expect(detection.assessmentType).toBe('gad7');\n        }\n      } else {\n        console.error(`GAD-7 Detection Mismatch - Score: ${gad7Result.totalScore}, Expected: ${expectedCrisis}, Actual: ${actualCrisis}`);\n      }\n    }\n\n    const accuracyPercent = (correctDetections / totalTests) * 100;\n    expect(accuracyPercent).toBe(100); // MUST be 100% for regulatory compliance\n    console.log(`GAD-7 Clinical Accuracy: ${accuracyPercent}% (${correctDetections}/${totalTests})`);\n  });\n\n  test('High-Risk Scenario Validation', async () => {\n    const highRiskScenarios = CrisisTestDataGenerator.generateHighRiskScenarios();\n\n    for (const scenario of highRiskScenarios) {\n      console.log(`Testing scenario: ${scenario.description}`);\n\n      // Test PHQ-9 detection\n      const phq9Detection = await crisisEngine.detectCrisis(\n        scenario.phq9,\n        TEST_CONFIG.TEST_USER_ID,\n        `test_scenario_phq9_${Date.now()}`\n      );\n\n      if (scenario.phq9.isCrisis) {\n        expect(phq9Detection).not.toBeNull();\n        expect(phq9Detection!.isTriggered).toBe(true);\n\n        if (scenario.phq9.suicidalIdeation) {\n          expect(phq9Detection!.primaryTrigger).toBe('phq9_suicidal_ideation');\n        }\n      }\n\n      // Test GAD-7 detection\n      const gad7Detection = await crisisEngine.detectCrisis(\n        scenario.gad7,\n        TEST_CONFIG.TEST_USER_ID,\n        `test_scenario_gad7_${Date.now()}`\n      );\n\n      if (scenario.gad7.isCrisis) {\n        expect(gad7Detection).not.toBeNull();\n        expect(gad7Detection!.isTriggered).toBe(true);\n        expect(gad7Detection!.primaryTrigger).toBe('gad7_severe_score');\n      }\n    }\n  });\n});\n\n/**\n * PERFORMANCE VALIDATION TESTS\n */\ndescribe('Crisis Detection - Performance Requirements', () => {\n  let crisisEngine: typeof CrisisDetectionEngine;\n\n  beforeEach(() => {\n    crisisEngine = CrisisDetectionEngine;\n  });\n\n  test('Crisis Detection Performance - <200ms Requirement', async () => {\n    const testCases = [\n      CrisisTestDataGenerator.generateAllPHQ9Combinations()[40], // High score\n      CrisisTestDataGenerator.generateAllGAD7Combinations()[20], // High score\n    ];\n\n    for (const testCase of testCases) {\n      const performanceResult = await PerformanceTestUtils.runPerformanceTest(\n        'Crisis Detection',\n        async () => {\n          await crisisEngine.detectCrisis(\n            testCase,\n            TEST_CONFIG.TEST_USER_ID,\n            `perf_test_${Date.now()}`\n          );\n        },\n        TEST_CONFIG.CRISIS_DETECTION_MAX_MS,\n        20 // Run 20 iterations\n      );\n\n      expect(performanceResult.success).toBe(true);\n      expect(performanceResult.averageTimeMs).toBeLessThan(TEST_CONFIG.CRISIS_DETECTION_MAX_MS);\n      expect(performanceResult.violations).toBe(0);\n\n      console.log(`Crisis Detection Performance: Average ${performanceResult.averageTimeMs.toFixed(2)}ms, Max ${performanceResult.maxTimeMs.toFixed(2)}ms`);\n    }\n  });\n\n  test('Suicidal Ideation Detection Performance - <50ms Requirement', async () => {\n    const suicidalIdeationProtocol = SuicidalIdeationProtocol;\n\n    const performanceResult = await PerformanceTestUtils.runPerformanceTest(\n      'Suicidal Ideation Detection',\n      async () => {\n        await suicidalIdeationProtocol.detectSuicidalIdeation(\n          'phq9_9',\n          2, // Positive response\n          TEST_CONFIG.TEST_USER_ID,\n          `si_perf_test_${Date.now()}`\n        );\n      },\n      TEST_CONFIG.SUICIDAL_IDEATION_TIMEOUT_MS,\n      30 // Run 30 iterations for critical performance test\n    );\n\n    expect(performanceResult.success).toBe(true);\n    expect(performanceResult.averageTimeMs).toBeLessThan(50); // Strict requirement\n    expect(performanceResult.violations).toBe(0);\n\n    console.log(`Suicidal Ideation Performance: Average ${performanceResult.averageTimeMs.toFixed(2)}ms, Max ${performanceResult.maxTimeMs.toFixed(2)}ms`);\n  });\n\n  test('Crisis Intervention Workflow Performance', async () => {\n    const interventionWorkflow = CrisisInterventionWorkflow;\n\n    // Create test detection\n    const testDetection: CrisisDetection = {\n      id: 'perf_test_detection',\n      isTriggered: true,\n      primaryTrigger: 'phq9_severe_score',\n      secondaryTriggers: [],\n      severityLevel: 'high',\n      triggerValue: 25,\n      assessmentType: 'phq9',\n      timestamp: Date.now(),\n      assessmentId: 'perf_test_assessment',\n      userId: TEST_CONFIG.TEST_USER_ID,\n      detectionResponseTimeMs: 100,\n      context: {\n        triggeringAnswers: [],\n        timeOfDay: 'afternoon'\n      }\n    };\n\n    const { executionTimeMs } = await PerformanceTestUtils.measureExecutionTime(async () => {\n      await interventionWorkflow.initiateCrisisWorkflow(testDetection, {\n        detection: testDetection,\n        interventionId: 'perf_test_intervention',\n        interventionStarted: true,\n        startTimestamp: Date.now(),\n        contactedSupport: false,\n        responseTime: 0,\n        status: 'initiated',\n        actionsTaken: [],\n        followUp: {\n          required: true,\n          urgency: 'immediate',\n          type: 'clinical_assessment',\n          recommendations: [],\n          contacts: [],\n          completed: false\n        },\n        canDismiss: false,\n        dismissalAvailableAt: Date.now() + 30000\n      });\n    });\n\n    expect(executionTimeMs).toBeLessThan(3000); // 3 second requirement\n    console.log(`Crisis Intervention Workflow Performance: ${executionTimeMs.toFixed(2)}ms`);\n  });\n});\n\n/**\n * SUICIDAL IDEATION SPECIFIC TESTS\n */\ndescribe('Suicidal Ideation Detection - Immediate Response', () => {\n  let suicidalIdeationProtocol: typeof SuicidalIdeationProtocol;\n\n  beforeEach(() => {\n    suicidalIdeationProtocol = SuicidalIdeationProtocol;\n  });\n\n  test('PHQ-9 Question 9 Response 1 (Several Days)', async () => {\n    const detection = await suicidalIdeationProtocol.detectSuicidalIdeation(\n      'phq9_9',\n      1,\n      TEST_CONFIG.TEST_USER_ID,\n      'test_si_1'\n    );\n\n    expect(detection).not.toBeNull();\n    expect(detection!.response).toBe(1);\n    expect(detection!.severity).toBe('several_days');\n    expect(detection!.riskLevel).toBeOneOf(['moderate', 'high']);\n  });\n\n  test('PHQ-9 Question 9 Response 2 (More than Half Days)', async () => {\n    const detection = await suicidalIdeationProtocol.detectSuicidalIdeation(\n      'phq9_9',\n      2,\n      TEST_CONFIG.TEST_USER_ID,\n      'test_si_2'\n    );\n\n    expect(detection).not.toBeNull();\n    expect(detection!.response).toBe(2);\n    expect(detection!.severity).toBe('more_than_half');\n    expect(detection!.riskLevel).toBeOneOf(['high', 'critical']);\n  });\n\n  test('PHQ-9 Question 9 Response 3 (Nearly Every Day)', async () => {\n    const detection = await suicidalIdeationProtocol.detectSuicidalIdeation(\n      'phq9_9',\n      3,\n      TEST_CONFIG.TEST_USER_ID,\n      'test_si_3'\n    );\n\n    expect(detection).not.toBeNull();\n    expect(detection!.response).toBe(3);\n    expect(detection!.severity).toBe('nearly_every_day');\n    expect(detection!.riskLevel).toBeOneOf(['critical', 'emergency']);\n  });\n\n  test('PHQ-9 Question 9 Response 0 (No Suicidal Ideation)', async () => {\n    const detection = await suicidalIdeationProtocol.detectSuicidalIdeation(\n      'phq9_9',\n      0,\n      TEST_CONFIG.TEST_USER_ID,\n      'test_si_0'\n    );\n\n    expect(detection).toBeNull();\n  });\n\n  test('Non-PHQ-9-Q9 Questions Should Not Trigger', async () => {\n    const detection = await suicidalIdeationProtocol.detectSuicidalIdeation(\n      'phq9_8',\n      3,\n      TEST_CONFIG.TEST_USER_ID,\n      'test_non_si'\n    );\n\n    expect(detection).toBeNull();\n  });\n});\n\n/**\n * CRISIS WORKFLOW VALIDATION TESTS\n */\ndescribe('Crisis Intervention Workflow - All Severity Levels', () => {\n  let interventionWorkflow: typeof CrisisInterventionWorkflow;\n\n  beforeEach(() => {\n    interventionWorkflow = CrisisInterventionWorkflow;\n  });\n\n  const createTestDetection = (severity: string): CrisisDetection => ({\n    id: `test_${severity}_${Date.now()}`,\n    isTriggered: true,\n    primaryTrigger: severity === 'emergency' ? 'phq9_suicidal_ideation' : 'phq9_severe_score',\n    secondaryTriggers: [],\n    severityLevel: severity as any,\n    triggerValue: 25,\n    assessmentType: 'phq9',\n    timestamp: Date.now(),\n    assessmentId: 'test_assessment',\n    userId: TEST_CONFIG.TEST_USER_ID,\n    detectionResponseTimeMs: 100,\n    context: {\n      triggeringAnswers: [],\n      timeOfDay: 'afternoon'\n    }\n  });\n\n  test('Emergency Severity Workflow', async () => {\n    const detection = createTestDetection('emergency');\n\n    const workflowContext = await interventionWorkflow.initiateCrisisWorkflow(detection, {\n      detection,\n      interventionId: 'test_emergency_intervention',\n      interventionStarted: true,\n      startTimestamp: Date.now(),\n      contactedSupport: false,\n      responseTime: 0,\n      status: 'initiated',\n      actionsTaken: [],\n      followUp: {\n        required: true,\n        urgency: 'immediate',\n        type: 'clinical_assessment',\n        recommendations: [],\n        contacts: [],\n        completed: false\n      },\n      canDismiss: false,\n      dismissalAvailableAt: Date.now() + 30000\n    });\n\n    expect(workflowContext).toBeDefined();\n    expect(workflowContext.detection.severityLevel).toBe('emergency');\n  });\n\n  test('Critical Severity Workflow', async () => {\n    const detection = createTestDetection('critical');\n\n    const workflowContext = await interventionWorkflow.initiateCrisisWorkflow(detection, {\n      detection,\n      interventionId: 'test_critical_intervention',\n      interventionStarted: true,\n      startTimestamp: Date.now(),\n      contactedSupport: false,\n      responseTime: 0,\n      status: 'initiated',\n      actionsTaken: [],\n      followUp: {\n        required: true,\n        urgency: 'immediate',\n        type: 'clinical_assessment',\n        recommendations: [],\n        contacts: [],\n        completed: false\n      },\n      canDismiss: false,\n      dismissalAvailableAt: Date.now() + 30000\n    });\n\n    expect(workflowContext).toBeDefined();\n    expect(workflowContext.detection.severityLevel).toBe('critical');\n  });\n\n  test('High Risk Workflow', async () => {\n    const detection = createTestDetection('high');\n\n    const workflowContext = await interventionWorkflow.initiateCrisisWorkflow(detection, {\n      detection,\n      interventionId: 'test_high_intervention',\n      interventionStarted: true,\n      startTimestamp: Date.now(),\n      contactedSupport: false,\n      responseTime: 0,\n      status: 'initiated',\n      actionsTaken: [],\n      followUp: {\n        required: true,\n        urgency: 'within_24h',\n        type: 'clinical_assessment',\n        recommendations: [],\n        contacts: [],\n        completed: false\n      },\n      canDismiss: false,\n      dismissalAvailableAt: Date.now() + 30000\n    });\n\n    expect(workflowContext).toBeDefined();\n    expect(workflowContext.detection.severityLevel).toBe('high');\n  });\n\n  test('Moderate Risk Workflow', async () => {\n    const detection = createTestDetection('moderate');\n\n    const workflowContext = await interventionWorkflow.initiateCrisisWorkflow(detection, {\n      detection,\n      interventionId: 'test_moderate_intervention',\n      interventionStarted: true,\n      startTimestamp: Date.now(),\n      contactedSupport: false,\n      responseTime: 0,\n      status: 'initiated',\n      actionsTaken: [],\n      followUp: {\n        required: false,\n        urgency: 'within_48h',\n        type: 'clinical_assessment',\n        recommendations: [],\n        contacts: [],\n        completed: false\n      },\n      canDismiss: true,\n      dismissalAvailableAt: Date.now() + 10000\n    });\n\n    expect(workflowContext).toBeDefined();\n    expect(workflowContext.detection.severityLevel).toBe('moderate');\n  });\n});\n\n/**\n * DATA INTEGRITY AND STORAGE TESTS\n */\ndescribe('Crisis Data Management - Data Integrity', () => {\n  let dataManagement: typeof CrisisDataManagement;\n\n  beforeEach(() => {\n    dataManagement = CrisisDataManagement;\n  });\n\n  test('Crisis Data Capture and Storage', async () => {\n    const testDetection: CrisisDetection = {\n      id: 'data_test_detection',\n      isTriggered: true,\n      primaryTrigger: 'phq9_severe_score',\n      secondaryTriggers: [],\n      severityLevel: 'high',\n      triggerValue: 22,\n      assessmentType: 'phq9',\n      timestamp: Date.now(),\n      assessmentId: 'data_test_assessment',\n      userId: TEST_CONFIG.TEST_USER_ID,\n      detectionResponseTimeMs: 150,\n      context: {\n        triggeringAnswers: [],\n        timeOfDay: 'morning'\n      }\n    };\n\n    const testIntervention: CrisisIntervention = {\n      detection: testDetection,\n      interventionId: 'data_test_intervention',\n      interventionStarted: true,\n      startTimestamp: Date.now(),\n      contactedSupport: false,\n      responseTime: 200,\n      status: 'initiated',\n      actionsTaken: [],\n      followUp: {\n        required: true,\n        urgency: 'within_24h',\n        type: 'clinical_assessment',\n        recommendations: [],\n        contacts: [],\n        completed: false\n      },\n      canDismiss: false,\n      dismissalAvailableAt: Date.now() + 30000\n    };\n\n    const packageId = await dataManagement.captureCrisisEpisode(\n      testDetection,\n      testIntervention\n    );\n\n    expect(packageId).toBeDefined();\n    expect(typeof packageId).toBe('string');\n    expect(packageId.length).toBeGreaterThan(0);\n\n    // Verify data retrieval\n    const summary = await dataManagement.getCrisisDataSummary(packageId);\n    expect(summary).toBeDefined();\n    expect(summary.crisisEpisodeId).toBe(testDetection.id);\n    expect(summary.severity).toBe(testDetection.severityLevel);\n  });\n\n  test('Data Validation and Integrity Checks', async () => {\n    // Test data validation with invalid data\n    const invalidDetection = {\n      id: '', // Invalid empty ID\n      isTriggered: true,\n      primaryTrigger: 'invalid_trigger',\n      severityLevel: 'unknown_severity'\n    } as any;\n\n    const invalidIntervention = {\n      detection: invalidDetection,\n      interventionId: '',\n      interventionStarted: false\n    } as any;\n\n    await expect(\n      dataManagement.captureCrisisEpisode(invalidDetection, invalidIntervention)\n    ).rejects.toThrow();\n  });\n\n  test('Data Export Functionality', async () => {\n    const testDetection: CrisisDetection = {\n      id: 'export_test_detection',\n      isTriggered: true,\n      primaryTrigger: 'gad7_severe_score',\n      secondaryTriggers: [],\n      severityLevel: 'high',\n      triggerValue: 18,\n      assessmentType: 'gad7',\n      timestamp: Date.now(),\n      assessmentId: 'export_test_assessment',\n      userId: TEST_CONFIG.TEST_USER_ID,\n      detectionResponseTimeMs: 120,\n      context: {\n        triggeringAnswers: [],\n        timeOfDay: 'evening'\n      }\n    };\n\n    const testIntervention: CrisisIntervention = {\n      detection: testDetection,\n      interventionId: 'export_test_intervention',\n      interventionStarted: true,\n      startTimestamp: Date.now(),\n      contactedSupport: true,\n      responseTime: 180,\n      status: 'resolved',\n      actionsTaken: [{\n        type: 'contacted_988',\n        timestamp: Date.now(),\n        durationMs: 300000,\n        completed: true\n      }],\n      followUp: {\n        required: true,\n        urgency: 'within_24h',\n        type: 'clinical_assessment',\n        recommendations: ['Follow up with mental health professional'],\n        contacts: [],\n        completed: false\n      },\n      canDismiss: true,\n      dismissalAvailableAt: Date.now() - 1000\n    };\n\n    const packageId = await dataManagement.captureCrisisEpisode(\n      testDetection,\n      testIntervention\n    );\n\n    const exportedData = await dataManagement.exportCrisisData(packageId);\n    expect(exportedData).toBeDefined();\n    expect(typeof exportedData).toBe('string');\n\n    const parsedData = JSON.parse(exportedData);\n    expect(parsedData.packageId).toBe(packageId);\n    expect(parsedData.detection.detection.id).toBe(testDetection.id);\n  });\n});\n\n/**\n * INTEGRATION TESTING\n */\ndescribe('Crisis Integration - Component Coordination', () => {\n  let integrationOrchestrator: typeof CrisisIntegrationOrchestrator;\n\n  beforeEach(async () => {\n    integrationOrchestrator = CrisisIntegrationOrchestrator;\n    await integrationOrchestrator.initializeCrisisIntegration();\n  });\n\n  afterEach(async () => {\n    await integrationOrchestrator.shutdownIntegration();\n  });\n\n  test('Assessment Response Monitoring Integration', async () => {\n    await integrationOrchestrator.monitorAssessmentResponse(\n      'phq9_5',\n      2,\n      'phq9',\n      TEST_CONFIG.TEST_USER_ID,\n      'integration_test_assessment'\n    );\n\n    const status = integrationOrchestrator.getIntegrationStatus();\n    expect(status.isActive).toBe(true);\n    expect(status.monitoringEnabled).toBe(true);\n  });\n\n  test('Crisis Detection Integration Flow', async () => {\n    const phq9Result: PHQ9Result = {\n      totalScore: 24,\n      severity: 'severe',\n      isCrisis: true,\n      suicidalIdeation: false,\n      completedAt: Date.now(),\n      answers: CrisisTestDataGenerator.generateAllPHQ9Combinations()[48].answers\n    };\n\n    const detection = await integrationOrchestrator.handleAssessmentCompletion(\n      phq9Result,\n      'phq9',\n      TEST_CONFIG.TEST_USER_ID,\n      'integration_crisis_test'\n    );\n\n    expect(detection).not.toBeNull();\n    expect(detection!.isTriggered).toBe(true);\n    expect(detection!.assessmentType).toBe('phq9');\n  });\n\n  test('Integration Error Handling', async () => {\n    // Clear any existing errors\n    integrationOrchestrator.clearIntegrationErrors();\n\n    // Trigger an error condition\n    try {\n      await integrationOrchestrator.handleAssessmentCompletion(\n        null as any, // Invalid input\n        'phq9',\n        TEST_CONFIG.TEST_USER_ID,\n        'error_test'\n      );\n    } catch (error) {\n      // Expected to fail\n    }\n\n    const errors = integrationOrchestrator.getIntegrationErrors();\n    expect(errors.length).toBeGreaterThan(0);\n  });\n});\n\n/**\n * PERFORMANCE MONITORING TESTS\n */\ndescribe('Crisis Performance Monitoring - Quality Assurance', () => {\n  let performanceMonitor: typeof CrisisPerformanceMonitor;\n\n  beforeEach(() => {\n    performanceMonitor = CrisisPerformanceMonitor;\n    performanceMonitor.startMonitoring();\n  });\n\n  afterEach(() => {\n    performanceMonitor.stopMonitoring();\n  });\n\n  test('Performance Metric Recording', async () => {\n    const testDetection: CrisisDetection = {\n      id: 'perf_monitor_test',\n      isTriggered: true,\n      primaryTrigger: 'phq9_severe_score',\n      secondaryTriggers: [],\n      severityLevel: 'high',\n      triggerValue: 21,\n      assessmentType: 'phq9',\n      timestamp: Date.now(),\n      assessmentId: 'perf_monitor_assessment',\n      userId: TEST_CONFIG.TEST_USER_ID,\n      detectionResponseTimeMs: 150,\n      context: {\n        triggeringAnswers: [],\n        timeOfDay: 'afternoon'\n      }\n    };\n\n    await performanceMonitor.recordCrisisDetection(\n      testDetection,\n      150,\n      true\n    );\n\n    const metrics = performanceMonitor.getCurrentMetrics();\n    expect(metrics.size).toBeGreaterThan(0);\n\n    const status = performanceMonitor.getPerformanceStatus();\n    expect(['optimal', 'warning', 'degraded', 'critical']).toContain(status);\n  });\n\n  test('Performance Report Generation', async () => {\n    const startTime = Date.now() - 60000; // 1 minute ago\n    const endTime = Date.now();\n\n    const report = await performanceMonitor.generatePerformanceReport(startTime, endTime);\n\n    expect(report).toBeDefined();\n    expect(report.reportId).toBeDefined();\n    expect(report.timeRange.startTime).toBe(startTime);\n    expect(report.timeRange.endTime).toBe(endTime);\n    expect(report.summary).toBeDefined();\n    expect(report.detailedMetrics).toBeDefined();\n    expect(report.complianceStatus).toBeDefined();\n  });\n\n  test('Alert Generation and Management', async () => {\n    // Record a performance violation\n    await performanceMonitor.recordCrisisDetection(\n      {\n        id: 'alert_test',\n        isTriggered: true,\n        primaryTrigger: 'phq9_severe_score',\n        secondaryTriggers: [],\n        severityLevel: 'high',\n        triggerValue: 20,\n        assessmentType: 'phq9',\n        timestamp: Date.now(),\n        assessmentId: 'alert_test_assessment',\n        userId: TEST_CONFIG.TEST_USER_ID,\n        detectionResponseTimeMs: 250, // Exceeds 200ms limit\n        context: {\n          triggeringAnswers: [],\n          timeOfDay: 'morning'\n        }\n      },\n      250, // Exceeds performance threshold\n      true\n    );\n\n    const activeAlerts = performanceMonitor.getActiveAlerts();\n    expect(activeAlerts.length).toBeGreaterThan(0);\n\n    // Test alert acknowledgment\n    if (activeAlerts.length > 0) {\n      const alertId = activeAlerts[0].id;\n      const acknowledged = await performanceMonitor.acknowledgeAlert(alertId);\n      expect(acknowledged).toBe(true);\n    }\n  });\n});\n\n/**\n * FAIL-SAFE MECHANISM TESTS\n */\ndescribe('Crisis System - Fail-Safe Mechanisms', () => {\n  test('Emergency Fail-Safe Activation', async () => {\n    // Test system behavior when core crisis detection fails\n    const mockFailingDetection = jest.fn().mockRejectedValue(new Error('System failure'));\n\n    // Mock console methods to capture fail-safe activation\n    const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n\n    try {\n      await mockFailingDetection();\n    } catch (error) {\n      // Fail-safe should activate\n      expect(error).toBeDefined();\n    }\n\n    consoleSpy.mockRestore();\n  });\n\n  test('Network Failure Handling', async () => {\n    // Test offline crisis detection capabilities\n    // Implementation would test local crisis detection when network is unavailable\n    const localCrisisDetection = await CrisisDetectionEngine.detectCrisis(\n      {\n        totalScore: 25,\n        severity: 'severe',\n        isCrisis: true,\n        suicidalIdeation: true,\n        completedAt: Date.now(),\n        answers: []\n      },\n      TEST_CONFIG.TEST_USER_ID,\n      'offline_test'\n    );\n\n    expect(localCrisisDetection).not.toBeNull();\n    expect(localCrisisDetection!.isTriggered).toBe(true);\n  });\n});\n\n/**\n * REGULATORY COMPLIANCE TESTS\n */\ndescribe('Crisis System - Regulatory Compliance', () => {\n  test('Clinical Accuracy Compliance (100% Requirement)', async () => {\n    // Test ALL possible score combinations for 100% accuracy\n    const allPHQ9 = CrisisTestDataGenerator.generateAllPHQ9Combinations();\n    const allGAD7 = CrisisTestDataGenerator.generateAllGAD7Combinations();\n\n    let totalTests = 0;\n    let correctDetections = 0;\n\n    // Test all PHQ-9 combinations\n    for (const result of allPHQ9) {\n      const detection = await CrisisDetectionEngine.detectCrisis(\n        result,\n        TEST_CONFIG.TEST_USER_ID,\n        `compliance_phq9_${totalTests}`\n      );\n\n      const expectedCrisis = result.isCrisis;\n      const actualCrisis = detection !== null;\n\n      if (expectedCrisis === actualCrisis) {\n        correctDetections++;\n      }\n      totalTests++;\n    }\n\n    // Test all GAD-7 combinations\n    for (const result of allGAD7) {\n      const detection = await CrisisDetectionEngine.detectCrisis(\n        result,\n        TEST_CONFIG.TEST_USER_ID,\n        `compliance_gad7_${totalTests}`\n      );\n\n      const expectedCrisis = result.isCrisis;\n      const actualCrisis = detection !== null;\n\n      if (expectedCrisis === actualCrisis) {\n        correctDetections++;\n      }\n      totalTests++;\n    }\n\n    const complianceRate = (correctDetections / totalTests) * 100;\n\n    // REGULATORY REQUIREMENT: Must be 100%\n    expect(complianceRate).toBe(100);\n    console.log(`Regulatory Compliance Rate: ${complianceRate}% (${correctDetections}/${totalTests})`);\n  });\n\n  test('Performance Compliance (<200ms Detection)', async () => {\n    const performanceTests = await PerformanceTestUtils.runPerformanceTest(\n      'Regulatory Performance Compliance',\n      async () => {\n        await CrisisDetectionEngine.detectCrisis(\n          {\n            totalScore: 22,\n            severity: 'severe',\n            isCrisis: true,\n            suicidalIdeation: false,\n            completedAt: Date.now(),\n            answers: []\n          },\n          TEST_CONFIG.TEST_USER_ID,\n          `regulatory_perf_${Date.now()}`\n        );\n      },\n      200, // Regulatory requirement\n      50   // Extensive testing\n    );\n\n    // REGULATORY REQUIREMENT: Zero violations\n    expect(performanceTests.violations).toBe(0);\n    expect(performanceTests.success).toBe(true);\n    console.log(`Performance Compliance: ${performanceTests.violations} violations in 50 tests`);\n  });\n\n  test('Data Retention and Audit Compliance', async () => {\n    const dataManagement = CrisisDataManagement;\n\n    // Test data package count\n    const packageCount = dataManagement.getDataPackageCount();\n    expect(packageCount).toBeGreaterThanOrEqual(0);\n\n    // Test cleanup functionality\n    const cleanedCount = await dataManagement.cleanupExpiredData();\n    expect(cleanedCount).toBeGreaterThanOrEqual(0);\n  });\n});\n\n/**\n * STRESS TESTING\n */\ndescribe('Crisis System - Stress Testing', () => {\n  test('High Volume Crisis Detection', async () => {\n    const concurrentTests = 20;\n    const promises = [];\n\n    for (let i = 0; i < concurrentTests; i++) {\n      const promise = CrisisDetectionEngine.detectCrisis(\n        {\n          totalScore: 20 + (i % 8), // Vary scores\n          severity: 'severe',\n          isCrisis: true,\n          suicidalIdeation: i % 3 === 0, // Vary suicidal ideation\n          completedAt: Date.now(),\n          answers: []\n        },\n        `stress_test_user_${i}`,\n        `stress_test_assessment_${i}`\n      );\n      promises.push(promise);\n    }\n\n    const results = await Promise.all(promises);\n\n    // All should complete successfully\n    expect(results.length).toBe(concurrentTests);\n\n    // All crisis cases should be detected\n    const detectedCrises = results.filter(r => r !== null);\n    expect(detectedCrises.length).toBe(concurrentTests);\n  });\n\n  test('Memory Usage Under Load', async () => {\n    const initialMemory = process.memoryUsage();\n\n    // Run many crisis detections\n    for (let i = 0; i < 100; i++) {\n      await CrisisDetectionEngine.detectCrisis(\n        {\n          totalScore: 25,\n          severity: 'severe',\n          isCrisis: true,\n          suicidalIdeation: true,\n          completedAt: Date.now(),\n          answers: []\n        },\n        `memory_test_user_${i}`,\n        `memory_test_assessment_${i}`\n      );\n    }\n\n    const finalMemory = process.memoryUsage();\n    const memoryIncrease = finalMemory.heapUsed - initialMemory.heapUsed;\n\n    // Memory increase should be reasonable (less than 50MB for 100 operations)\n    expect(memoryIncrease).toBeLessThan(50 * 1024 * 1024);\n    console.log(`Memory increase: ${(memoryIncrease / 1024 / 1024).toFixed(2)}MB`);\n  });\n});\n\n/**\n * CUSTOM JEST MATCHERS\n */\nexpect.extend({\n  toBeOneOf(received, validOptions) {\n    const pass = validOptions.includes(received);\n    if (pass) {\n      return {\n        message: () => `expected ${received} not to be one of ${validOptions.join(', ')}`,\n        pass: true,\n      };\n    } else {\n      return {\n        message: () => `expected ${received} to be one of ${validOptions.join(', ')}`,\n        pass: false,\n      };\n    }\n  },\n});\n\ndeclare global {\n  namespace jest {\n    interface Matchers<R> {\n      toBeOneOf(validOptions: any[]): R;\n    }\n  }\n}"],"mappings":"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","ignoreList":[]}