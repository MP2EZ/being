{"version":3,"names":["_assessmentStore","require","describe","beforeEach","useAssessmentStore","getState","resetAssessment","it","_asyncToGenerator2","default","_updatedStore$current","_updatedStore$current2","_updatedStore$current3","_updatedStore$current4","_updatedStore$current5","store","expect","currentSession","toBeNull","startAssessment","updatedStore","toBeTruthy","type","toBe","context","id","toBeDefined","console","log","_updatedStore$current6","answerQuestion","answers","toHaveLength","questionId","response","_updatedStore$crisisD","crisisDetection","triggerType"],"sources":["assessmentStore.basic.test.ts"],"sourcesContent":["/**\n * Basic Assessment Store Session Creation Test\n * CRITICAL CLINICAL SAFETY VALIDATION\n *\n * This test validates that the reported \"currentSession = null\" issue\n * is actually resolved and startAssessment() works correctly.\n */\n\nimport { useAssessmentStore } from '../assessmentStore';\n\ndescribe('Assessment Store - Basic Session Creation', () => {\n  beforeEach(() => {\n    useAssessmentStore.getState().resetAssessment();\n  });\n\n  it('CRITICAL: startAssessment creates currentSession correctly', async () => {\n    const store = useAssessmentStore.getState();\n\n    // Verify initial state\n    expect(store.currentSession).toBeNull();\n\n    // Start PHQ-9 assessment\n    await store.startAssessment('phq9', 'clinical_validation');\n\n    // CRITICAL SAFETY CHECK: currentSession must NOT be null\n    const updatedStore = useAssessmentStore.getState();\n    expect(updatedStore.currentSession).toBeTruthy();\n    expect(updatedStore.currentSession?.type).toBe('phq9');\n    expect(updatedStore.currentSession?.context).toBe('clinical_validation');\n    expect(updatedStore.currentSession?.id).toBeDefined();\n\n    console.log('âœ… CLINICAL SAFETY VERIFIED: currentSession created successfully');\n    console.log('Session ID:', updatedStore.currentSession?.id);\n    console.log('Session Type:', updatedStore.currentSession?.type);\n  });\n\n  it('CRITICAL: startAssessment works for GAD-7', async () => {\n    const store = useAssessmentStore.getState();\n\n    await store.startAssessment('gad7', 'clinical_validation');\n\n    const updatedStore = useAssessmentStore.getState();\n    expect(updatedStore.currentSession).toBeTruthy();\n    expect(updatedStore.currentSession?.type).toBe('gad7');\n\n    console.log('âœ… GAD-7 SESSION CREATED: Crisis detection pathway enabled');\n  });\n\n  it('CRITICAL: Can answer questions after session creation', async () => {\n    const store = useAssessmentStore.getState();\n\n    await store.startAssessment('phq9');\n    await store.answerQuestion('phq9_1', 2);\n\n    const updatedStore = useAssessmentStore.getState();\n    expect(updatedStore.answers).toHaveLength(1);\n    expect(updatedStore.answers[0].questionId).toBe('phq9_1');\n    expect(updatedStore.answers[0].response).toBe(2);\n\n    console.log('âœ… THERAPEUTIC FLOW VERIFIED: Assessment answers recorded');\n  });\n\n  it('CRITICAL: Suicidal ideation detection triggers immediately', async () => {\n    const store = useAssessmentStore.getState();\n\n    await store.startAssessment('phq9');\n    await store.answerQuestion('phq9_9', 1); // Suicidal ideation\n\n    const updatedStore = useAssessmentStore.getState();\n    expect(updatedStore.crisisDetection).toBeTruthy();\n    expect(updatedStore.crisisDetection?.triggerType).toBe('phq9_suicidal');\n\n    console.log('ðŸš¨ CRISIS DETECTION VERIFIED: Suicidal ideation pathway active');\n  });\n});"],"mappings":"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","ignoreList":[]}