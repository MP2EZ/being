c0889bc3922030a25ed48d6cd37cf2a8
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _assessmentStore = require("../assessmentStore");
describe('Assessment Store - Basic Session Creation', function () {
  beforeEach(function () {
    _assessmentStore.useAssessmentStore.getState().resetAssessment();
  });
  it('CRITICAL: startAssessment creates currentSession correctly', (0, _asyncToGenerator2.default)(function* () {
    var _updatedStore$current, _updatedStore$current2, _updatedStore$current3, _updatedStore$current4, _updatedStore$current5;
    var store = _assessmentStore.useAssessmentStore.getState();
    expect(store.currentSession).toBeNull();
    yield store.startAssessment('phq9', 'clinical_validation');
    var updatedStore = _assessmentStore.useAssessmentStore.getState();
    expect(updatedStore.currentSession).toBeTruthy();
    expect((_updatedStore$current = updatedStore.currentSession) == null ? void 0 : _updatedStore$current.type).toBe('phq9');
    expect((_updatedStore$current2 = updatedStore.currentSession) == null ? void 0 : _updatedStore$current2.context).toBe('clinical_validation');
    expect((_updatedStore$current3 = updatedStore.currentSession) == null ? void 0 : _updatedStore$current3.id).toBeDefined();
    console.log('âœ… CLINICAL SAFETY VERIFIED: currentSession created successfully');
    console.log('Session ID:', (_updatedStore$current4 = updatedStore.currentSession) == null ? void 0 : _updatedStore$current4.id);
    console.log('Session Type:', (_updatedStore$current5 = updatedStore.currentSession) == null ? void 0 : _updatedStore$current5.type);
  }));
  it('CRITICAL: startAssessment works for GAD-7', (0, _asyncToGenerator2.default)(function* () {
    var _updatedStore$current6;
    var store = _assessmentStore.useAssessmentStore.getState();
    yield store.startAssessment('gad7', 'clinical_validation');
    var updatedStore = _assessmentStore.useAssessmentStore.getState();
    expect(updatedStore.currentSession).toBeTruthy();
    expect((_updatedStore$current6 = updatedStore.currentSession) == null ? void 0 : _updatedStore$current6.type).toBe('gad7');
    console.log('âœ… GAD-7 SESSION CREATED: Crisis detection pathway enabled');
  }));
  it('CRITICAL: Can answer questions after session creation', (0, _asyncToGenerator2.default)(function* () {
    var store = _assessmentStore.useAssessmentStore.getState();
    yield store.startAssessment('phq9');
    yield store.answerQuestion('phq9_1', 2);
    var updatedStore = _assessmentStore.useAssessmentStore.getState();
    expect(updatedStore.answers).toHaveLength(1);
    expect(updatedStore.answers[0].questionId).toBe('phq9_1');
    expect(updatedStore.answers[0].response).toBe(2);
    console.log('âœ… THERAPEUTIC FLOW VERIFIED: Assessment answers recorded');
  }));
  it('CRITICAL: Suicidal ideation detection triggers immediately', (0, _asyncToGenerator2.default)(function* () {
    var _updatedStore$crisisD;
    var store = _assessmentStore.useAssessmentStore.getState();
    yield store.startAssessment('phq9');
    yield store.answerQuestion('phq9_9', 1);
    var updatedStore = _assessmentStore.useAssessmentStore.getState();
    expect(updatedStore.crisisDetection).toBeTruthy();
    expect((_updatedStore$crisisD = updatedStore.crisisDetection) == null ? void 0 : _updatedStore$crisisD.triggerType).toBe('phq9_suicidal');
    console.log('ðŸš¨ CRISIS DETECTION VERIFIED: Suicidal ideation pathway active');
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXNzZXNzbWVudFN0b3JlIiwicmVxdWlyZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsInVzZUFzc2Vzc21lbnRTdG9yZSIsImdldFN0YXRlIiwicmVzZXRBc3Nlc3NtZW50IiwiaXQiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkZWZhdWx0IiwiX3VwZGF0ZWRTdG9yZSRjdXJyZW50IiwiX3VwZGF0ZWRTdG9yZSRjdXJyZW50MiIsIl91cGRhdGVkU3RvcmUkY3VycmVudDMiLCJfdXBkYXRlZFN0b3JlJGN1cnJlbnQ0IiwiX3VwZGF0ZWRTdG9yZSRjdXJyZW50NSIsInN0b3JlIiwiZXhwZWN0IiwiY3VycmVudFNlc3Npb24iLCJ0b0JlTnVsbCIsInN0YXJ0QXNzZXNzbWVudCIsInVwZGF0ZWRTdG9yZSIsInRvQmVUcnV0aHkiLCJ0eXBlIiwidG9CZSIsImNvbnRleHQiLCJpZCIsInRvQmVEZWZpbmVkIiwiY29uc29sZSIsImxvZyIsIl91cGRhdGVkU3RvcmUkY3VycmVudDYiLCJhbnN3ZXJRdWVzdGlvbiIsImFuc3dlcnMiLCJ0b0hhdmVMZW5ndGgiLCJxdWVzdGlvbklkIiwicmVzcG9uc2UiLCJfdXBkYXRlZFN0b3JlJGNyaXNpc0QiLCJjcmlzaXNEZXRlY3Rpb24iLCJ0cmlnZ2VyVHlwZSJdLCJzb3VyY2VzIjpbImFzc2Vzc21lbnRTdG9yZS5iYXNpYy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQmFzaWMgQXNzZXNzbWVudCBTdG9yZSBTZXNzaW9uIENyZWF0aW9uIFRlc3RcbiAqIENSSVRJQ0FMIENMSU5JQ0FMIFNBRkVUWSBWQUxJREFUSU9OXG4gKlxuICogVGhpcyB0ZXN0IHZhbGlkYXRlcyB0aGF0IHRoZSByZXBvcnRlZCBcImN1cnJlbnRTZXNzaW9uID0gbnVsbFwiIGlzc3VlXG4gKiBpcyBhY3R1YWxseSByZXNvbHZlZCBhbmQgc3RhcnRBc3Nlc3NtZW50KCkgd29ya3MgY29ycmVjdGx5LlxuICovXG5cbmltcG9ydCB7IHVzZUFzc2Vzc21lbnRTdG9yZSB9IGZyb20gJy4uL2Fzc2Vzc21lbnRTdG9yZSc7XG5cbmRlc2NyaWJlKCdBc3Nlc3NtZW50IFN0b3JlIC0gQmFzaWMgU2Vzc2lvbiBDcmVhdGlvbicsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgdXNlQXNzZXNzbWVudFN0b3JlLmdldFN0YXRlKCkucmVzZXRBc3Nlc3NtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdDUklUSUNBTDogc3RhcnRBc3Nlc3NtZW50IGNyZWF0ZXMgY3VycmVudFNlc3Npb24gY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0b3JlID0gdXNlQXNzZXNzbWVudFN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICAvLyBWZXJpZnkgaW5pdGlhbCBzdGF0ZVxuICAgIGV4cGVjdChzdG9yZS5jdXJyZW50U2Vzc2lvbikudG9CZU51bGwoKTtcblxuICAgIC8vIFN0YXJ0IFBIUS05IGFzc2Vzc21lbnRcbiAgICBhd2FpdCBzdG9yZS5zdGFydEFzc2Vzc21lbnQoJ3BocTknLCAnY2xpbmljYWxfdmFsaWRhdGlvbicpO1xuXG4gICAgLy8gQ1JJVElDQUwgU0FGRVRZIENIRUNLOiBjdXJyZW50U2Vzc2lvbiBtdXN0IE5PVCBiZSBudWxsXG4gICAgY29uc3QgdXBkYXRlZFN0b3JlID0gdXNlQXNzZXNzbWVudFN0b3JlLmdldFN0YXRlKCk7XG4gICAgZXhwZWN0KHVwZGF0ZWRTdG9yZS5jdXJyZW50U2Vzc2lvbikudG9CZVRydXRoeSgpO1xuICAgIGV4cGVjdCh1cGRhdGVkU3RvcmUuY3VycmVudFNlc3Npb24/LnR5cGUpLnRvQmUoJ3BocTknKTtcbiAgICBleHBlY3QodXBkYXRlZFN0b3JlLmN1cnJlbnRTZXNzaW9uPy5jb250ZXh0KS50b0JlKCdjbGluaWNhbF92YWxpZGF0aW9uJyk7XG4gICAgZXhwZWN0KHVwZGF0ZWRTdG9yZS5jdXJyZW50U2Vzc2lvbj8uaWQpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIENMSU5JQ0FMIFNBRkVUWSBWRVJJRklFRDogY3VycmVudFNlc3Npb24gY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiBJRDonLCB1cGRhdGVkU3RvcmUuY3VycmVudFNlc3Npb24/LmlkKTtcbiAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiBUeXBlOicsIHVwZGF0ZWRTdG9yZS5jdXJyZW50U2Vzc2lvbj8udHlwZSk7XG4gIH0pO1xuXG4gIGl0KCdDUklUSUNBTDogc3RhcnRBc3Nlc3NtZW50IHdvcmtzIGZvciBHQUQtNycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzdG9yZSA9IHVzZUFzc2Vzc21lbnRTdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgYXdhaXQgc3RvcmUuc3RhcnRBc3Nlc3NtZW50KCdnYWQ3JywgJ2NsaW5pY2FsX3ZhbGlkYXRpb24nKTtcblxuICAgIGNvbnN0IHVwZGF0ZWRTdG9yZSA9IHVzZUFzc2Vzc21lbnRTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGV4cGVjdCh1cGRhdGVkU3RvcmUuY3VycmVudFNlc3Npb24pLnRvQmVUcnV0aHkoKTtcbiAgICBleHBlY3QodXBkYXRlZFN0b3JlLmN1cnJlbnRTZXNzaW9uPy50eXBlKS50b0JlKCdnYWQ3Jyk7XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIEdBRC03IFNFU1NJT04gQ1JFQVRFRDogQ3Jpc2lzIGRldGVjdGlvbiBwYXRod2F5IGVuYWJsZWQnKTtcbiAgfSk7XG5cbiAgaXQoJ0NSSVRJQ0FMOiBDYW4gYW5zd2VyIHF1ZXN0aW9ucyBhZnRlciBzZXNzaW9uIGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0b3JlID0gdXNlQXNzZXNzbWVudFN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICBhd2FpdCBzdG9yZS5zdGFydEFzc2Vzc21lbnQoJ3BocTknKTtcbiAgICBhd2FpdCBzdG9yZS5hbnN3ZXJRdWVzdGlvbigncGhxOV8xJywgMik7XG5cbiAgICBjb25zdCB1cGRhdGVkU3RvcmUgPSB1c2VBc3Nlc3NtZW50U3RvcmUuZ2V0U3RhdGUoKTtcbiAgICBleHBlY3QodXBkYXRlZFN0b3JlLmFuc3dlcnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBleHBlY3QodXBkYXRlZFN0b3JlLmFuc3dlcnNbMF0ucXVlc3Rpb25JZCkudG9CZSgncGhxOV8xJyk7XG4gICAgZXhwZWN0KHVwZGF0ZWRTdG9yZS5hbnN3ZXJzWzBdLnJlc3BvbnNlKS50b0JlKDIpO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBUSEVSQVBFVVRJQyBGTE9XIFZFUklGSUVEOiBBc3Nlc3NtZW50IGFuc3dlcnMgcmVjb3JkZWQnKTtcbiAgfSk7XG5cbiAgaXQoJ0NSSVRJQ0FMOiBTdWljaWRhbCBpZGVhdGlvbiBkZXRlY3Rpb24gdHJpZ2dlcnMgaW1tZWRpYXRlbHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc3RvcmUgPSB1c2VBc3Nlc3NtZW50U3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgIGF3YWl0IHN0b3JlLnN0YXJ0QXNzZXNzbWVudCgncGhxOScpO1xuICAgIGF3YWl0IHN0b3JlLmFuc3dlclF1ZXN0aW9uKCdwaHE5XzknLCAxKTsgLy8gU3VpY2lkYWwgaWRlYXRpb25cblxuICAgIGNvbnN0IHVwZGF0ZWRTdG9yZSA9IHVzZUFzc2Vzc21lbnRTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGV4cGVjdCh1cGRhdGVkU3RvcmUuY3Jpc2lzRGV0ZWN0aW9uKS50b0JlVHJ1dGh5KCk7XG4gICAgZXhwZWN0KHVwZGF0ZWRTdG9yZS5jcmlzaXNEZXRlY3Rpb24/LnRyaWdnZXJUeXBlKS50b0JlKCdwaHE5X3N1aWNpZGFsJyk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+aqCBDUklTSVMgREVURUNUSU9OIFZFUklGSUVEOiBTdWljaWRhbCBpZGVhdGlvbiBwYXRod2F5IGFjdGl2ZScpO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7QUFRQSxJQUFBQSxnQkFBQSxHQUFBQyxPQUFBO0FBRUFDLFFBQVEsQ0FBQywyQ0FB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