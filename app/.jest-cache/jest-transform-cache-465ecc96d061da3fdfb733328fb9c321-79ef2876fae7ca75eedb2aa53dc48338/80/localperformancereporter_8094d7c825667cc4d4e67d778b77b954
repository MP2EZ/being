4dc209d668ca57981bc12f47b5cdd353
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var fs = require('fs');
var path = require('path');
var LocalPerformanceReporter = function () {
  function LocalPerformanceReporter(globalConfig) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    (0, _classCallCheck2.default)(this, LocalPerformanceReporter);
    this.globalConfig = globalConfig;
    this.options = Object.assign({
      outputFile: 'test-results/local-performance.json',
      includeTimings: true,
      thresholds: {
        crisis: 3000,
        clinical: 5000,
        unit: 1000,
        integration: 10000
      }
    }, options);
    this.testResults = [];
    this.performanceIssues = [];
    this.startTime = Date.now();
  }
  return (0, _createClass2.default)(LocalPerformanceReporter, [{
    key: "onRunStart",
    value: function onRunStart() {
      console.log('üîÑ Starting local performance monitoring...\n');
      this.startTime = Date.now();
    }
  }, {
    key: "onTestResult",
    value: function onTestResult(test, testResult) {
      var _this = this;
      if (!this.options.includeTimings) return;
      var testPath = test.path;
      var testCategory = this.categorizeTest(testPath);
      var threshold = this.options.thresholds[testCategory] || 5000;
      testResult.testResults.forEach(function (result) {
        var duration = result.duration || 0;
        var isSlowTest = duration > threshold;
        var isCrisisTest = _this.isCrisisTest(result.fullName);
        var testData = {
          testName: result.fullName,
          testPath: testPath.replace(_this.globalConfig.rootDir, ''),
          duration: duration,
          category: testCategory,
          threshold: threshold,
          isSlowTest: isSlowTest,
          isCrisisTest: isCrisisTest,
          status: result.status,
          timestamp: new Date().toISOString()
        };
        _this.testResults.push(testData);
        if (isSlowTest) {
          var issue = Object.assign({}, testData, {
            severity: isCrisisTest ? 'CRITICAL' : 'WARNING',
            message: isCrisisTest ? `üö® CRISIS TEST PERFORMANCE VIOLATION: ${duration}ms > ${threshold}ms` : `‚ö†Ô∏è  SLOW TEST: ${duration}ms > ${threshold}ms`
          });
          _this.performanceIssues.push(issue);
          if (isCrisisTest) {
            console.error(`\n${issue.message}`);
            console.error(`   Test: ${result.fullName}`);
            console.error(`   File: ${testData.testPath}\n`);
          } else {
            console.warn(`\n${issue.message}`);
            console.warn(`   Test: ${result.fullName}\n`);
          }
        }
        if (isCrisisTest && duration < threshold) {
          console.log(`‚úÖ Crisis test performance OK: ${duration}ms < ${threshold}ms`);
        }
      });
    }
  }, {
    key: "onRunComplete",
    value: function onRunComplete() {
      var totalDuration = Date.now() - this.startTime;
      this.generatePerformanceReport(totalDuration);
      this.saveResults();
      this.printSummary(totalDuration);
    }
  }, {
    key: "categorizeTest",
    value: function categorizeTest(testPath) {
      if (testPath.includes('crisis')) return 'crisis';
      if (testPath.includes('clinical')) return 'clinical';
      if (testPath.includes('integration')) return 'integration';
      if (testPath.includes('performance')) return 'performance';
      if (testPath.includes('e2e')) return 'integration';
      return 'unit';
    }
  }, {
    key: "isCrisisTest",
    value: function isCrisisTest(testName) {
      return /crisis|emergency|988|intervention/i.test(testName);
    }
  }, {
    key: "generatePerformanceReport",
    value: function generatePerformanceReport(totalDuration) {
      var categories = {};
      var slowTests = [];
      var crisisTests = [];
      this.testResults.forEach(function (test) {
        if (!categories[test.category]) {
          categories[test.category] = {
            count: 0,
            totalDuration: 0,
            slowCount: 0,
            averageDuration: 0
          };
        }
        var cat = categories[test.category];
        cat.count++;
        cat.totalDuration += test.duration;
        if (test.isSlowTest) cat.slowCount++;
        if (test.isSlowTest) {
          slowTests.push(test);
        }
        if (test.isCrisisTest) {
          crisisTests.push(test);
        }
      });
      Object.keys(categories).forEach(function (cat) {
        categories[cat].averageDuration = categories[cat].totalDuration / categories[cat].count;
      });
      this.performanceReport = {
        timestamp: new Date().toISOString(),
        totalDuration: totalDuration,
        totalTests: this.testResults.length,
        categories: categories,
        slowTests: slowTests.sort(function (a, b) {
          return b.duration - a.duration;
        }),
        crisisTests: crisisTests,
        performanceIssues: this.performanceIssues,
        recommendations: this.generateRecommendations(categories, slowTests, crisisTests)
      };
    }
  }, {
    key: "generateRecommendations",
    value: function generateRecommendations(categories, slowTests, crisisTests) {
      var recommendations = [];
      var slowCrisisTests = crisisTests.filter(function (t) {
        return t.isSlowTest;
      });
      if (slowCrisisTests.length > 0) {
        recommendations.push({
          type: 'CRITICAL',
          category: 'crisis',
          message: `${slowCrisisTests.length} crisis tests exceed 3s threshold`,
          action: 'Optimize crisis detection algorithms and reduce async operations',
          tests: slowCrisisTests.map(function (t) {
            return t.testName;
          })
        });
      }
      if (categories.unit && categories.unit.averageDuration > 500) {
        recommendations.push({
          type: 'WARNING',
          category: 'unit',
          message: `Unit tests average ${Math.round(categories.unit.averageDuration)}ms (target: <500ms)`,
          action: 'Review mocking strategies and reduce external dependencies'
        });
      }
      if (categories.integration && categories.integration.slowCount > categories.integration.count * 0.3) {
        recommendations.push({
          type: 'INFO',
          category: 'integration',
          message: `${Math.round(categories.integration.slowCount / categories.integration.count * 100)}% of integration tests are slow`,
          action: 'Consider parallel execution or test optimization'
        });
      }
      return recommendations;
    }
  }, {
    key: "saveResults",
    value: function saveResults() {
      var _this2 = this;
      var outputDir = path.dirname(this.options.outputFile);
      if (!fs.existsSync(outputDir)) {
        fs.mkdirSync(outputDir, {
          recursive: true
        });
      }
      fs.writeFileSync(this.options.outputFile, JSON.stringify(this.performanceReport, null, 2));
      var summary = {
        timestamp: this.performanceReport.timestamp,
        totalDuration: this.performanceReport.totalDuration,
        totalTests: this.performanceReport.totalTests,
        slowTestCount: this.performanceReport.slowTests.length,
        crisisTestCount: this.performanceReport.crisisTests.length,
        criticalIssues: this.performanceIssues.filter(function (i) {
          return i.severity === 'CRITICAL';
        }).length,
        categories: Object.keys(this.performanceReport.categories).reduce(function (acc, cat) {
          acc[cat] = {
            count: _this2.performanceReport.categories[cat].count,
            averageDuration: Math.round(_this2.performanceReport.categories[cat].averageDuration)
          };
          return acc;
        }, {})
      };
      fs.writeFileSync(this.options.outputFile.replace('.json', '-summary.json'), JSON.stringify(summary, null, 2));
    }
  }, {
    key: "printSummary",
    value: function printSummary(totalDuration) {
      var _this$performanceRepo;
      console.log('\nüìä Local Performance Test Summary');
      console.log('====================================');
      console.log(`Total Duration: ${totalDuration}ms`);
      console.log(`Total Tests: ${this.testResults.length}`);
      if (this.performanceIssues.length > 0) {
        var critical = this.performanceIssues.filter(function (i) {
          return i.severity === 'CRITICAL';
        });
        var warnings = this.performanceIssues.filter(function (i) {
          return i.severity === 'WARNING';
        });
        console.log(`\n‚ö†Ô∏è  Performance Issues: ${this.performanceIssues.length}`);
        if (critical.length > 0) {
          console.log(`   üö® Critical: ${critical.length} (Crisis test violations)`);
        }
        if (warnings.length > 0) {
          console.log(`   ‚ö†Ô∏è  Warnings: ${warnings.length} (Slow tests)`);
        }
      } else {
        console.log('\n‚úÖ All tests within performance thresholds');
      }
      if (this.performanceReport.categories) {
        console.log('\nCategory Performance:');
        Object.entries(this.performanceReport.categories).forEach(function (_ref) {
          var _ref2 = (0, _slicedToArray2.default)(_ref, 2),
            cat = _ref2[0],
            data = _ref2[1];
          var avg = Math.round(data.averageDuration);
          var slowPct = Math.round(data.slowCount / data.count * 100);
          console.log(`   ${cat}: ${data.count} tests, ${avg}ms avg, ${slowPct}% slow`);
        });
      }
      if (((_this$performanceRepo = this.performanceReport.recommendations) == null ? void 0 : _this$performanceRepo.length) > 0) {
        console.log('\nüí° Recommendations:');
        this.performanceReport.recommendations.forEach(function (rec) {
          console.log(`   ${rec.type === 'CRITICAL' ? 'üö®' : rec.type === 'WARNING' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'} ${rec.message}`);
          console.log(`      Action: ${rec.action}`);
        });
      }
      console.log(`\nüìÑ Detailed report: ${this.options.outputFile}`);
      console.log('====================================\n');
    }
  }]);
}();
module.exports = LocalPerformanceReporter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiTG9jYWxQZXJmb3JtYW5jZVJlcG9ydGVyIiwiZ2xvYmFsQ29uZmlnIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIl9jbGFzc0NhbGxDaGVjazIiLCJkZWZhdWx0IiwiT2JqZWN0IiwiYXNzaWduIiwib3V0cHV0RmlsZSIsImluY2x1ZGVUaW1pbmdzIiwidGhyZXNob2xkcyIsImNyaXNpcyIsImNsaW5pY2FsIiwidW5pdCIsImludGVncmF0aW9uIiwidGVzdFJlc3VsdHMiLCJwZXJmb3JtYW5jZUlzc3VlcyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJvblJ1blN0YXJ0IiwiY29uc29sZSIsImxvZyIsIm9uVGVzdFJlc3VsdCIsInRlc3QiLCJ0ZXN0UmVzdWx0IiwiX3RoaXMiLCJ0ZXN0UGF0aCIsInRlc3RDYXRlZ29yeSIsImNhdGVnb3JpemVUZXN0IiwidGhyZXNob2xkIiwiZm9yRWFjaCIsInJlc3VsdCIsImR1cmF0aW9uIiwiaXNTbG93VGVzdCIsImlzQ3Jpc2lzVGVzdCIsImZ1bGxOYW1lIiwidGVzdERhdGEiLCJ0ZXN0TmFtZSIsInJlcGxhY2UiLCJyb290RGlyIiwiY2F0ZWdvcnkiLCJzdGF0dXMiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJpc3N1ZSIsInNldmVyaXR5IiwibWVzc2FnZSIsImVycm9yIiwid2FybiIsIm9uUnVuQ29tcGxldGUiLCJ0b3RhbER1cmF0aW9uIiwiZ2VuZXJhdGVQZXJmb3JtYW5jZVJlcG9ydCIsInNhdmVSZXN1bHRzIiwicHJpbnRTdW1tYXJ5IiwiaW5jbHVkZXMiLCJjYXRlZ29yaWVzIiwic2xvd1Rlc3RzIiwiY3Jpc2lzVGVzdHMiLCJjb3VudCIsInNsb3dDb3VudCIsImF2ZXJhZ2VEdXJhdGlvbiIsImNhdCIsImtleXMiLCJwZXJmb3JtYW5jZVJlcG9ydCIsInRvdGFsVGVzdHMiLCJzb3J0IiwiYSIsImIiLCJyZWNvbW1lbmRhdGlvbnMiLCJnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyIsInNsb3dDcmlzaXNUZXN0cyIsImZpbHRlciIsInQiLCJ0eXBlIiwiYWN0aW9uIiwidGVzdHMiLCJtYXAiLCJNYXRoIiwicm91bmQiLCJfdGhpczIiLCJvdXRwdXREaXIiLCJkaXJuYW1lIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsIndyaXRlRmlsZVN5bmMiLCJKU09OIiwic3RyaW5naWZ5Iiwic3VtbWFyeSIsInNsb3dUZXN0Q291bnQiLCJjcmlzaXNUZXN0Q291bnQiLCJjcml0aWNhbElzc3VlcyIsImkiLCJyZWR1Y2UiLCJhY2MiLCJfdGhpcyRwZXJmb3JtYW5jZVJlcG8iLCJjcml0aWNhbCIsIndhcm5pbmdzIiwiZW50cmllcyIsIl9yZWYiLCJfcmVmMiIsIl9zbGljZWRUb0FycmF5MiIsImRhdGEiLCJhdmciLCJzbG93UGN0IiwicmVjIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImxvY2FsLXBlcmZvcm1hbmNlLXJlcG9ydGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTG9jYWwgUGVyZm9ybWFuY2UgUmVwb3J0ZXJcbiAqIFJlYWwtdGltZSBwZXJmb3JtYW5jZSBtb25pdG9yaW5nIGZvciBsb2NhbCBkZXZlbG9wbWVudFxuICovXG5cbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbmNsYXNzIExvY2FsUGVyZm9ybWFuY2VSZXBvcnRlciB7XG4gIGNvbnN0cnVjdG9yKGdsb2JhbENvbmZpZywgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5nbG9iYWxDb25maWcgPSBnbG9iYWxDb25maWc7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgb3V0cHV0RmlsZTogJ3Rlc3QtcmVzdWx0cy9sb2NhbC1wZXJmb3JtYW5jZS5qc29uJyxcbiAgICAgIGluY2x1ZGVUaW1pbmdzOiB0cnVlLFxuICAgICAgdGhyZXNob2xkczoge1xuICAgICAgICBjcmlzaXM6IDMwMDAsICAgICAvLyBDcmlzaXMgdGVzdHMgbXVzdCBiZSA8IDNzXG4gICAgICAgIGNsaW5pY2FsOiA1MDAwLCAgIC8vIENsaW5pY2FsIHRlc3RzIG11c3QgYmUgPCA1c1xuICAgICAgICB1bml0OiAxMDAwLCAgICAgICAvLyBVbml0IHRlc3RzIG11c3QgYmUgPCAxc1xuICAgICAgICBpbnRlZ3JhdGlvbjogMTAwMDAgLy8gSW50ZWdyYXRpb24gdGVzdHMgbXVzdCBiZSA8IDEwc1xuICAgICAgfSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuICAgIFxuICAgIHRoaXMudGVzdFJlc3VsdHMgPSBbXTtcbiAgICB0aGlzLnBlcmZvcm1hbmNlSXNzdWVzID0gW107XG4gICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICB9XG5cbiAgb25SdW5TdGFydCgpIHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCBTdGFydGluZyBsb2NhbCBwZXJmb3JtYW5jZSBtb25pdG9yaW5nLi4uXFxuJyk7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICB9XG5cbiAgb25UZXN0UmVzdWx0KHRlc3QsIHRlc3RSZXN1bHQpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlVGltaW5ncykgcmV0dXJuO1xuXG4gICAgY29uc3QgdGVzdFBhdGggPSB0ZXN0LnBhdGg7XG4gICAgY29uc3QgdGVzdENhdGVnb3J5ID0gdGhpcy5jYXRlZ29yaXplVGVzdCh0ZXN0UGF0aCk7XG4gICAgY29uc3QgdGhyZXNob2xkID0gdGhpcy5vcHRpb25zLnRocmVzaG9sZHNbdGVzdENhdGVnb3J5XSB8fCA1MDAwO1xuXG4gICAgdGVzdFJlc3VsdC50ZXN0UmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IHJlc3VsdC5kdXJhdGlvbiB8fCAwO1xuICAgICAgY29uc3QgaXNTbG93VGVzdCA9IGR1cmF0aW9uID4gdGhyZXNob2xkO1xuICAgICAgY29uc3QgaXNDcmlzaXNUZXN0ID0gdGhpcy5pc0NyaXNpc1Rlc3QocmVzdWx0LmZ1bGxOYW1lKTtcblxuICAgICAgY29uc3QgdGVzdERhdGEgPSB7XG4gICAgICAgIHRlc3ROYW1lOiByZXN1bHQuZnVsbE5hbWUsXG4gICAgICAgIHRlc3RQYXRoOiB0ZXN0UGF0aC5yZXBsYWNlKHRoaXMuZ2xvYmFsQ29uZmlnLnJvb3REaXIsICcnKSxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIGNhdGVnb3J5OiB0ZXN0Q2F0ZWdvcnksXG4gICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgaXNTbG93VGVzdCxcbiAgICAgICAgaXNDcmlzaXNUZXN0LFxuICAgICAgICBzdGF0dXM6IHJlc3VsdC5zdGF0dXMsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnRlc3RSZXN1bHRzLnB1c2godGVzdERhdGEpO1xuXG4gICAgICAvLyBUcmFjayBwZXJmb3JtYW5jZSBpc3N1ZXMgZm9yIGltbWVkaWF0ZSBmZWVkYmFja1xuICAgICAgaWYgKGlzU2xvd1Rlc3QpIHtcbiAgICAgICAgY29uc3QgaXNzdWUgPSB7XG4gICAgICAgICAgLi4udGVzdERhdGEsXG4gICAgICAgICAgc2V2ZXJpdHk6IGlzQ3Jpc2lzVGVzdCA/ICdDUklUSUNBTCcgOiAnV0FSTklORycsXG4gICAgICAgICAgbWVzc2FnZTogaXNDcmlzaXNUZXN0IFxuICAgICAgICAgICAgPyBg8J+aqCBDUklTSVMgVEVTVCBQRVJGT1JNQU5DRSBWSU9MQVRJT046ICR7ZHVyYXRpb259bXMgPiAke3RocmVzaG9sZH1tc2BcbiAgICAgICAgICAgIDogYOKaoO+4jyAgU0xPVyBURVNUOiAke2R1cmF0aW9ufW1zID4gJHt0aHJlc2hvbGR9bXNgXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlSXNzdWVzLnB1c2goaXNzdWUpO1xuICAgICAgICBcbiAgICAgICAgLy8gSW1tZWRpYXRlIGNvbnNvbGUgb3V0cHV0IGZvciBkZXZlbG9wbWVudFxuICAgICAgICBpZiAoaXNDcmlzaXNUZXN0KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgXFxuJHtpc3N1ZS5tZXNzYWdlfWApO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIFRlc3Q6ICR7cmVzdWx0LmZ1bGxOYW1lfWApO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIEZpbGU6ICR7dGVzdERhdGEudGVzdFBhdGh9XFxuYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBcXG4ke2lzc3VlLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgY29uc29sZS53YXJuKGAgICBUZXN0OiAke3Jlc3VsdC5mdWxsTmFtZX1cXG5gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZWFsLXRpbWUgcGVyZm9ybWFuY2UgZmVlZGJhY2sgZm9yIGNyaXNpcyB0ZXN0c1xuICAgICAgaWYgKGlzQ3Jpc2lzVGVzdCAmJiBkdXJhdGlvbiA8IHRocmVzaG9sZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIENyaXNpcyB0ZXN0IHBlcmZvcm1hbmNlIE9LOiAke2R1cmF0aW9ufW1zIDwgJHt0aHJlc2hvbGR9bXNgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uUnVuQ29tcGxldGUoKSB7XG4gICAgY29uc3QgdG90YWxEdXJhdGlvbiA9IERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZTtcbiAgICBcbiAgICB0aGlzLmdlbmVyYXRlUGVyZm9ybWFuY2VSZXBvcnQodG90YWxEdXJhdGlvbik7XG4gICAgdGhpcy5zYXZlUmVzdWx0cygpO1xuICAgIHRoaXMucHJpbnRTdW1tYXJ5KHRvdGFsRHVyYXRpb24pO1xuICB9XG5cbiAgY2F0ZWdvcml6ZVRlc3QodGVzdFBhdGgpIHtcbiAgICBpZiAodGVzdFBhdGguaW5jbHVkZXMoJ2NyaXNpcycpKSByZXR1cm4gJ2NyaXNpcyc7XG4gICAgaWYgKHRlc3RQYXRoLmluY2x1ZGVzKCdjbGluaWNhbCcpKSByZXR1cm4gJ2NsaW5pY2FsJztcbiAgICBpZiAodGVzdFBhdGguaW5jbHVkZXMoJ2ludGVncmF0aW9uJykpIHJldHVybiAnaW50ZWdyYXRpb24nO1xuICAgIGlmICh0ZXN0UGF0aC5pbmNsdWRlcygncGVyZm9ybWFuY2UnKSkgcmV0dXJuICdwZXJmb3JtYW5jZSc7XG4gICAgaWYgKHRlc3RQYXRoLmluY2x1ZGVzKCdlMmUnKSkgcmV0dXJuICdpbnRlZ3JhdGlvbic7XG4gICAgcmV0dXJuICd1bml0JztcbiAgfVxuXG4gIGlzQ3Jpc2lzVGVzdCh0ZXN0TmFtZSkge1xuICAgIHJldHVybiAvY3Jpc2lzfGVtZXJnZW5jeXw5ODh8aW50ZXJ2ZW50aW9uL2kudGVzdCh0ZXN0TmFtZSk7XG4gIH1cblxuICBnZW5lcmF0ZVBlcmZvcm1hbmNlUmVwb3J0KHRvdGFsRHVyYXRpb24pIHtcbiAgICBjb25zdCBjYXRlZ29yaWVzID0ge307XG4gICAgY29uc3Qgc2xvd1Rlc3RzID0gW107XG4gICAgY29uc3QgY3Jpc2lzVGVzdHMgPSBbXTtcblxuICAgIHRoaXMudGVzdFJlc3VsdHMuZm9yRWFjaCh0ZXN0ID0+IHtcbiAgICAgIC8vIENhdGVnb3JpemUgYnkgdHlwZVxuICAgICAgaWYgKCFjYXRlZ29yaWVzW3Rlc3QuY2F0ZWdvcnldKSB7XG4gICAgICAgIGNhdGVnb3JpZXNbdGVzdC5jYXRlZ29yeV0gPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWxEdXJhdGlvbjogMCxcbiAgICAgICAgICBzbG93Q291bnQ6IDAsXG4gICAgICAgICAgYXZlcmFnZUR1cmF0aW9uOiAwXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNhdCA9IGNhdGVnb3JpZXNbdGVzdC5jYXRlZ29yeV07XG4gICAgICBjYXQuY291bnQrKztcbiAgICAgIGNhdC50b3RhbER1cmF0aW9uICs9IHRlc3QuZHVyYXRpb247XG4gICAgICBpZiAodGVzdC5pc1Nsb3dUZXN0KSBjYXQuc2xvd0NvdW50Kys7XG5cbiAgICAgIC8vIFRyYWNrIHNsb3cgdGVzdHNcbiAgICAgIGlmICh0ZXN0LmlzU2xvd1Rlc3QpIHtcbiAgICAgICAgc2xvd1Rlc3RzLnB1c2godGVzdCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRyYWNrIGNyaXNpcyB0ZXN0c1xuICAgICAgaWYgKHRlc3QuaXNDcmlzaXNUZXN0KSB7XG4gICAgICAgIGNyaXNpc1Rlc3RzLnB1c2godGVzdCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDYWxjdWxhdGUgYXZlcmFnZXNcbiAgICBPYmplY3Qua2V5cyhjYXRlZ29yaWVzKS5mb3JFYWNoKGNhdCA9PiB7XG4gICAgICBjYXRlZ29yaWVzW2NhdF0uYXZlcmFnZUR1cmF0aW9uID0gXG4gICAgICAgIGNhdGVnb3JpZXNbY2F0XS50b3RhbER1cmF0aW9uIC8gY2F0ZWdvcmllc1tjYXRdLmNvdW50O1xuICAgIH0pO1xuXG4gICAgdGhpcy5wZXJmb3JtYW5jZVJlcG9ydCA9IHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdG90YWxEdXJhdGlvbixcbiAgICAgIHRvdGFsVGVzdHM6IHRoaXMudGVzdFJlc3VsdHMubGVuZ3RoLFxuICAgICAgY2F0ZWdvcmllcyxcbiAgICAgIHNsb3dUZXN0czogc2xvd1Rlc3RzLnNvcnQoKGEsIGIpID0+IGIuZHVyYXRpb24gLSBhLmR1cmF0aW9uKSxcbiAgICAgIGNyaXNpc1Rlc3RzLFxuICAgICAgcGVyZm9ybWFuY2VJc3N1ZXM6IHRoaXMucGVyZm9ybWFuY2VJc3N1ZXMsXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IHRoaXMuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoY2F0ZWdvcmllcywgc2xvd1Rlc3RzLCBjcmlzaXNUZXN0cylcbiAgICB9O1xuICB9XG5cbiAgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoY2F0ZWdvcmllcywgc2xvd1Rlc3RzLCBjcmlzaXNUZXN0cykge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IFtdO1xuXG4gICAgLy8gQ3Jpc2lzIHRlc3QgcmVjb21tZW5kYXRpb25zXG4gICAgY29uc3Qgc2xvd0NyaXNpc1Rlc3RzID0gY3Jpc2lzVGVzdHMuZmlsdGVyKHQgPT4gdC5pc1Nsb3dUZXN0KTtcbiAgICBpZiAoc2xvd0NyaXNpc1Rlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgICAgdHlwZTogJ0NSSVRJQ0FMJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdjcmlzaXMnLFxuICAgICAgICBtZXNzYWdlOiBgJHtzbG93Q3Jpc2lzVGVzdHMubGVuZ3RofSBjcmlzaXMgdGVzdHMgZXhjZWVkIDNzIHRocmVzaG9sZGAsXG4gICAgICAgIGFjdGlvbjogJ09wdGltaXplIGNyaXNpcyBkZXRlY3Rpb24gYWxnb3JpdGhtcyBhbmQgcmVkdWNlIGFzeW5jIG9wZXJhdGlvbnMnLFxuICAgICAgICB0ZXN0czogc2xvd0NyaXNpc1Rlc3RzLm1hcCh0ID0+IHQudGVzdE5hbWUpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBVbml0IHRlc3QgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKGNhdGVnb3JpZXMudW5pdCAmJiBjYXRlZ29yaWVzLnVuaXQuYXZlcmFnZUR1cmF0aW9uID4gNTAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgICAgIHR5cGU6ICdXQVJOSU5HJyxcbiAgICAgICAgY2F0ZWdvcnk6ICd1bml0JyxcbiAgICAgICAgbWVzc2FnZTogYFVuaXQgdGVzdHMgYXZlcmFnZSAke01hdGgucm91bmQoY2F0ZWdvcmllcy51bml0LmF2ZXJhZ2VEdXJhdGlvbil9bXMgKHRhcmdldDogPDUwMG1zKWAsXG4gICAgICAgIGFjdGlvbjogJ1JldmlldyBtb2NraW5nIHN0cmF0ZWdpZXMgYW5kIHJlZHVjZSBleHRlcm5hbCBkZXBlbmRlbmNpZXMnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBJbnRlZ3JhdGlvbiB0ZXN0IHJlY29tbWVuZGF0aW9uc1xuICAgIGlmIChjYXRlZ29yaWVzLmludGVncmF0aW9uICYmIGNhdGVnb3JpZXMuaW50ZWdyYXRpb24uc2xvd0NvdW50ID4gY2F0ZWdvcmllcy5pbnRlZ3JhdGlvbi5jb3VudCAqIDAuMykge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICB0eXBlOiAnSU5GTycsXG4gICAgICAgIGNhdGVnb3J5OiAnaW50ZWdyYXRpb24nLFxuICAgICAgICBtZXNzYWdlOiBgJHtNYXRoLnJvdW5kKGNhdGVnb3JpZXMuaW50ZWdyYXRpb24uc2xvd0NvdW50L2NhdGVnb3JpZXMuaW50ZWdyYXRpb24uY291bnQqMTAwKX0lIG9mIGludGVncmF0aW9uIHRlc3RzIGFyZSBzbG93YCxcbiAgICAgICAgYWN0aW9uOiAnQ29uc2lkZXIgcGFyYWxsZWwgZXhlY3V0aW9uIG9yIHRlc3Qgb3B0aW1pemF0aW9uJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIHNhdmVSZXN1bHRzKCkge1xuICAgIGNvbnN0IG91dHB1dERpciA9IHBhdGguZGlybmFtZSh0aGlzLm9wdGlvbnMub3V0cHV0RmlsZSk7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKG91dHB1dERpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyhvdXRwdXREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8vIFNhdmUgZGV0YWlsZWQgcmVzdWx0c1xuICAgIGZzLndyaXRlRmlsZVN5bmMoXG4gICAgICB0aGlzLm9wdGlvbnMub3V0cHV0RmlsZSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMucGVyZm9ybWFuY2VSZXBvcnQsIG51bGwsIDIpXG4gICAgKTtcblxuICAgIC8vIFNhdmUgc2ltcGxpZmllZCBzdW1tYXJ5IGZvciBxdWljayByZWZlcmVuY2VcbiAgICBjb25zdCBzdW1tYXJ5ID0ge1xuICAgICAgdGltZXN0YW1wOiB0aGlzLnBlcmZvcm1hbmNlUmVwb3J0LnRpbWVzdGFtcCxcbiAgICAgIHRvdGFsRHVyYXRpb246IHRoaXMucGVyZm9ybWFuY2VSZXBvcnQudG90YWxEdXJhdGlvbixcbiAgICAgIHRvdGFsVGVzdHM6IHRoaXMucGVyZm9ybWFuY2VSZXBvcnQudG90YWxUZXN0cyxcbiAgICAgIHNsb3dUZXN0Q291bnQ6IHRoaXMucGVyZm9ybWFuY2VSZXBvcnQuc2xvd1Rlc3RzLmxlbmd0aCxcbiAgICAgIGNyaXNpc1Rlc3RDb3VudDogdGhpcy5wZXJmb3JtYW5jZVJlcG9ydC5jcmlzaXNUZXN0cy5sZW5ndGgsXG4gICAgICBjcml0aWNhbElzc3VlczogdGhpcy5wZXJmb3JtYW5jZUlzc3Vlcy5maWx0ZXIoaSA9PiBpLnNldmVyaXR5ID09PSAnQ1JJVElDQUwnKS5sZW5ndGgsXG4gICAgICBjYXRlZ29yaWVzOiBPYmplY3Qua2V5cyh0aGlzLnBlcmZvcm1hbmNlUmVwb3J0LmNhdGVnb3JpZXMpLnJlZHVjZSgoYWNjLCBjYXQpID0+IHtcbiAgICAgICAgYWNjW2NhdF0gPSB7XG4gICAgICAgICAgY291bnQ6IHRoaXMucGVyZm9ybWFuY2VSZXBvcnQuY2F0ZWdvcmllc1tjYXRdLmNvdW50LFxuICAgICAgICAgIGF2ZXJhZ2VEdXJhdGlvbjogTWF0aC5yb3VuZCh0aGlzLnBlcmZvcm1hbmNlUmVwb3J0LmNhdGVnb3JpZXNbY2F0XS5hdmVyYWdlRHVyYXRpb24pXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCB7fSlcbiAgICB9O1xuXG4gICAgZnMud3JpdGVGaWxlU3luYyhcbiAgICAgIHRoaXMub3B0aW9ucy5vdXRwdXRGaWxlLnJlcGxhY2UoJy5qc29uJywgJy1zdW1tYXJ5Lmpzb24nKSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHN1bW1hcnksIG51bGwsIDIpXG4gICAgKTtcbiAgfVxuXG4gIHByaW50U3VtbWFyeSh0b3RhbER1cmF0aW9uKSB7XG4gICAgY29uc29sZS5sb2coJ1xcbvCfk4ogTG9jYWwgUGVyZm9ybWFuY2UgVGVzdCBTdW1tYXJ5Jyk7XG4gICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgIGNvbnNvbGUubG9nKGBUb3RhbCBEdXJhdGlvbjogJHt0b3RhbER1cmF0aW9ufW1zYCk7XG4gICAgY29uc29sZS5sb2coYFRvdGFsIFRlc3RzOiAke3RoaXMudGVzdFJlc3VsdHMubGVuZ3RofWApO1xuICAgIFxuICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlSXNzdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNyaXRpY2FsID0gdGhpcy5wZXJmb3JtYW5jZUlzc3Vlcy5maWx0ZXIoaSA9PiBpLnNldmVyaXR5ID09PSAnQ1JJVElDQUwnKTtcbiAgICAgIGNvbnN0IHdhcm5pbmdzID0gdGhpcy5wZXJmb3JtYW5jZUlzc3Vlcy5maWx0ZXIoaSA9PiBpLnNldmVyaXR5ID09PSAnV0FSTklORycpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgXFxu4pqg77iPICBQZXJmb3JtYW5jZSBJc3N1ZXM6ICR7dGhpcy5wZXJmb3JtYW5jZUlzc3Vlcy5sZW5ndGh9YCk7XG4gICAgICBpZiAoY3JpdGljYWwubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgICAg8J+aqCBDcml0aWNhbDogJHtjcml0aWNhbC5sZW5ndGh9IChDcmlzaXMgdGVzdCB2aW9sYXRpb25zKWApO1xuICAgICAgfVxuICAgICAgaWYgKHdhcm5pbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYCAgIOKaoO+4jyAgV2FybmluZ3M6ICR7d2FybmluZ3MubGVuZ3RofSAoU2xvdyB0ZXN0cylgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1xcbuKchSBBbGwgdGVzdHMgd2l0aGluIHBlcmZvcm1hbmNlIHRocmVzaG9sZHMnKTtcbiAgICB9XG5cbiAgICAvLyBDYXRlZ29yeSBicmVha2Rvd25cbiAgICBpZiAodGhpcy5wZXJmb3JtYW5jZVJlcG9ydC5jYXRlZ29yaWVzKSB7XG4gICAgICBjb25zb2xlLmxvZygnXFxuQ2F0ZWdvcnkgUGVyZm9ybWFuY2U6Jyk7XG4gICAgICBPYmplY3QuZW50cmllcyh0aGlzLnBlcmZvcm1hbmNlUmVwb3J0LmNhdGVnb3JpZXMpLmZvckVhY2goKFtjYXQsIGRhdGFdKSA9PiB7XG4gICAgICAgIGNvbnN0IGF2ZyA9IE1hdGgucm91bmQoZGF0YS5hdmVyYWdlRHVyYXRpb24pO1xuICAgICAgICBjb25zdCBzbG93UGN0ID0gTWF0aC5yb3VuZCgoZGF0YS5zbG93Q291bnQgLyBkYXRhLmNvdW50KSAqIDEwMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgICAke2NhdH06ICR7ZGF0YS5jb3VudH0gdGVzdHMsICR7YXZnfW1zIGF2ZywgJHtzbG93UGN0fSUgc2xvd2ApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmVjb21tZW5kYXRpb25zXG4gICAgaWYgKHRoaXMucGVyZm9ybWFuY2VSZXBvcnQucmVjb21tZW5kYXRpb25zPy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnXFxu8J+SoSBSZWNvbW1lbmRhdGlvbnM6Jyk7XG4gICAgICB0aGlzLnBlcmZvcm1hbmNlUmVwb3J0LnJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgICAke3JlYy50eXBlID09PSAnQ1JJVElDQUwnID8gJ/CfmqgnIDogcmVjLnR5cGUgPT09ICdXQVJOSU5HJyA/ICfimqDvuI8nIDogJ+KEue+4jyd9ICR7cmVjLm1lc3NhZ2V9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgICAgICBBY3Rpb246ICR7cmVjLmFjdGlvbn1gKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBcXG7wn5OEIERldGFpbGVkIHJlcG9ydDogJHt0aGlzLm9wdGlvbnMub3V0cHV0RmlsZX1gKTtcbiAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxuJyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBMb2NhbFBlcmZvcm1hbmNlUmVwb3J0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7O0FBS0EsSUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLElBQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUFDLElBRXZCRSx3QkFBd0I7RUFDNUIsU0FBQUEseUJBQVlDLFlBQVksRUFBZ0I7SUFBQSxJQUFkQyxPQUFPLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHLENBQUMsQ0FBQztJQUFBLElBQUFHLGdCQUFBLENBQUFDLE9BQUEsUUFBQVAsd0JBQUE7SUFDcEMsSUFBSSxDQUFDQyxZQUFZLEdBQUdBLFlBQVk7SUFDaEMsSUFBSSxDQUFDQyxPQUFPLEdBQUFNLE1BQUEsQ0FBQUMsTUFBQTtNQUNWQyxVQUFVLEVBQUUscUNBQXFDO01BQ2pEQyxjQUFjLEVBQUUsSUFBSTtNQUNwQkMsVUFBVSxFQUFFO1FBQ1ZDLE1BQU0sRUFBRSxJQUFJO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO1FBQ2RDLElBQUksRUFBRSxJQUFJO1FBQ1ZDLFdBQVcsRUFBRTtNQUNmO0lBQUMsR0FDRWQsT0FBTyxDQUNYO0lBRUQsSUFBSSxDQUFDZSxXQUFXLEdBQUcsRUFBRTtJQUNyQixJQUFJLENBQUNDLGlCQUFpQixHQUFHLEVBQUU7SUFDM0IsSUFBSSxDQUFDQyxTQUFTLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7RUFDN0I7RUFBQyxXQUFBQyxhQUFBLENBQUFmLE9BQUEsRUFBQVAsd0JBQUE7SUFBQXVCLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFDLFVBQVVBLENBQUEsRUFBRztNQUNY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